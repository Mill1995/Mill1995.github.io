<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>FactorySubNFT</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../../favicon.svg">
        <link rel="shortcut icon" href="../../../favicon.png">
        <link rel="stylesheet" href="../../../css/variables.css">
        <link rel="stylesheet" href="../../../css/general.css">
        <link rel="stylesheet" href="../../../css/chrome.css">
        <link rel="stylesheet" href="../../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../../highlight.css">
        <link rel="stylesheet" href="../../../tomorrow-night.css">
        <link rel="stylesheet" href="../../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../../../book.css">

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item "><a href="../../../index.html">Home</a></li><li class="chapter-item affix "><li class="part-title">contracts</li><li class="chapter-item expanded "><a href="../../../contracts/dao/index.html">❱ dao</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../contracts/dao/FactoryFilmNFT.sol/contract.FactoryFilmNFT.html">FactoryFilmNFT</a></li><li class="chapter-item expanded "><a href="../../../contracts/dao/FactorySubNFT.sol/contract.FactorySubNFT.html" class="active">FactorySubNFT</a></li><li class="chapter-item "><a href="../../../contracts/dao/FactoryTierNFT.sol/contract.FactoryTierNFT.html">FactoryTierNFT</a></li><li class="chapter-item "><a href="../../../contracts/dao/Ownablee.sol/contract.Ownablee.html">Ownablee</a></li><li class="chapter-item "><a href="../../../contracts/dao/Property.sol/contract.Property.html">Property</a></li><li class="chapter-item "><a href="../../../contracts/dao/StakingPool.sol/contract.StakingPool.html">StakingPool</a></li><li class="chapter-item "><a href="../../../contracts/dao/Subscription.sol/contract.Subscription.html">Subscription</a></li><li class="chapter-item "><a href="../../../contracts/dao/UniHelper.sol/contract.UniHelper.html">UniHelper</a></li><li class="chapter-item "><a href="../../../contracts/dao/VabbleDAO.sol/contract.VabbleDAO.html">VabbleDAO</a></li><li class="chapter-item "><a href="../../../contracts/dao/VabbleFund.sol/contract.VabbleFund.html">VabbleFund</a></li><li class="chapter-item "><a href="../../../contracts/dao/VabbleNFT.sol/contract.VabbleNFT.html">VabbleNFT</a></li><li class="chapter-item "><a href="../../../contracts/dao/Vote.sol/contract.Vote.html">Vote</a></li></ol></li><li class="chapter-item "><a href="../../../contracts/interfaces/index.html">❱ interfaces</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../contracts/interfaces/IFactoryFilmNFT.sol/interface.IFactoryFilmNFT.html">IFactoryFilmNFT</a></li><li class="chapter-item "><a href="../../../contracts/interfaces/IOwnablee.sol/interface.IOwnablee.html">IOwnablee</a></li><li class="chapter-item "><a href="../../../contracts/interfaces/IProperty.sol/interface.IProperty.html">IProperty</a></li><li class="chapter-item "><a href="../../../contracts/interfaces/IStakingPool.sol/interface.IStakingPool.html">IStakingPool</a></li><li class="chapter-item "><a href="../../../contracts/interfaces/IUniHelper.sol/interface.IUniHelper.html">IUniHelper</a></li><li class="chapter-item "><a href="../../../contracts/interfaces/IUniswapV2Factory.sol/interface.IUniswapV2Factory.html">IUniswapV2Factory</a></li><li class="chapter-item "><a href="../../../contracts/interfaces/IUniswapV2Router.sol/interface.IUniswapV2Router.html">IUniswapV2Router</a></li><li class="chapter-item "><a href="../../../contracts/interfaces/IVabbleDAO.sol/interface.IVabbleDAO.html">IVabbleDAO</a></li><li class="chapter-item "><a href="../../../contracts/interfaces/IVabbleFund.sol/interface.IVabbleFund.html">IVabbleFund</a></li><li class="chapter-item "><a href="../../../contracts/interfaces/IVote.sol/interface.IVote.html">IVote</a></li></ol></li><li class="chapter-item "><a href="../../../contracts/libraries/index.html">❱ libraries</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../contracts/libraries/Arrays.sol/library.Arrays.html">Arrays</a></li><li class="chapter-item "><a href="../../../contracts/libraries/Helper.sol/library.Helper.html">Helper</a></li></ol></li><li class="chapter-item "><a href="../../../contracts/mocks/index.html">❱ mocks</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../contracts/mocks/MockERC1155.sol/contract.MockERC1155.html">MockERC1155</a></li><li class="chapter-item "><a href="../../../contracts/mocks/MockERC20.sol/contract.MockERC20.html">MockERC20</a></li><li class="chapter-item "><a href="../../../contracts/mocks/MockERC721.sol/contract.MockERC721.html">MockERC721</a></li><li class="chapter-item "><a href="../../../contracts/mocks/MockUSDC.sol/contract.MockUSDC.html">MockUSDC</a></li><li class="chapter-item "><a href="../../../contracts/mocks/MockUSDT.sol/contract.MockUSDT.html">MockUSDT</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <a href="../../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/Mill1995/VABDAO" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="factorysubnft"><a class="header" href="#factorysubnft">FactorySubNFT</a></h1>
<p><a href="https://github.com/Mill1995/VABDAO/blob/4914bdc306cbdb860037485ce4bcebbfdd390c9f/contracts/dao/FactorySubNFT.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
IERC721Receiver, ReentrancyGuard</p>
<p><em>A factory contract for managing subscription NFTs.
Users can mint subscription NFTs, lock and unlock them based on predefined
categories and parameters. Payment can be made in either ETH or allowed ERC20 tokens.
This contract interfaces with Ownablee and UniHelper contracts for configuration
and asset management.</em></p>
<h2 id="state-variables"><a class="header" href="#state-variables">State Variables</a></h2>
<h3 id="ownable"><a class="header" href="#ownable">OWNABLE</a></h3>
<p><em>Address of the Ownable contract</em></p>
<pre><code class="language-solidity">address private immutable OWNABLE;
</code></pre>
<h3 id="uni_helper"><a class="header" href="#uni_helper">UNI_HELPER</a></h3>
<p><em>Address of the UniHelper contract</em></p>
<pre><code class="language-solidity">address private immutable UNI_HELPER;
</code></pre>
<h3 id="subnftaddress"><a class="header" href="#subnftaddress">subNFTAddress</a></h3>
<p>Address of the deployed subscription NFT contract</p>
<pre><code class="language-solidity">address public subNFTAddress;
</code></pre>
<h3 id="subnftcontract"><a class="header" href="#subnftcontract">subNFTContract</a></h3>
<p><em>Instance of the VabbleNFT contract used for subscription NFTs</em></p>
<pre><code class="language-solidity">VabbleNFT private subNFTContract;
</code></pre>
<h3 id="baseuri"><a class="header" href="#baseuri">baseUri</a></h3>
<p>Base URI for the subscription NFTs</p>
<pre><code class="language-solidity">string public baseUri;
</code></pre>
<h3 id="collectionuri"><a class="header" href="#collectionuri">collectionUri</a></h3>
<p>Collection URI for the subscription NFTs</p>
<pre><code class="language-solidity">string public collectionUri;
</code></pre>
<h3 id="mintinfo"><a class="header" href="#mintinfo">mintInfo</a></h3>
<p><em>Mapping of category IDs to minting information</em></p>
<p><em>Maps each category ID to its corresponding minting information</em></p>
<pre><code class="language-solidity">mapping(uint256 =&gt; Mint) private mintInfo;
</code></pre>
<h3 id="lockinfo"><a class="header" href="#lockinfo">lockInfo</a></h3>
<p><em>Mapping of token IDs to locking information</em></p>
<p><em>Maps each token ID to its corresponding locking information</em></p>
<pre><code class="language-solidity">mapping(uint256 =&gt; Lock) private lockInfo;
</code></pre>
<h3 id="subnfttokenlist"><a class="header" href="#subnfttokenlist">subNFTTokenList</a></h3>
<p>Mapping of user addresses to lists of minted token IDs</p>
<p><em>Maps each user address to a list of token IDs they have minted</em></p>
<pre><code class="language-solidity">mapping(address =&gt; uint256[]) public subNFTTokenList;
</code></pre>
<h3 id="categorylist"><a class="header" href="#categorylist">categoryList</a></h3>
<p>List of all category IDs with configured minting information</p>
<pre><code class="language-solidity">uint256[] public categoryList;
</code></pre>
<h2 id="functions"><a class="header" href="#functions">Functions</a></h2>
<h3 id="onlyauditor"><a class="header" href="#onlyauditor">onlyAuditor</a></h3>
<p><em>Restricts access to the current Auditor.</em></p>
<pre><code class="language-solidity">modifier onlyAuditor();
</code></pre>
<h3 id="constructor"><a class="header" href="#constructor">constructor</a></h3>
<p><em>Constructor to initialize the contract with addresses of the Ownablee and UniHelper contracts.</em></p>
<pre><code class="language-solidity">constructor(address _ownable, address _uniHelper);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_ownable</code></td><td><code>address</code></td><td>Address of the Ownablee contract.</td></tr>
<tr><td><code>_uniHelper</code></td><td><code>address</code></td><td>Address of the UniHelper contract.</td></tr>
</tbody></table>
</div>
<h3 id="receive"><a class="header" href="#receive">receive</a></h3>
<pre><code class="language-solidity">receive() external payable;
</code></pre>
<h3 id="setbaseuri"><a class="header" href="#setbaseuri">setBaseURI</a></h3>
<p>Set baseURI and collectionURI for the subscription NFTs.
Can only be called by the auditor.</p>
<pre><code class="language-solidity">function setBaseURI(string memory _baseUri, string memory _collectionUri) external onlyAuditor;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_baseUri</code></td><td><code>string</code></td><td>Base URI for the NFT metadata.</td></tr>
<tr><td><code>_collectionUri</code></td><td><code>string</code></td><td>Collection URI for the NFT metadata.</td></tr>
</tbody></table>
</div>
<h3 id="setmintinfo"><a class="header" href="#setmintinfo">setMintInfo</a></h3>
<p>Set minting information for a specific category of subscription NFTs.
Can only be called by the auditor.</p>
<pre><code class="language-solidity">function setMintInfo(
    uint256 _mintAmount,
    uint256 _mintPrice,
    uint256 _lockPeriod,
    uint256 _category
)
    external
    onlyAuditor;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_mintAmount</code></td><td><code>uint256</code></td><td>Maximum number of NFTs that can be minted in this category.</td></tr>
<tr><td><code>_mintPrice</code></td><td><code>uint256</code></td><td>Price in USDC to mint one NFT in this category.</td></tr>
<tr><td><code>_lockPeriod</code></td><td><code>uint256</code></td><td>Lock period in seconds after which the NFT can be unlocked.</td></tr>
<tr><td><code>_category</code></td><td><code>uint256</code></td><td>Category ID for which to set the minting information.</td></tr>
</tbody></table>
</div>
<h3 id="deploysubnftcontract"><a class="header" href="#deploysubnftcontract">deploySubNFTContract</a></h3>
<p>Deploy a new subscription NFT contract.
Can only be called by the auditor.</p>
<pre><code class="language-solidity">function deploySubNFTContract(string memory _name, string memory _symbol) external onlyAuditor nonReentrant;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_name</code></td><td><code>string</code></td><td>Name of the new NFT contract.</td></tr>
<tr><td><code>_symbol</code></td><td><code>string</code></td><td>Symbol of the new NFT contract.</td></tr>
</tbody></table>
</div>
<h3 id="minttobatch"><a class="header" href="#minttobatch">mintToBatch</a></h3>
<p>Mint multiple subscription NFTs to multiple addresses.</p>
<pre><code class="language-solidity">function mintToBatch(
    address _token,
    address[] calldata _toList,
    uint256[] calldata _periodList,
    uint256[] calldata _categoryList
)
    external
    payable
    nonReentrant;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_token</code></td><td><code>address</code></td><td>Address of the token used for payment.</td></tr>
<tr><td><code>_toList</code></td><td><code>address[]</code></td><td>Array of recipient addresses to receive the NFTs.</td></tr>
<tr><td><code>_periodList</code></td><td><code>uint256[]</code></td><td>Array of subscription periods for each NFT.</td></tr>
<tr><td><code>_categoryList</code></td><td><code>uint256[]</code></td><td>Array of category IDs for each NFT.</td></tr>
</tbody></table>
</div>
<h3 id="locknft"><a class="header" href="#locknft">lockNFT</a></h3>
<p>Lock a subscription NFT for the specified period.
Only the owner of the NFT can lock it.
Transfers the NFT from the owner to this contract.</p>
<pre><code class="language-solidity">function lockNFT(uint256 _tokenId) external nonReentrant;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_tokenId</code></td><td><code>uint256</code></td><td>ID of the subscription NFT to be locked.</td></tr>
</tbody></table>
</div>
<h3 id="unlocknft"><a class="header" href="#unlocknft">unlockNFT</a></h3>
<p>Unlock a subscription NFT and transfer it from this contract to the owner's wallet.</p>
<p><em>Requires that the caller is the minter of the NFT and that the lock period has expired.</em></p>
<pre><code class="language-solidity">function unlockNFT(uint256 _tokenId) external nonReentrant;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_tokenId</code></td><td><code>uint256</code></td><td>The ID of the subscription NFT to unlock</td></tr>
</tbody></table>
</div>
<h3 id="getlockinfo"><a class="header" href="#getlockinfo">getLockInfo</a></h3>
<p>Get lock information for a specific subscription NFT.</p>
<pre><code class="language-solidity">function getLockInfo(uint256 _tokenId)
    external
    view
    returns (uint256 subPeriod_, uint256 lockPeriod_, uint256 lockTime_, uint256 category_, address minter_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_tokenId</code></td><td><code>uint256</code></td><td>The ID of the subscription NFT to query</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>subPeriod_</code></td><td><code>uint256</code></td><td>The subscription period associated with the NFT</td></tr>
<tr><td><code>lockPeriod_</code></td><td><code>uint256</code></td><td>The lock period associated with the NFT</td></tr>
<tr><td><code>lockTime_</code></td><td><code>uint256</code></td><td>The timestamp when the NFT was locked</td></tr>
<tr><td><code>category_</code></td><td><code>uint256</code></td><td>The category of the NFT</td></tr>
<tr><td><code>minter_</code></td><td><code>address</code></td><td>The address of the minter of the NFT</td></tr>
</tbody></table>
</div>
<h3 id="getnftowner"><a class="header" href="#getnftowner">getNFTOwner</a></h3>
<p>Get the owner of a specific subscription NFT.</p>
<pre><code class="language-solidity">function getNFTOwner(uint256 _tokenId) external view returns (address owner_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_tokenId</code></td><td><code>uint256</code></td><td>The ID of the subscription NFT to query</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>owner_</code></td><td><code>address</code></td><td>The address of the current owner of the NFT</td></tr>
</tbody></table>
</div>
<h3 id="getusertokenidlist"><a class="header" href="#getusertokenidlist">getUserTokenIdList</a></h3>
<p>Get the list of token IDs minted by a specific user.</p>
<pre><code class="language-solidity">function getUserTokenIdList(address _owner) external view returns (uint256[] memory tokenIds_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_owner</code></td><td><code>address</code></td><td>The address of the user to query</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>tokenIds_</code></td><td><code>uint256[]</code></td><td>An array of token IDs minted by the user</td></tr>
</tbody></table>
</div>
<h3 id="gettokenuri"><a class="header" href="#gettokenuri">getTokenUri</a></h3>
<p>Get the URI of a specific subscription NFT.</p>
<pre><code class="language-solidity">function getTokenUri(uint256 _tokenId) external view returns (string memory tokeUri_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_tokenId</code></td><td><code>uint256</code></td><td>The ID of the subscription NFT to query</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>tokeUri_</code></td><td><code>string</code></td><td>The URI of the NFT's metadata</td></tr>
</tbody></table>
</div>
<h3 id="getmintinfo"><a class="header" href="#getmintinfo">getMintInfo</a></h3>
<p>Get mint information for a specific category.</p>
<pre><code class="language-solidity">function getMintInfo(uint256 _category)
    external
    view
    returns (uint256 mintAmount_, uint256 mintPrice_, uint256 lockPeriod_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_category</code></td><td><code>uint256</code></td><td>The category ID to query</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>mintAmount_</code></td><td><code>uint256</code></td><td>The maximum mint amount allowed for the category</td></tr>
<tr><td><code>mintPrice_</code></td><td><code>uint256</code></td><td>The mint price for the category</td></tr>
<tr><td><code>lockPeriod_</code></td><td><code>uint256</code></td><td>The lock period associated with the category</td></tr>
</tbody></table>
</div>
<h3 id="onerc721received"><a class="header" href="#onerc721received">onERC721Received</a></h3>
<p><em>Whenever an {IERC721} <code>tokenId</code> token is transferred to this contract via {IERC721-safeTransferFrom}
by <code>operator</code> from <code>from</code>, this function is called.
It must return its Solidity selector to confirm the token transfer.
If any other value is returned or the interface is not implemented by the recipient, the transfer will be
reverted.
The selector can be obtained in Solidity with <code>IERC721Receiver.onERC721Received.selector</code>.</em></p>
<pre><code class="language-solidity">function onERC721Received(address, address, uint256, bytes calldata) external pure override returns (bytes4);
</code></pre>
<h3 id="getexpectedtokenamount"><a class="header" href="#getexpectedtokenamount">getExpectedTokenAmount</a></h3>
<p>Get the expected amount of tokens needed for minting based on the provided payment token and amount.</p>
<pre><code class="language-solidity">function getExpectedTokenAmount(address _token, uint256 _usdcAmount) public view returns (uint256 amount_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_token</code></td><td><code>address</code></td><td>The address of the payment token</td></tr>
<tr><td><code>_usdcAmount</code></td><td><code>uint256</code></td><td>The amount in USDC equivalent to calculate against</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>amount_</code></td><td><code>uint256</code></td><td>The expected amount of tokens required for minting</td></tr>
</tbody></table>
</div>
<h3 id="gettotalsupply"><a class="header" href="#gettotalsupply">getTotalSupply</a></h3>
<p>Get the total supply of subscription NFTs.</p>
<pre><code class="language-solidity">function getTotalSupply() public view returns (uint256);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>The total supply of subscription NFTs</td></tr>
</tbody></table>
</div>
<h3 id="__mint"><a class="header" href="#__mint">__mint</a></h3>
<p><em>Function to mint subscription NFTs to a specified address.</em></p>
<p><em>Allows minting with optional lock period based on the category of NFT.</em></p>
<pre><code class="language-solidity">function __mint(address _token, address _to, uint256 _subPeriod, uint256 _category) private;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_token</code></td><td><code>address</code></td><td>The address of the payment token for minting</td></tr>
<tr><td><code>_to</code></td><td><code>address</code></td><td>The address to mint the subscription NFTs to</td></tr>
<tr><td><code>_subPeriod</code></td><td><code>uint256</code></td><td>The subscription period associated with the minted NFTs</td></tr>
<tr><td><code>_category</code></td><td><code>uint256</code></td><td>The category of the subscription NFTs to mint</td></tr>
</tbody></table>
</div>
<h3 id="__handlemintpay"><a class="header" href="#__handlemintpay">__handleMintPay</a></h3>
<p><em>Function to handle payment and minting process.</em></p>
<p><em>Handles payment in either ETH or ERC20 tokens, calculates expected amount,
swaps assets if necessary, and transfers USDC to the <code>Ownablee::VAB_WALLET</code>.</em></p>
<pre><code class="language-solidity">function __handleMintPay(address _payToken, uint256[] calldata _periodList, uint256[] calldata _categoryList) private;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_payToken</code></td><td><code>address</code></td><td>The address of the payment token</td></tr>
<tr><td><code>_periodList</code></td><td><code>uint256[]</code></td><td>An array of subscription periods for minting</td></tr>
<tr><td><code>_categoryList</code></td><td><code>uint256[]</code></td><td>An array of categories for minting</td></tr>
</tbody></table>
</div>
<h2 id="events"><a class="header" href="#events">Events</a></h2>
<h3 id="subscriptionerc721created"><a class="header" href="#subscriptionerc721created">SubscriptionERC721Created</a></h3>
<p>Emitted when a new subscription ERC721 NFT contract is deployed.</p>
<pre><code class="language-solidity">event SubscriptionERC721Created(address indexed nftCreator, address nftContract);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>nftCreator</code></td><td><code>address</code></td><td>The address of the creator of the ERC721 contract</td></tr>
<tr><td><code>nftContract</code></td><td><code>address</code></td><td>The address of the deployed ERC721 contract</td></tr>
</tbody></table>
</div>
<h3 id="subscriptionerc721minted"><a class="header" href="#subscriptionerc721minted">SubscriptionERC721Minted</a></h3>
<p>Emitted when a new subscription NFT is minted.</p>
<pre><code class="language-solidity">event SubscriptionERC721Minted(address receiver, uint256 subscriptionPeriod, uint256 indexed tokenId);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>receiver</code></td><td><code>address</code></td><td>The address that received the minted NFT</td></tr>
<tr><td><code>subscriptionPeriod</code></td><td><code>uint256</code></td><td>The subscription period associated with the minted NFT</td></tr>
<tr><td><code>tokenId</code></td><td><code>uint256</code></td><td>The ID of the minted NFT</td></tr>
</tbody></table>
</div>
<h3 id="subscriptionnftlocked"><a class="header" href="#subscriptionnftlocked">SubscriptionNFTLocked</a></h3>
<p>Emitted when a subscription NFT is locked.</p>
<pre><code class="language-solidity">event SubscriptionNFTLocked(uint256 indexed tokenId, uint256 lockPeriod, address owner);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>tokenId</code></td><td><code>uint256</code></td><td>The ID of the locked NFT</td></tr>
<tr><td><code>lockPeriod</code></td><td><code>uint256</code></td><td>The lock period associated with the NFT</td></tr>
<tr><td><code>owner</code></td><td><code>address</code></td><td>The current owner of the NFT</td></tr>
</tbody></table>
</div>
<h3 id="subscriptionnftunlocked"><a class="header" href="#subscriptionnftunlocked">SubscriptionNFTUnLocked</a></h3>
<p>Emitted when a subscription NFT is unlocked.</p>
<pre><code class="language-solidity">event SubscriptionNFTUnLocked(uint256 indexed tokenId, address owner);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>tokenId</code></td><td><code>uint256</code></td><td>The ID of the unlocked NFT</td></tr>
<tr><td><code>owner</code></td><td><code>address</code></td><td>The owner who unlocked the NFT</td></tr>
</tbody></table>
</div>
<h2 id="structs"><a class="header" href="#structs">Structs</a></h2>
<h3 id="mint"><a class="header" href="#mint">Mint</a></h3>
<p><em>Struct containing minting parameters for each category of subscription NFTs.</em></p>
<pre><code class="language-solidity">struct Mint {
    uint256 maxMintAmount;
    uint256 mintPrice;
    uint256 lockPeriod;
}
</code></pre>
<p><strong>Properties</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>maxMintAmount</code></td><td><code>uint256</code></td><td>Maximum number of NFTs that can be minted in this category.</td></tr>
<tr><td><code>mintPrice</code></td><td><code>uint256</code></td><td>Price in USDC (scaled by 1e6) to mint one NFT in this category.</td></tr>
<tr><td><code>lockPeriod</code></td><td><code>uint256</code></td><td>Lock period in seconds after which the NFT can be unlocked.</td></tr>
</tbody></table>
</div>
<h3 id="lock"><a class="header" href="#lock">Lock</a></h3>
<p><em>Struct containing locking parameters for each subscription NFT.</em></p>
<pre><code class="language-solidity">struct Lock {
    uint256 subscriptionPeriod;
    uint256 lockPeriod;
    uint256 lockTime;
    uint256 category;
    address minter;
}
</code></pre>
<p><strong>Properties</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>subscriptionPeriod</code></td><td><code>uint256</code></td><td>Subscription period associated with the NFT.</td></tr>
<tr><td><code>lockPeriod</code></td><td><code>uint256</code></td><td>Lock period in seconds for this NFT.</td></tr>
<tr><td><code>lockTime</code></td><td><code>uint256</code></td><td>Timestamp when the NFT was locked.</td></tr>
<tr><td><code>category</code></td><td><code>uint256</code></td><td>Category of the NFT.</td></tr>
<tr><td><code>minter</code></td><td><code>address</code></td><td>Address of the user who minted the NFT.</td></tr>
</tbody></table>
</div>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../../contracts/dao/FactoryFilmNFT.sol/contract.FactoryFilmNFT.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../../contracts/dao/FactoryTierNFT.sol/contract.FactoryTierNFT.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../../contracts/dao/FactoryFilmNFT.sol/contract.FactoryFilmNFT.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../../contracts/dao/FactoryTierNFT.sol/contract.FactoryTierNFT.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../../elasticlunr.min.js"></script>
        <script src="../../../mark.min.js"></script>
        <script src="../../../searcher.js"></script>

        <script src="../../../clipboard.min.js"></script>
        <script src="../../../highlight.js"></script>
        <script src="../../../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../../../solidity.min.js"></script>


    </div>
    </body>
</html>
