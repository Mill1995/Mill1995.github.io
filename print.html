<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title></title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="book.css">

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item "><a href="index.html">Home</a></li><li class="chapter-item affix "><li class="part-title">contracts</li><li class="chapter-item "><a href="contracts/dao/index.html">❱ dao</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="contracts/dao/FactoryFilmNFT.sol/contract.FactoryFilmNFT.html">FactoryFilmNFT</a></li><li class="chapter-item "><a href="contracts/dao/FactorySubNFT.sol/contract.FactorySubNFT.html">FactorySubNFT</a></li><li class="chapter-item "><a href="contracts/dao/FactoryTierNFT.sol/contract.FactoryTierNFT.html">FactoryTierNFT</a></li><li class="chapter-item "><a href="contracts/dao/Ownablee.sol/contract.Ownablee.html">Ownablee</a></li><li class="chapter-item "><a href="contracts/dao/Property.sol/contract.Property.html">Property</a></li><li class="chapter-item "><a href="contracts/dao/StakingPool.sol/contract.StakingPool.html">StakingPool</a></li><li class="chapter-item "><a href="contracts/dao/Subscription.sol/contract.Subscription.html">Subscription</a></li><li class="chapter-item "><a href="contracts/dao/UniHelper.sol/contract.UniHelper.html">UniHelper</a></li><li class="chapter-item "><a href="contracts/dao/VabbleDAO.sol/contract.VabbleDAO.html">VabbleDAO</a></li><li class="chapter-item "><a href="contracts/dao/VabbleFund.sol/contract.VabbleFund.html">VabbleFund</a></li><li class="chapter-item "><a href="contracts/dao/VabbleNFT.sol/contract.VabbleNFT.html">VabbleNFT</a></li><li class="chapter-item "><a href="contracts/dao/Vote.sol/contract.Vote.html">Vote</a></li></ol></li><li class="chapter-item "><a href="contracts/interfaces/index.html">❱ interfaces</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="contracts/interfaces/IFactoryFilmNFT.sol/interface.IFactoryFilmNFT.html">IFactoryFilmNFT</a></li><li class="chapter-item "><a href="contracts/interfaces/IOwnablee.sol/interface.IOwnablee.html">IOwnablee</a></li><li class="chapter-item "><a href="contracts/interfaces/IProperty.sol/interface.IProperty.html">IProperty</a></li><li class="chapter-item "><a href="contracts/interfaces/IStakingPool.sol/interface.IStakingPool.html">IStakingPool</a></li><li class="chapter-item "><a href="contracts/interfaces/IUniHelper.sol/interface.IUniHelper.html">IUniHelper</a></li><li class="chapter-item "><a href="contracts/interfaces/IUniswapV2Factory.sol/interface.IUniswapV2Factory.html">IUniswapV2Factory</a></li><li class="chapter-item "><a href="contracts/interfaces/IUniswapV2Router.sol/interface.IUniswapV2Router.html">IUniswapV2Router</a></li><li class="chapter-item "><a href="contracts/interfaces/IVabbleDAO.sol/interface.IVabbleDAO.html">IVabbleDAO</a></li><li class="chapter-item "><a href="contracts/interfaces/IVabbleFund.sol/interface.IVabbleFund.html">IVabbleFund</a></li><li class="chapter-item "><a href="contracts/interfaces/IVote.sol/interface.IVote.html">IVote</a></li></ol></li><li class="chapter-item "><a href="contracts/libraries/index.html">❱ libraries</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="contracts/libraries/Arrays.sol/library.Arrays.html">Arrays</a></li><li class="chapter-item "><a href="contracts/libraries/Helper.sol/library.Helper.html">Helper</a></li></ol></li><li class="chapter-item "><a href="contracts/mocks/index.html">❱ mocks</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="contracts/mocks/MockERC1155.sol/contract.MockERC1155.html">MockERC1155</a></li><li class="chapter-item "><a href="contracts/mocks/MockERC20.sol/contract.MockERC20.html">MockERC20</a></li><li class="chapter-item "><a href="contracts/mocks/MockERC721.sol/contract.MockERC721.html">MockERC721</a></li><li class="chapter-item "><a href="contracts/mocks/MockUSDC.sol/contract.MockUSDC.html">MockUSDC</a></li><li class="chapter-item "><a href="contracts/mocks/MockUSDT.sol/contract.MockUSDT.html">MockUSDT</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/Mill1995/VABDAO" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <div align="center">
<h1 align="center">
<img src="https://github.com/Vabble/assets/blob/main/logo/VAB_DAO_2024_256x256.png" width="100" />
<br>VABDAO</h1>
<h3 id="-unlocking-decentralized-media-possibilities"><a class="header" href="#-unlocking-decentralized-media-possibilities">◦ Unlocking decentralized media possibilities!</a></h3>
<h3 id="-developed-with-the-software-and-tools-below"><a class="header" href="#-developed-with-the-software-and-tools-below">◦ Developed with the software and tools below.</a></h3>
<p align="center">
<img src="https://img.shields.io/badge/JavaScript-F7DF1E.svg?style&logo=JavaScript&logoColor=black" alt="JavaScript" />
<img src="https://img.shields.io/badge/Prettier-F7B93E.svg?style&logo=Prettier&logoColor=black" alt="Prettier" />
<img src="https://img.shields.io/badge/Chai-A30701.svg?style&logo=Chai&logoColor=white" alt="Chai" />
<img src="https://img.shields.io/badge/JSON-000000.svg?style&logo=JSON&logoColor=white" alt="JSON" />
<img src="https://img.shields.io/badge/Markdown-000000.svg?style&logo=Markdown&logoColor=white" alt="Markdown" />
</p>
<img src="https://img.shields.io/github/license/Vabble/VabbleDAO?style&color=5D6D7E" alt="GitHub license" />
<img src="https://img.shields.io/github/last-commit/Vabble/VabbleDAO?style&color=5D6D7E" alt="git-last-commit" />
<img src="https://img.shields.io/github/commit-activity/m/Vabble/VabbleDAO?style&color=5D6D7E" alt="GitHub commit activity" />
<img src="https://img.shields.io/github/languages/top/Vabble/VabbleDAO?style&color=5D6D7E" alt="GitHub top language" />
</div>
<hr />
<h2 id="-table-of-contents"><a class="header" href="#-table-of-contents">📖 Table of Contents</a></h2>
<ul>
<li><a href="index.html#-table-of-contents">📖 Table of Contents</a></li>
<li><a href="index.html#-overview">📍 Overview</a></li>
<li><a href="index.html#-repository-structure">📂 Repository Structure</a></li>
<li><a href="index.html#%EF%B8%8F-modules">⚙️ Modules</a></li>
<li><a href="index.html#-getting-started">🚀 Getting Started</a>
<ul>
<li><a href="index.html#-installation">🔧 Installation</a></li>
<li><a href="index.html#-running-vabbledao">🤖 Running VabbleDAO</a></li>
<li><a href="index.html#-tests">🧪 Tests</a></li>
</ul>
</li>
<li><a href="index.html#-contributing">🤝 Contributing</a></li>
</ul>
<hr />
<h2 id="-overview"><a class="header" href="#-overview">📍 Overview</a></h2>
<p>The project is a decentralized application (dApp) that aims to facilitate film funding and distribution through blockchain technology. It provides a platform for studios to create and manage film-specific non-fungible tokens (NFTs) and subscription NFTs. Users can activate and manage subscriptions for renting films, and usera can deposit tokens into film funding pools. The project offers robust contract functionality, secure asset management, and integration with external APIs and decentralized exchanges. Overall, it aims to revolutionize the film industry by leveraging blockchain technology for transparent and efficient film funding and distribution.</p>
<hr />
<h2 id="-repository-structure"><a class="header" href="#-repository-structure">📂 Repository Structure</a></h2>
<pre><code class="language-sh">└── VabbleDAO/
    ├── .env.example
    ├── .gitignore
    ├── .prettierrc.js
    ├── contracts/
    │   ├── dao/
    │   ├── interfaces/
    │   ├── libraries/
    │   └── mocks/
    ├── data/
    │   ├── ERC20.json
    │   └── ERC721.json
    ├── deploy/
    │   ├── deploy_factory_film_nft.js
    │   ├── deploy_factory_sub_nft.js
    │   ├── deploy_factory_tier_nft.js
    │   ├── deploy_ownablee.js
    │   ├── deploy_property.js
    │   ├── deploy_staking_pool.js
    │   ├── deploy_subscription.js
    │   ├── deploy_uni_helper.js
    │   ├── deploy_vabble_dao.js
    │   ├── deploy_vabble_funding.js
    │   └── deploy_vote.js
    ├── deploy_address.txt
    ├── hardhat.config.js
    ├── LICENSE
    ├── package.json
    ├── README.md
    ├── scripts/
    │   ├── deploy_mock_vab.js
    │   └── utils.js
    └── test/
        ├── factoryFilmNFT.test.js
        ├── factorySubNFT.test.js
        ├── main.test.js
        ├── owner.test.js
        ├── research.js
        ├── stakingPool.test.js
        ├── subscription.test.js
        ├── vabbleDAO.test.js
        └── vote.test.js
</code></pre>
<hr />
<h2 id="-modules"><a class="header" href="#-modules">⚙️ Modules</a></h2>
<details closed><summary>Root</summary>
<div class="table-wrapper"><table><thead><tr><th>File</th><th>Summary</th></tr></thead><tbody>
<tr><td><a href="https://github.com/Vabble/VabbleDAO/blob/master/.prettierrc.js">.prettierrc.js</a></td><td>The code in the.prettierrc.js file sets up formatting rules for different file types. For *.sol files, it disables bracket spacing, sets the print width to 130 characters, indents with 4 spaces, uses spaces instead of tabs, enforces explicit types, and disables single quotes. For *.js files, it sets the print width to 120 characters, adds semicolons, removes trailing commas, and enforces the use of single quotes.</td></tr>
<tr><td><a href="https://github.com/Vabble/VabbleDAO/blob/master/deploy_address.txt">deploy_address.txt</a></td><td>Addresses of deployed contracts</td></tr>
<tr><td><a href="https://github.com/Vabble/VabbleDAO/blob/master/hardhat.config.js">hardhat.config.js</a></td><td>This code is a configuration file for the Hardhat development environment. It sets up various networks, deploys contracts, and provides gas reporting. It also integrates with external APIs for etherscan and coinmarketcap.</td></tr>
<tr><td><a href="https://github.com/Vabble/VabbleDAO/blob/master/contracts/dao/FactoryFilmNFT.sol">FactoryFilmNFT.sol</a></td><td>The FactoryFilmNFT contract allows studios to create and manage film-specific non-fungible tokens (NFTs). Studios can set minting information, deploy NFT contracts per film, and mint NFTs to specific addresses. The contract also handles token payments, fee distribution, and integrates with other contracts such as the VabbleDAO and StakingPool.</td></tr>
<tr><td><a href="https://github.com/Vabble/VabbleDAO/blob/master/contracts/dao/FactorySubNFT.sol">FactorySubNFT.sol</a></td><td>The FactorySubNFT contract is responsible for creating and managing subscription NFTs. It allows users to mint NFTs for a specific subscription period and locks them for a specified duration. It also handles the transfer of payment tokens and the deployment of the VabbleNFT contract. The contract includes various functions for minting, locking, and unlocking NFTs, as well as retrieving information about minting and locking details.</td></tr>
<tr><td><a href="https://github.com/Vabble/VabbleDAO/blob/master/contracts/dao/FactoryTierNFT.sol">FactoryTierNFT.sol</a></td><td>The FactoryTierNFT contract is responsible for creating and managing tiered NFTs for films. It allows film owners to set tier information based on the amount funded in their films. It also enables the deployment of tiered NFT contracts and the minting of tiered NFTs based on the funded amount. The contract includes functions to retrieve information about tiered NFTs and their owners.</td></tr>
<tr><td><a href="https://github.com/Vabble/VabbleDAO/blob/master/contracts/dao/Ownablee.sol">Ownablee.sol</a></td><td>The "Ownablee" contract is responsible for managing ownership and various functionalities related to depositing and withdrawing assets. It allows for setting up contracts, adding and removing deposit assets, changing the Vabble wallet address, and performing deposits and withdrawals of VAB tokens. It also includes modifiers to restrict access to certain functions.</td></tr>
<tr><td><a href="https://github.com/Vabble/VabbleDAO/blob/master/contracts/dao/Property.sol">Property.sol</a></td><td>The contract manages proposals related to film projects, including auditor replacements, DAO fund rewards, film board memberships, and property updates, ensuring participation and fee payment by stakeholders. It also allows the modification of member addresses and logs activities through events.</td></tr>
<tr><td><a href="https://github.com/Vabble/VabbleDAO/blob/master/contracts/dao/StakingPool.sol">StakingPool.sol</a></td><td>The "StakingPool" contract is a Solidity smart contract that manages staking, rewards, and film rental deposits. Users can stake tokens for rewards, withdraw rewards, and deposit tokens for film rentals. Auditors oversee pending withdrawals, and rewards are calculated based on stake duration, voting activity, and proposals during the staking period within a broader ecosystem.</td></tr>
<tr><td><a href="https://github.com/Vabble/VabbleDAO/blob/master/contracts/dao/Subscription.sol">Subscription.sol</a></td><td>The Subscription contract allows users to activate and manage their subscriptions for renting films. Users can pay with various tokens, and the contract handles the conversion and transfer of funds. It includes functionality for calculating expected subscription amounts, checking if subscriptions are active, and adding discount percentages. The contract is secure and prevents reentrancy attacks.</td></tr>
<tr><td><a href="https://github.com/Vabble/VabbleDAO/blob/master/contracts/dao/UniHelper.sol">UniHelper.sol</a></td><td>The UniHelper contract is a solidity smart contract that provides functionalities for interacting with Uniswap and Sushiswap decentralized exchanges. It allows users to swap tokens, calculate expected amounts, and handle asset transfers. The contract is designed to work with ERC20 tokens and ETH, and it integrates with Uniswap and Sushiswap routers and factories for decentralized exchange operations.</td></tr>
<tr><td><a href="https://github.com/Vabble/VabbleDAO/blob/master/contracts/dao/VabbleDAO.sol">VabbleDAO.sol</a></td><td>The VabbleDAO contract is a part of a decentralized film proposal and funding system on Ethereum. Users can create film proposals, which can be approved or rejected through voting. It handles the allocation of funds, studio pools, and final film distribution with an auditor overseeing the process.</td></tr>
<tr><td><a href="https://github.com/Vabble/VabbleDAO/blob/master/contracts/dao/VabbleFunding.sol">VabbleFunding.sol</a></td><td>The VabbleFunding contract is responsible for handling the funding process of films on the Vabble platform. It allows users to deposit tokens or native currency into a specific film's funding pool. After the funding period ends, the contract facilitates the distribution of funds to the film's owner and the reward pool. Users can also withdraw their funds if the funding target is not reached. The contract keeps track of the deposited assets per film and user, as well as the list of processed and withdrawn films.</td></tr>
<tr><td><a href="https://github.com/Vabble/VabbleDAO/blob/master/contracts/dao/VabbleNFT.sol">VabbleNFT.sol</a></td><td>The VabbleNFT contract is an ERC721 token contract that represents non-fungible tokens (NFTs) on the Vabble platform. It includes functionalities for minting NFTs, transferring NFTs, and retrieving token metadata. It also implements the ERC2981 standard for royalty fees. The contract supports enumeration of tokens and provides a collection URI for the entire token collection. The contract is integrated with the Vabble Factory contract, which controls the minting process.</td></tr>
<tr><td><a href="https://github.com/Vabble/VabbleDAO/blob/master/contracts/dao/Vote.sol">Vote.sol</a></td><td>This Solidity contract outlines a voting system on the Ethereum blockchain for various purposes, including voting for films, agents, film boards, reward addresses, and properties. It employs events, structures, and functions to enable voting, approvals, and updates, and utilizes modifiers to enforce permissions and conditions. The contract is initialized and interacts with various external contracts, ensuring only stakers can vote and applying conditions for voting eligibility, counting, and approval mechanisms.</td></tr>
<tr><td><a href="https://github.com/Vabble/VabbleDAO/blob/master/contracts/interfaces/IFactoryFilmNFT.sol">IFactoryFilmNFT.sol</a></td><td>This code defines an interface for a factory contract that creates film NFTs. It provides functions to retrieve information about minting parameters, film token IDs, and raised amounts for a specific film.</td></tr>
<tr><td><a href="https://github.com/Vabble/VabbleDAO/blob/master/contracts/interfaces/IOwnablee.sol">IOwnablee.sol</a></td><td>The "IOwnablee.sol" interface defines functions related to ownership and asset management. It includes functions to handle the replacement of an auditor, check if an asset can be deposited, retrieve the list of deposit assets, and get addresses for various tokens. It also includes functions to add funds to a studio pool and withdraw funds from an edge pool.</td></tr>
<tr><td><a href="https://github.com/Vabble/VabbleDAO/blob/master/contracts/interfaces/IProperty.sol">IProperty.sol</a></td><td>The "IProperty" interface defines the core functionalities and properties related to property voting and governance. It includes methods to retrieve and update various parameters, such as voting periods, fee amounts, reward rates, and whitelist management. It also provides functions to track and manage property and governance proposal times.</td></tr>
<tr><td><a href="https://github.com/Vabble/VabbleDAO/blob/master/contracts/interfaces/IStakingPool.sol">IStakingPool.sol</a></td><td>This code defines the interface for a staking pool contract. It includes functions to manage stake amounts, withdrawal times, vote counts, reward distribution, and VAB transfers.</td></tr>
<tr><td><a href="https://github.com/Vabble/VabbleDAO/blob/master/contracts/interfaces/IUniHelper.sol">IUniHelper.sol</a></td><td>The IUniHelper interface defines two core functionalities for a helper contract. It provides a method to calculate the expected amount when swapping assets and another method to actually perform the asset swap.</td></tr>
<tr><td><a href="https://github.com/Vabble/VabbleDAO/blob/master/contracts/interfaces/IUniswapV2Factory.sol">IUniswapV2Factory.sol</a></td><td>The code defines an interface for the Uniswap V2 Factory contract. It includes functions to get and create pairs of tokens, set fee addresses, and retrieve information about existing pairs.</td></tr>
<tr><td><a href="https://github.com/Vabble/VabbleDAO/blob/master/contracts/interfaces/IUniswapV2Router.sol">IUniswapV2Router.sol</a></td><td>The code provides an interface for interacting with the UniswapV2Router2 contract on the Uniswap decentralized exchange. It includes functions for adding and removing liquidity, swapping tokens for tokens or ETH, and getting token exchange rates.</td></tr>
<tr><td><a href="https://github.com/Vabble/VabbleDAO/blob/master/contracts/interfaces/IVabbleDAO.sol">IVabbleDAO.sol</a></td><td>IVabbleDAO is an interface that defines the core functionalities for managing film proposals and funding in the VabbleDAO system. It includes functions for retrieving film details, approving proposals by voting, enabling claimers, and interacting with the studio pool.</td></tr>
<tr><td><a href="https://github.com/Vabble/VabbleDAO/blob/master/contracts/interfaces/IVabbleFunding.sol">IVabbleFunding.sol</a></td><td>The IVabbleFunding interface provides functions to retrieve the raised funding amount for a specific film by token ID, as well as the fund amount per film for a specific customer.</td></tr>
<tr><td><a href="https://github.com/Vabble/VabbleDAO/blob/master/contracts/interfaces/IVote.sol">IVote.sol</a></td><td>The code defines an interface for the "Vote" contract, specifying a function to retrieve the last vote time for a given member.</td></tr>
<tr><td><a href="https://github.com/Vabble/VabbleDAO/blob/master/contracts/libraries/Helper.sol">Helper.sol</a></td><td>The Helper.sol library provides various safe transfer functions for different types of tokens (ERC20, ERC721, ERC1155). It also includes utility functions for token approval and checking if an address is a smart contract.</td></tr>
<tr><td><a href="https://github.com/Vabble/VabbleDAO/blob/master/contracts/mocks/MockERC1155.sol">MockERC1155.sol</a></td><td>The MockERC1155 contract extends the ERC1155 contract from the OpenZeppelin library. It sets a URI for each token and mints three different tokens with their corresponding names and quantities, which are "Kitty", "Dog", and "Dolphin".</td></tr>
<tr><td><a href="https://github.com/Vabble/VabbleDAO/blob/master/contracts/mocks/MockERC20.sol">MockERC20.sol</a></td><td>The code is a mock ERC20 token contract that inherits from the OpenZeppelin ERC20 implementation. It allows the token owner to mint tokens, sets a supply limit, and implements a faucet function to distribute tokens within a defined limit. The contract is also Ownable, granting exclusive access and control to the owner.</td></tr>
<tr><td><a href="https://github.com/Vabble/VabbleDAO/blob/master/contracts/mocks/MockERC721.sol">MockERC721.sol</a></td><td>The code is a mock ERC721 contract that inherits from the ERC721Enumerable and Ownable contracts. It allows the owner to mint tokens, either individually or in batches, with a unique tokenURI for each token.</td></tr>
<tr><td><a href="https://github.com/Vabble/VabbleDAO/blob/master/deploy/deploy_factory_film_nft.js">deploy_factory_film_nft.js</a></td><td>This code is used to deploy the FactoryFilmNFT contract with specified arguments. It retrieves the addresses of other deployed contracts (Ownablee and UniHelper) and initializes the FactoryFilmNFT contract with these addresses.</td></tr>
<tr><td><a href="https://github.com/Vabble/VabbleDAO/blob/master/deploy/deploy_factory_sub_nft.js">deploy_factory_sub_nft.js</a></td><td>This code is responsible for deploying the'FactorySubNFT' smart contract. It retrieves the addresses of other deployed contracts ('Ownablee' and'UniHelper') and uses them as arguments during deployment.</td></tr>
<tr><td><a href="https://github.com/Vabble/VabbleDAO/blob/master/deploy/deploy_factory_tier_nft.js">deploy_factory_tier_nft.js</a></td><td>This code deploys a contract called FactoryTierNFT, using the addresses of three other contracts (Ownablee, VabbleDAO, and VabbleFunding) as arguments. It ensures the deployment is logged and not skipped if already deployed.</td></tr>
<tr><td><a href="https://github.com/Vabble/VabbleDAO/blob/master/deploy/deploy_ownablee.js">deploy_ownablee.js</a></td><td>The code deploys the Ownablee contract with configurable parameters based on the network. The contract is deployed with the necessary arguments and logs the deployment.</td></tr>
<tr><td><a href="https://github.com/Vabble/VabbleDAO/blob/master/deploy/deploy_property.js">deploy_property.js</a></td><td>This code is responsible for deploying the "Property" contract. It retrieves the addresses of the required contracts, sets the deployment arguments, and deploys the contract using the deploy function.</td></tr>
<tr><td><a href="https://github.com/Vabble/VabbleDAO/blob/master/deploy/deploy_staking_pool.js">deploy_staking_pool.js</a></td><td>The code deploys a StakingPool contract using the Ownablee contract's address as an argument. It also has some commented out code for initializing the deployed contract with other contract addresses.</td></tr>
<tr><td><a href="https://github.com/Vabble/VabbleDAO/blob/master/deploy/deploy_subscription.js">deploy_subscription.js</a></td><td>This code is responsible for deploying the Subscription contract on the blockchain. It fetches the necessary contract addresses and deploys the Subscription contract with the required arguments. The code ensures logs are generated and allows for redeployment if needed.</td></tr>
<tr><td><a href="https://github.com/Vabble/VabbleDAO/blob/master/deploy/deploy_uni_helper.js">deploy_uni_helper.js</a></td><td>This code is responsible for deploying the "UniHelper" contract. It determines the contract deployment based on the network (Mumbai, Ethereum, or Polygon) and sets the necessary factory and router addresses. It then deploys the contract with the specified arguments and options.</td></tr>
<tr><td><a href="https://github.com/Vabble/VabbleDAO/blob/master/deploy/deploy_vabble_dao.js">deploy_vabble_dao.js</a></td><td>The code deploys the VabbleDAO contract by fetching the addresses of several other contracts (Ownablee, UniHelper, Vote, StakingPool, Property, FactoryFilmNFT) and passing them as arguments. It also handles deployment logging and dependency management.</td></tr>
<tr><td><a href="https://github.com/Vabble/VabbleDAO/blob/master/deploy/deploy_vabble_funding.js">deploy_vabble_funding.js</a></td><td>The code deploys the VabbleFunding contract by fetching the addresses of other deployed contracts from the development network. The VabbleFunding contract requires the addresses of six contracts as arguments: Ownablee, UniHelper, StakingPool, Property, FilmNFTFactory, and VabbleDAO.</td></tr>
<tr><td><a href="https://github.com/Vabble/VabbleDAO/blob/master/deploy/deploy_vote.js">deploy_vote.js</a></td><td>The code is a deployment script for the "Vote" contract. It retrieves the address of the "Ownablee" contract, and then deploys the "Vote" contract with that address as an argument. The script allows for logging and ensures the contract is not already deployed.</td></tr>
<tr><td><a href="https://github.com/Vabble/VabbleDAO/blob/master/scripts/deploy_mock_vab.js">deploy_mock_vab.js</a></td><td>This code deploys a mock ERC20 token contract called'MockERC20' with the name'Vabble' and symbol'VAB'. It skips deployment if already deployed and logs deployment details.</td></tr>
<tr><td><a href="https://github.com/Vabble/VabbleDAO/blob/master/scripts/utils.js">utils.js</a></td><td>The code in utils.js provides various utility functions and constants for the project. It includes addresses and configurations for different networks, token types, statuses, and discounts. It also provides functions for generating random addresses and numbers, converting numbers to BigIntegers, and getting signatures. Additionally, it includes data for films, NFTs, and proposals, along with functions for encoding and decoding the data.</td></tr>
<tr><td><a href="https://github.com/Vabble/VabbleDAO/blob/master/test/factoryFilmNFT.test.js">factoryFilmNFT.test.js</a></td><td>This test is for the FactoryFilmNFT contract. It involves setting up various smart contracts and entities including tokens, DAO, staking pools, voting, and NFTs for films and tiers. The test checks if these contracts are deployed correctly, if the functions related to voting, staking, and NFT minting work as expected, and ensures only authorized users can call specific functions, all while handling different types of tokens (e.g., VAB, EXM, USDC).</td></tr>
<tr><td><a href="https://github.com/Vabble/VabbleDAO/blob/master/test/factorySubNFT.test.js">factorySubNFT.test.js</a></td><td>This test sets up smart contract instances and tokens, and tests the deployment, minting, and interactions with the FactorySubscriptionNFT contract, ensuring functions like minting NFTs and permissions are working as expected. Only auditors can deploy and mint tokens.</td></tr>
<tr><td><a href="https://github.com/Vabble/VabbleDAO/blob/master/test/main.test.js">main.test.js</a></td><td>The code consists of multiple test files for various functionalities, including testing the owner, vote, vabbleDAO, stakingPool, factoryFilmNFT, factorySubNFT, subscription, and research.</td></tr>
<tr><td><a href="https://github.com/Vabble/VabbleDAO/blob/master/test/owner.test.js">owner.test.js</a></td><td>The code in the file "owner.test.js" sets up and tests the core functionalities of the Ownablee contract. It initializes several other contracts and performs tests related to transferring ownership and adding/removing deposit assets.</td></tr>
<tr><td><a href="https://github.com/Vabble/VabbleDAO/blob/master/test/research.js">research.js</a></td><td>The code is a test script for the VabbleDAO functionality. It sets up various contract factories and deploy contracts, transfers tokens, initializes a staking pool, and proposes films by studios. It also includes assertions to verify the expected behavior.</td></tr>
<tr><td><a href="https://github.com/Vabble/VabbleDAO/blob/master/test/stakingPool.test.js">stakingPool.test.js</a></td><td>The test script is for Ethereum smart contracts, involving the initialization, staking, and unstaking of VAB tokens. It prepares multiple user roles, contracts, and tokens, simulating a staking pool in a voting context, and ensures correct behavior and constraints like lock periods and reward calculations are adhered to.</td></tr>
<tr><td><a href="https://github.com/Vabble/VabbleDAO/blob/master/test/subscription.test.js">subscription.test.js</a></td><td>The test script is for a subscription service on a blockchain, specifically Ethereum. It sets up various contracts and users, then tests the subscription activation process, checking for different periods and types of tokens (including VAB, USDC, and EXM). Time manipulation is used to test subscription expiration.</td></tr>
<tr><td><a href="https://github.com/Vabble/VabbleDAO/blob/master/test/vabbleDAO.test.js">vabbleDAO.test.js</a></td><td>The test tests the Vab DAO, focusing on deploying contracts, managing film proposals, voting, and token allocations. It validates contract interactions, token balances, and ensures the DAO operates as expected, especially concerning film proposals and voting.</td></tr>
<tr><td><a href="https://github.com/Vabble/VabbleDAO/blob/master/test/vote.test.js">vote.test.js</a></td><td>The test tests the deployment of multiple contract factories and the proposal and voting process for changing property values, like film vote periods and reward rates. It includes initializing and testing the functionality of staking pools and voting contracts, handling token transfers, staking, proposing new property values, voting on them, and updating the properties after the vote.</td></tr>
</tbody></table>
</div></details>
<hr />
<h2 id="-getting-started"><a class="header" href="#-getting-started">🚀 Getting Started</a></h2>
<h3 id="-installation"><a class="header" href="#-installation">🔧 Installation</a></h3>
<ol>
<li>Clone the VabbleDAO repository:</li>
</ol>
<pre><code class="language-sh">git clone https://github.com/Vabble/VabbleDAO
</code></pre>
<ol start="2">
<li>Change to the project directory:</li>
</ol>
<pre><code class="language-sh">cd VabbleDAO
</code></pre>
<ol start="3">
<li>Install the dependencies:</li>
</ol>
<pre><code class="language-sh">►  npm install
</code></pre>
<ol start="4">
<li>Copy the .env.examples into a new file and set the variables:</li>
</ol>
<pre><code class="language-sh">►  cp .env.example .env
</code></pre>
<h3 id="-running-vabbledao"><a class="header" href="#-running-vabbledao">🤖 Running VabbleDAO</a></h3>
<pre><code class="language-sh">► npm mumbai:deploy
</code></pre>
<h3 id="-tests"><a class="header" href="#-tests">🧪 Tests</a></h3>
<pre><code class="language-sh">► npm run test
</code></pre>
<hr />
<h2 id="-contributing"><a class="header" href="#-contributing">🤝 Contributing</a></h2>
<p>Contributions are always welcome! Please follow these steps:</p>
<ol>
<li>Fork the project repository. This creates a copy of the project on your account that you can modify without affecting the original project.</li>
<li>Clone the forked repository to your local machine using a Git client like Git or GitHub Desktop.</li>
<li>Create a new branch with a descriptive name (e.g., <code>new-feature-branch</code> or <code>bugfix-issue-123</code>).</li>
</ol>
<pre><code class="language-sh">git checkout -b new-feature-branch
</code></pre>
<ol start="4">
<li>Make changes to the project's codebase.</li>
<li>Commit your changes to your local branch with a clear commit message that explains the changes you've made.</li>
</ol>
<pre><code class="language-sh">git commit -m 'Implemented new feature.'
</code></pre>
<ol start="6">
<li>Push your changes to your forked repository on GitHub using the following command</li>
</ol>
<pre><code class="language-sh">git push origin new-feature-branch
</code></pre>
<ol start="7">
<li>Create a new pull request to the original project repository. In the pull request, describe the changes you've made and why they're necessary.
The project maintainers will review your changes and provide feedback or merge them into the main branch.</li>
</ol>
<hr />
<p><a href="index.html#Top">↑ Return</a></p>
<hr />
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents"><a class="header" href="#contents">Contents</a></h1>
<ul>
<li><a href="contracts/dao/FactoryFilmNFT.sol/contract.FactoryFilmNFT.html">FactoryFilmNFT</a></li>
<li><a href="contracts/dao/FactorySubNFT.sol/contract.FactorySubNFT.html">FactorySubNFT</a></li>
<li><a href="contracts/dao/FactoryTierNFT.sol/contract.FactoryTierNFT.html">FactoryTierNFT</a></li>
<li><a href="contracts/dao/Ownablee.sol/contract.Ownablee.html">Ownablee</a></li>
<li><a href="contracts/dao/Property.sol/contract.Property.html">Property</a></li>
<li><a href="contracts/dao/StakingPool.sol/contract.StakingPool.html">StakingPool</a></li>
<li><a href="contracts/dao/Subscription.sol/contract.Subscription.html">Subscription</a></li>
<li><a href="contracts/dao/UniHelper.sol/contract.UniHelper.html">UniHelper</a></li>
<li><a href="contracts/dao/VabbleDAO.sol/contract.VabbleDAO.html">VabbleDAO</a></li>
<li><a href="contracts/dao/VabbleFund.sol/contract.VabbleFund.html">VabbleFund</a></li>
<li><a href="contracts/dao/VabbleNFT.sol/contract.VabbleNFT.html">VabbleNFT</a></li>
<li><a href="contracts/dao/Vote.sol/contract.Vote.html">Vote</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="factoryfilmnft"><a class="header" href="#factoryfilmnft">FactoryFilmNFT</a></h1>
<p><a href="https://github.com/Mill1995/VABDAO/blob/4914bdc306cbdb860037485ce4bcebbfdd390c9f/contracts/dao/FactoryFilmNFT.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="contracts/dao/FactoryFilmNFT.sol//contracts/interfaces/IFactoryFilmNFT.sol/interface.IFactoryFilmNFT.html">IFactoryFilmNFT</a>, ReentrancyGuard</p>
<p>This contract manages the creation and management of film-specific NFTs.
It allows studios to deploy NFT contracts for their films, set minting parameters,
and manage ownership of the NFT contracts. Users can claim allocated NFTs once
funding for a film is fully raised. The contract integrates with VabbleDAO and
VabbleFund contracts to validate ownership, funding status, and other parameters.</p>
<h2 id="state-variables"><a class="header" href="#state-variables">State Variables</a></h2>
<h3 id="ownable"><a class="header" href="#ownable">OWNABLE</a></h3>
<p><em>Address of the Ownablee contract</em></p>
<pre><code class="language-solidity">address private immutable OWNABLE;
</code></pre>
<h3 id="vabble_dao"><a class="header" href="#vabble_dao">VABBLE_DAO</a></h3>
<p><em>Address of the VabbleDAO contract</em></p>
<pre><code class="language-solidity">address private VABBLE_DAO;
</code></pre>
<h3 id="vabble_fund"><a class="header" href="#vabble_fund">VABBLE_FUND</a></h3>
<p><em>Address of the VabbleFund contract</em></p>
<pre><code class="language-solidity">address private VABBLE_FUND;
</code></pre>
<h3 id="baseuri"><a class="header" href="#baseuri">baseUri</a></h3>
<p>Base URI for the metadata of all NFTs created by this contract.</p>
<pre><code class="language-solidity">string public baseUri;
</code></pre>
<h3 id="collectionuri"><a class="header" href="#collectionuri">collectionUri</a></h3>
<p>Collection URI for the metadata of all NFTs created by this contract.</p>
<pre><code class="language-solidity">string public collectionUri;
</code></pre>
<h3 id="nftinfo"><a class="header" href="#nftinfo">nftInfo</a></h3>
<p>Mapping to store information about each deployed NFT contract.</p>
<pre><code class="language-solidity">mapping(address =&gt; FilmNFT) public nftInfo;
</code></pre>
<h3 id="studionftaddresslist"><a class="header" href="#studionftaddresslist">studioNFTAddressList</a></h3>
<p>Mapping to store a list of NFT contract addresses deployed by each studio.</p>
<pre><code class="language-solidity">mapping(address =&gt; address[]) public studioNFTAddressList;
</code></pre>
<h3 id="filmnftcontract"><a class="header" href="#filmnftcontract">filmNFTContract</a></h3>
<p>Mapping to store deployed VabbleNFT contracts for each film ID.</p>
<pre><code class="language-solidity">mapping(uint256 =&gt; VabbleNFT) public filmNFTContract;
</code></pre>
<h3 id="filmnfttokenlist"><a class="header" href="#filmnfttokenlist">filmNFTTokenList</a></h3>
<p><em>Mapping to store a list of token IDs minted for each film ID.</em></p>
<pre><code class="language-solidity">mapping(uint256 =&gt; uint256[]) private filmNFTTokenList;
</code></pre>
<h3 id="mintinfo"><a class="header" href="#mintinfo">mintInfo</a></h3>
<p><em>Mapping to store minting information for each film ID.</em></p>
<pre><code class="language-solidity">mapping(uint256 =&gt; Mint) private mintInfo;
</code></pre>
<h2 id="functions"><a class="header" href="#functions">Functions</a></h2>
<h3 id="onlyauditor"><a class="header" href="#onlyauditor">onlyAuditor</a></h3>
<p><em>Restricts access to the current Auditor.</em></p>
<pre><code class="language-solidity">modifier onlyAuditor();
</code></pre>
<h3 id="onlydeployer"><a class="header" href="#onlydeployer">onlyDeployer</a></h3>
<p><em>Restricts access to the deployer of the ownable contract.</em></p>
<pre><code class="language-solidity">modifier onlyDeployer();
</code></pre>
<h3 id="constructor"><a class="header" href="#constructor">constructor</a></h3>
<p><em>Constructor to initialize the FactoryFilmNFT contract.</em></p>
<pre><code class="language-solidity">constructor(address _ownable);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_ownable</code></td><td><code>address</code></td><td>Address of the Ownablee contract.</td></tr>
</tbody></table>
</div>
<h3 id="initialize"><a class="header" href="#initialize">initialize</a></h3>
<p>Initialize the addresses of VabbleDAO and VabbleFund contracts.</p>
<p><em>Only callable by the deployer of the Ownablee contract.</em></p>
<pre><code class="language-solidity">function initialize(address _vabbleDAO, address _vabbleFund) external onlyDeployer;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_vabbleDAO</code></td><td><code>address</code></td><td>Address of the VabbleDAO contract.</td></tr>
<tr><td><code>_vabbleFund</code></td><td><code>address</code></td><td>Address of the VabbleFund contract.</td></tr>
</tbody></table>
</div>
<h3 id="setbaseuri"><a class="header" href="#setbaseuri">setBaseURI</a></h3>
<p>Set baseURI and collectionURI for all NFTs created by this contract.</p>
<p><em>Only callable by the Auditor.</em></p>
<pre><code class="language-solidity">function setBaseURI(string memory _baseUri, string memory _collectionUri) external onlyAuditor;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_baseUri</code></td><td><code>string</code></td><td>Base URI for all NFTs.</td></tr>
<tr><td><code>_collectionUri</code></td><td><code>string</code></td><td>Collection URI for all NFTs.</td></tr>
</tbody></table>
</div>
<h3 id="setmintinfo"><a class="header" href="#setmintinfo">setMintInfo</a></h3>
<p>Set minting information for a film.</p>
<p><em>Only callable by the owner of the film.</em></p>
<pre><code class="language-solidity">function setMintInfo(uint256 _filmId, uint256 _tier, uint256 _amount, uint256 _price) external nonReentrant;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_filmId</code></td><td><code>uint256</code></td><td>ID of the film.</td></tr>
<tr><td><code>_tier</code></td><td><code>uint256</code></td><td>Tier of the minting configuration.</td></tr>
<tr><td><code>_amount</code></td><td><code>uint256</code></td><td>Maximum number of NFTs that can be minted.</td></tr>
<tr><td><code>_price</code></td><td><code>uint256</code></td><td>Price in USDC to mint one NFT.</td></tr>
</tbody></table>
</div>
<h3 id="deployfilmnftcontract"><a class="header" href="#deployfilmnftcontract">deployFilmNFTContract</a></h3>
<p>Studio deploys an NFT contract for a specific film.</p>
<p><em>Only callable by the owner of the film and when the film is approved for NFT funding.</em></p>
<pre><code class="language-solidity">function deployFilmNFTContract(uint256 _filmId, string memory _name, string memory _symbol) external nonReentrant;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_filmId</code></td><td><code>uint256</code></td><td>ID of the film.</td></tr>
<tr><td><code>_name</code></td><td><code>string</code></td><td>Name of the NFT contract.</td></tr>
<tr><td><code>_symbol</code></td><td><code>string</code></td><td>Symbol of the NFT contract.</td></tr>
</tbody></table>
</div>
<h3 id="claimnft"><a class="header" href="#claimnft">claimNft</a></h3>
<p>Claim NFTs allocated for the caller for a specific film.</p>
<p><em>Only callable when NFTs are deployed for the film, caller has allocated NFTs, and funding is fully raised.</em></p>
<pre><code class="language-solidity">function claimNft(uint256 _filmId) external nonReentrant;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_filmId</code></td><td><code>uint256</code></td><td>ID of the film.</td></tr>
</tbody></table>
</div>
<h3 id="changeowner"><a class="header" href="#changeowner">changeOwner</a></h3>
<p>Change the owner of a film's ERC721 contract.</p>
<p><em>Only callable by the current owner of the film's ERC721 contract.</em></p>
<pre><code class="language-solidity">function changeOwner(uint256 _filmId, address newOwner) external nonReentrant returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_filmId</code></td><td><code>uint256</code></td><td>ID of the film.</td></tr>
<tr><td><code>newOwner</code></td><td><code>address</code></td><td>Address of the new owner.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>success Boolean indicating whether the owner change was successful.</td></tr>
</tbody></table>
</div>
<h3 id="getmintinfo"><a class="header" href="#getmintinfo">getMintInfo</a></h3>
<p>Get minting information for a specific film.</p>
<pre><code class="language-solidity">function getMintInfo(uint256 _filmId)
    external
    view
    override
    returns (uint256 tier_, uint256 maxMintAmount_, uint256 mintPrice_, address nft_, address studio_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_filmId</code></td><td><code>uint256</code></td><td>ID of the film.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>tier_</code></td><td><code>uint256</code></td><td>Tier of the minting configuration.</td></tr>
<tr><td><code>maxMintAmount_</code></td><td><code>uint256</code></td><td>Maximum number of NFTs that can be minted.</td></tr>
<tr><td><code>mintPrice_</code></td><td><code>uint256</code></td><td>Price in USDC to mint one NFT.</td></tr>
<tr><td><code>nft_</code></td><td><code>address</code></td><td>Address of the deployed NFT contract.</td></tr>
<tr><td><code>studio_</code></td><td><code>address</code></td><td>Address of the studio that owns the film's NFT.</td></tr>
</tbody></table>
</div>
<h3 id="getnftowner"><a class="header" href="#getnftowner">getNFTOwner</a></h3>
<p>Get the owner of a specific NFT token.</p>
<pre><code class="language-solidity">function getNFTOwner(uint256 _filmId, uint256 _tokenId) external view returns (address);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_filmId</code></td><td><code>uint256</code></td><td>ID of the film.</td></tr>
<tr><td><code>_tokenId</code></td><td><code>uint256</code></td><td>ID of the NFT token.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td>Address of the owner of the NFT token.</td></tr>
</tbody></table>
</div>
<h3 id="gettokenuri"><a class="header" href="#gettokenuri">getTokenUri</a></h3>
<p>Get the URI of a specific NFT token.</p>
<pre><code class="language-solidity">function getTokenUri(uint256 _filmId, uint256 _tokenId) external view returns (string memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_filmId</code></td><td><code>uint256</code></td><td>ID of the film.</td></tr>
<tr><td><code>_tokenId</code></td><td><code>uint256</code></td><td>ID of the NFT token.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>string</code></td><td>URI of the NFT token.</td></tr>
</tbody></table>
</div>
<h3 id="getfilmnfttokenlist"><a class="header" href="#getfilmnfttokenlist">getFilmNFTTokenList</a></h3>
<p>Get the list of token IDs minted for a specific film.</p>
<pre><code class="language-solidity">function getFilmNFTTokenList(uint256 _filmId) external view returns (uint256[] memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_filmId</code></td><td><code>uint256</code></td><td>ID of the film.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256[]</code></td><td>Array of token IDs.</td></tr>
</tbody></table>
</div>
<h3 id="gettotalsupply"><a class="header" href="#gettotalsupply">getTotalSupply</a></h3>
<p>Get the total supply of NFTs minted for a specific film.</p>
<pre><code class="language-solidity">function getTotalSupply(uint256 _filmId) public view override returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_filmId</code></td><td><code>uint256</code></td><td>ID of the film.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>Total number of NFTs minted.</td></tr>
</tbody></table>
</div>
<h3 id="getusertokenidlist"><a class="header" href="#getusertokenidlist">getUserTokenIdList</a></h3>
<p>Get the list of token IDs owned by a specific user for a film.</p>
<pre><code class="language-solidity">function getUserTokenIdList(uint256 _filmId, address _owner) public view returns (uint256[] memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_filmId</code></td><td><code>uint256</code></td><td>ID of the film.</td></tr>
<tr><td><code>_owner</code></td><td><code>address</code></td><td>Address of the owner.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256[]</code></td><td>Array of token IDs owned by the owner.</td></tr>
</tbody></table>
</div>
<h3 id="getvabbledao"><a class="header" href="#getvabbledao">getVabbleDAO</a></h3>
<p>Get the address of the VabbleDAO contract.</p>
<pre><code class="language-solidity">function getVabbleDAO() public view returns (address dao_);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>dao_</code></td><td><code>address</code></td><td>Address of the VabbleDAO contract.</td></tr>
</tbody></table>
</div>
<h3 id="__mint"><a class="header" href="#__mint">__mint</a></h3>
<p><em>Mint a new NFT for the caller and update internal records.</em></p>
<p><em>This function is called internally to mint an NFT for the given film ID.</em></p>
<pre><code class="language-solidity">function __mint(uint256 _filmId) private;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_filmId</code></td><td><code>uint256</code></td><td>ID of the film for which the NFT is being minted.</td></tr>
</tbody></table>
</div>
<h2 id="events"><a class="header" href="#events">Events</a></h2>
<h3 id="filmerc721created"><a class="header" href="#filmerc721created">FilmERC721Created</a></h3>
<p><em>Emitted when a new film-specific ERC721 contract is created.</em></p>
<pre><code class="language-solidity">event FilmERC721Created(address nftCreator, address nftContract, uint256 indexed filmId);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>nftCreator</code></td><td><code>address</code></td><td>Address of the studio creating the NFT contract.</td></tr>
<tr><td><code>nftContract</code></td><td><code>address</code></td><td>Address of the newly created NFT contract.</td></tr>
<tr><td><code>filmId</code></td><td><code>uint256</code></td><td>ID of the film associated with the NFT contract.</td></tr>
</tbody></table>
</div>
<h3 id="filmerc721minted"><a class="header" href="#filmerc721minted">FilmERC721Minted</a></h3>
<p><em>Emitted when a film-specific ERC721 token is minted.</em></p>
<pre><code class="language-solidity">event FilmERC721Minted(address nftContract, uint256 indexed filmId, uint256 indexed tokenId, address receiver);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>nftContract</code></td><td><code>address</code></td><td>Address of the NFT contract.</td></tr>
<tr><td><code>filmId</code></td><td><code>uint256</code></td><td>ID of the film associated with the NFT.</td></tr>
<tr><td><code>tokenId</code></td><td><code>uint256</code></td><td>ID of the minted token.</td></tr>
<tr><td><code>receiver</code></td><td><code>address</code></td><td>Address of the receiver of the minted token.</td></tr>
</tbody></table>
</div>
<h3 id="mintinfosetted"><a class="header" href="#mintinfosetted">MintInfoSetted</a></h3>
<p><em>Emitted when minting information is set for a film.</em></p>
<pre><code class="language-solidity">event MintInfoSetted(address filmOwner, uint256 indexed filmId, uint256 tier, uint256 mintAmount, uint256 mintPrice);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>filmOwner</code></td><td><code>address</code></td><td>Address of the studio setting the minting information.</td></tr>
<tr><td><code>filmId</code></td><td><code>uint256</code></td><td>ID of the film associated with the minting information.</td></tr>
<tr><td><code>tier</code></td><td><code>uint256</code></td><td>Tier of the minting configuration.</td></tr>
<tr><td><code>mintAmount</code></td><td><code>uint256</code></td><td>Maximum number of NFTs that can be minted.</td></tr>
<tr><td><code>mintPrice</code></td><td><code>uint256</code></td><td>Price in USDC to mint one NFT.</td></tr>
</tbody></table>
</div>
<h3 id="changeerc721filmowner"><a class="header" href="#changeerc721filmowner">ChangeERC721FilmOwner</a></h3>
<p><em>Emitted when the ownership of a film's ERC721 contract changes.</em></p>
<pre><code class="language-solidity">event ChangeERC721FilmOwner(uint256 indexed filmId, address indexed oldOwner, address indexed newOwner);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>filmId</code></td><td><code>uint256</code></td><td>ID of the film associated with the ERC721 contract.</td></tr>
<tr><td><code>oldOwner</code></td><td><code>address</code></td><td>Address of the previous owner of the ERC721 contract.</td></tr>
<tr><td><code>newOwner</code></td><td><code>address</code></td><td>Address of the new owner of the ERC721 contract.</td></tr>
</tbody></table>
</div>
<h2 id="structs"><a class="header" href="#structs">Structs</a></h2>
<h3 id="mint"><a class="header" href="#mint">Mint</a></h3>
<p><em>Struct containing minting parameters for each film.</em></p>
<pre><code class="language-solidity">struct Mint {
    uint256 tier;
    uint256 maxMintAmount;
    uint256 price;
    address nft;
    address studio;
}
</code></pre>
<p><strong>Properties</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>tier</code></td><td><code>uint256</code></td><td>Tier of the minting configuration (e.g., 1, 2, 3).</td></tr>
<tr><td><code>maxMintAmount</code></td><td><code>uint256</code></td><td>Maximum number of NFTs that can be minted for this film.</td></tr>
<tr><td><code>price</code></td><td><code>uint256</code></td><td>Price in USDC (scaled by 1e6) to mint one NFT for this film.</td></tr>
<tr><td><code>nft</code></td><td><code>address</code></td><td>Address of the deployed NFT contract for this film.</td></tr>
<tr><td><code>studio</code></td><td><code>address</code></td><td>Address of the studio that owns this film's NFT.</td></tr>
</tbody></table>
</div>
<h3 id="filmnft"><a class="header" href="#filmnft">FilmNFT</a></h3>
<p><em>Struct containing basic information about a film's NFT.</em></p>
<pre><code class="language-solidity">struct FilmNFT {
    string name;
    string symbol;
}
</code></pre>
<p><strong>Properties</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>name</code></td><td><code>string</code></td><td>Name of the NFT associated with the film.</td></tr>
<tr><td><code>symbol</code></td><td><code>string</code></td><td>Symbol of the NFT associated with the film.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="factorysubnft"><a class="header" href="#factorysubnft">FactorySubNFT</a></h1>
<p><a href="https://github.com/Mill1995/VABDAO/blob/4914bdc306cbdb860037485ce4bcebbfdd390c9f/contracts/dao/FactorySubNFT.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
IERC721Receiver, ReentrancyGuard</p>
<p><em>A factory contract for managing subscription NFTs.
Users can mint subscription NFTs, lock and unlock them based on predefined
categories and parameters. Payment can be made in either ETH or allowed ERC20 tokens.
This contract interfaces with Ownablee and UniHelper contracts for configuration
and asset management.</em></p>
<h2 id="state-variables-1"><a class="header" href="#state-variables-1">State Variables</a></h2>
<h3 id="ownable-1"><a class="header" href="#ownable-1">OWNABLE</a></h3>
<p><em>Address of the Ownable contract</em></p>
<pre><code class="language-solidity">address private immutable OWNABLE;
</code></pre>
<h3 id="uni_helper"><a class="header" href="#uni_helper">UNI_HELPER</a></h3>
<p><em>Address of the UniHelper contract</em></p>
<pre><code class="language-solidity">address private immutable UNI_HELPER;
</code></pre>
<h3 id="subnftaddress"><a class="header" href="#subnftaddress">subNFTAddress</a></h3>
<p>Address of the deployed subscription NFT contract</p>
<pre><code class="language-solidity">address public subNFTAddress;
</code></pre>
<h3 id="subnftcontract"><a class="header" href="#subnftcontract">subNFTContract</a></h3>
<p><em>Instance of the VabbleNFT contract used for subscription NFTs</em></p>
<pre><code class="language-solidity">VabbleNFT private subNFTContract;
</code></pre>
<h3 id="baseuri-1"><a class="header" href="#baseuri-1">baseUri</a></h3>
<p>Base URI for the subscription NFTs</p>
<pre><code class="language-solidity">string public baseUri;
</code></pre>
<h3 id="collectionuri-1"><a class="header" href="#collectionuri-1">collectionUri</a></h3>
<p>Collection URI for the subscription NFTs</p>
<pre><code class="language-solidity">string public collectionUri;
</code></pre>
<h3 id="mintinfo-1"><a class="header" href="#mintinfo-1">mintInfo</a></h3>
<p><em>Mapping of category IDs to minting information</em></p>
<p><em>Maps each category ID to its corresponding minting information</em></p>
<pre><code class="language-solidity">mapping(uint256 =&gt; Mint) private mintInfo;
</code></pre>
<h3 id="lockinfo"><a class="header" href="#lockinfo">lockInfo</a></h3>
<p><em>Mapping of token IDs to locking information</em></p>
<p><em>Maps each token ID to its corresponding locking information</em></p>
<pre><code class="language-solidity">mapping(uint256 =&gt; Lock) private lockInfo;
</code></pre>
<h3 id="subnfttokenlist"><a class="header" href="#subnfttokenlist">subNFTTokenList</a></h3>
<p>Mapping of user addresses to lists of minted token IDs</p>
<p><em>Maps each user address to a list of token IDs they have minted</em></p>
<pre><code class="language-solidity">mapping(address =&gt; uint256[]) public subNFTTokenList;
</code></pre>
<h3 id="categorylist"><a class="header" href="#categorylist">categoryList</a></h3>
<p>List of all category IDs with configured minting information</p>
<pre><code class="language-solidity">uint256[] public categoryList;
</code></pre>
<h2 id="functions-1"><a class="header" href="#functions-1">Functions</a></h2>
<h3 id="onlyauditor-1"><a class="header" href="#onlyauditor-1">onlyAuditor</a></h3>
<p><em>Restricts access to the current Auditor.</em></p>
<pre><code class="language-solidity">modifier onlyAuditor();
</code></pre>
<h3 id="constructor-1"><a class="header" href="#constructor-1">constructor</a></h3>
<p><em>Constructor to initialize the contract with addresses of the Ownablee and UniHelper contracts.</em></p>
<pre><code class="language-solidity">constructor(address _ownable, address _uniHelper);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_ownable</code></td><td><code>address</code></td><td>Address of the Ownablee contract.</td></tr>
<tr><td><code>_uniHelper</code></td><td><code>address</code></td><td>Address of the UniHelper contract.</td></tr>
</tbody></table>
</div>
<h3 id="receive"><a class="header" href="#receive">receive</a></h3>
<pre><code class="language-solidity">receive() external payable;
</code></pre>
<h3 id="setbaseuri-1"><a class="header" href="#setbaseuri-1">setBaseURI</a></h3>
<p>Set baseURI and collectionURI for the subscription NFTs.
Can only be called by the auditor.</p>
<pre><code class="language-solidity">function setBaseURI(string memory _baseUri, string memory _collectionUri) external onlyAuditor;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_baseUri</code></td><td><code>string</code></td><td>Base URI for the NFT metadata.</td></tr>
<tr><td><code>_collectionUri</code></td><td><code>string</code></td><td>Collection URI for the NFT metadata.</td></tr>
</tbody></table>
</div>
<h3 id="setmintinfo-1"><a class="header" href="#setmintinfo-1">setMintInfo</a></h3>
<p>Set minting information for a specific category of subscription NFTs.
Can only be called by the auditor.</p>
<pre><code class="language-solidity">function setMintInfo(
    uint256 _mintAmount,
    uint256 _mintPrice,
    uint256 _lockPeriod,
    uint256 _category
)
    external
    onlyAuditor;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_mintAmount</code></td><td><code>uint256</code></td><td>Maximum number of NFTs that can be minted in this category.</td></tr>
<tr><td><code>_mintPrice</code></td><td><code>uint256</code></td><td>Price in USDC to mint one NFT in this category.</td></tr>
<tr><td><code>_lockPeriod</code></td><td><code>uint256</code></td><td>Lock period in seconds after which the NFT can be unlocked.</td></tr>
<tr><td><code>_category</code></td><td><code>uint256</code></td><td>Category ID for which to set the minting information.</td></tr>
</tbody></table>
</div>
<h3 id="deploysubnftcontract"><a class="header" href="#deploysubnftcontract">deploySubNFTContract</a></h3>
<p>Deploy a new subscription NFT contract.
Can only be called by the auditor.</p>
<pre><code class="language-solidity">function deploySubNFTContract(string memory _name, string memory _symbol) external onlyAuditor nonReentrant;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_name</code></td><td><code>string</code></td><td>Name of the new NFT contract.</td></tr>
<tr><td><code>_symbol</code></td><td><code>string</code></td><td>Symbol of the new NFT contract.</td></tr>
</tbody></table>
</div>
<h3 id="minttobatch"><a class="header" href="#minttobatch">mintToBatch</a></h3>
<p>Mint multiple subscription NFTs to multiple addresses.</p>
<pre><code class="language-solidity">function mintToBatch(
    address _token,
    address[] calldata _toList,
    uint256[] calldata _periodList,
    uint256[] calldata _categoryList
)
    external
    payable
    nonReentrant;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_token</code></td><td><code>address</code></td><td>Address of the token used for payment.</td></tr>
<tr><td><code>_toList</code></td><td><code>address[]</code></td><td>Array of recipient addresses to receive the NFTs.</td></tr>
<tr><td><code>_periodList</code></td><td><code>uint256[]</code></td><td>Array of subscription periods for each NFT.</td></tr>
<tr><td><code>_categoryList</code></td><td><code>uint256[]</code></td><td>Array of category IDs for each NFT.</td></tr>
</tbody></table>
</div>
<h3 id="locknft"><a class="header" href="#locknft">lockNFT</a></h3>
<p>Lock a subscription NFT for the specified period.
Only the owner of the NFT can lock it.
Transfers the NFT from the owner to this contract.</p>
<pre><code class="language-solidity">function lockNFT(uint256 _tokenId) external nonReentrant;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_tokenId</code></td><td><code>uint256</code></td><td>ID of the subscription NFT to be locked.</td></tr>
</tbody></table>
</div>
<h3 id="unlocknft"><a class="header" href="#unlocknft">unlockNFT</a></h3>
<p>Unlock a subscription NFT and transfer it from this contract to the owner's wallet.</p>
<p><em>Requires that the caller is the minter of the NFT and that the lock period has expired.</em></p>
<pre><code class="language-solidity">function unlockNFT(uint256 _tokenId) external nonReentrant;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_tokenId</code></td><td><code>uint256</code></td><td>The ID of the subscription NFT to unlock</td></tr>
</tbody></table>
</div>
<h3 id="getlockinfo"><a class="header" href="#getlockinfo">getLockInfo</a></h3>
<p>Get lock information for a specific subscription NFT.</p>
<pre><code class="language-solidity">function getLockInfo(uint256 _tokenId)
    external
    view
    returns (uint256 subPeriod_, uint256 lockPeriod_, uint256 lockTime_, uint256 category_, address minter_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_tokenId</code></td><td><code>uint256</code></td><td>The ID of the subscription NFT to query</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>subPeriod_</code></td><td><code>uint256</code></td><td>The subscription period associated with the NFT</td></tr>
<tr><td><code>lockPeriod_</code></td><td><code>uint256</code></td><td>The lock period associated with the NFT</td></tr>
<tr><td><code>lockTime_</code></td><td><code>uint256</code></td><td>The timestamp when the NFT was locked</td></tr>
<tr><td><code>category_</code></td><td><code>uint256</code></td><td>The category of the NFT</td></tr>
<tr><td><code>minter_</code></td><td><code>address</code></td><td>The address of the minter of the NFT</td></tr>
</tbody></table>
</div>
<h3 id="getnftowner-1"><a class="header" href="#getnftowner-1">getNFTOwner</a></h3>
<p>Get the owner of a specific subscription NFT.</p>
<pre><code class="language-solidity">function getNFTOwner(uint256 _tokenId) external view returns (address owner_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_tokenId</code></td><td><code>uint256</code></td><td>The ID of the subscription NFT to query</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>owner_</code></td><td><code>address</code></td><td>The address of the current owner of the NFT</td></tr>
</tbody></table>
</div>
<h3 id="getusertokenidlist-1"><a class="header" href="#getusertokenidlist-1">getUserTokenIdList</a></h3>
<p>Get the list of token IDs minted by a specific user.</p>
<pre><code class="language-solidity">function getUserTokenIdList(address _owner) external view returns (uint256[] memory tokenIds_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_owner</code></td><td><code>address</code></td><td>The address of the user to query</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>tokenIds_</code></td><td><code>uint256[]</code></td><td>An array of token IDs minted by the user</td></tr>
</tbody></table>
</div>
<h3 id="gettokenuri-1"><a class="header" href="#gettokenuri-1">getTokenUri</a></h3>
<p>Get the URI of a specific subscription NFT.</p>
<pre><code class="language-solidity">function getTokenUri(uint256 _tokenId) external view returns (string memory tokeUri_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_tokenId</code></td><td><code>uint256</code></td><td>The ID of the subscription NFT to query</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>tokeUri_</code></td><td><code>string</code></td><td>The URI of the NFT's metadata</td></tr>
</tbody></table>
</div>
<h3 id="getmintinfo-1"><a class="header" href="#getmintinfo-1">getMintInfo</a></h3>
<p>Get mint information for a specific category.</p>
<pre><code class="language-solidity">function getMintInfo(uint256 _category)
    external
    view
    returns (uint256 mintAmount_, uint256 mintPrice_, uint256 lockPeriod_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_category</code></td><td><code>uint256</code></td><td>The category ID to query</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>mintAmount_</code></td><td><code>uint256</code></td><td>The maximum mint amount allowed for the category</td></tr>
<tr><td><code>mintPrice_</code></td><td><code>uint256</code></td><td>The mint price for the category</td></tr>
<tr><td><code>lockPeriod_</code></td><td><code>uint256</code></td><td>The lock period associated with the category</td></tr>
</tbody></table>
</div>
<h3 id="onerc721received"><a class="header" href="#onerc721received">onERC721Received</a></h3>
<p><em>Whenever an {IERC721} <code>tokenId</code> token is transferred to this contract via {IERC721-safeTransferFrom}
by <code>operator</code> from <code>from</code>, this function is called.
It must return its Solidity selector to confirm the token transfer.
If any other value is returned or the interface is not implemented by the recipient, the transfer will be
reverted.
The selector can be obtained in Solidity with <code>IERC721Receiver.onERC721Received.selector</code>.</em></p>
<pre><code class="language-solidity">function onERC721Received(address, address, uint256, bytes calldata) external pure override returns (bytes4);
</code></pre>
<h3 id="getexpectedtokenamount"><a class="header" href="#getexpectedtokenamount">getExpectedTokenAmount</a></h3>
<p>Get the expected amount of tokens needed for minting based on the provided payment token and amount.</p>
<pre><code class="language-solidity">function getExpectedTokenAmount(address _token, uint256 _usdcAmount) public view returns (uint256 amount_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_token</code></td><td><code>address</code></td><td>The address of the payment token</td></tr>
<tr><td><code>_usdcAmount</code></td><td><code>uint256</code></td><td>The amount in USDC equivalent to calculate against</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>amount_</code></td><td><code>uint256</code></td><td>The expected amount of tokens required for minting</td></tr>
</tbody></table>
</div>
<h3 id="gettotalsupply-1"><a class="header" href="#gettotalsupply-1">getTotalSupply</a></h3>
<p>Get the total supply of subscription NFTs.</p>
<pre><code class="language-solidity">function getTotalSupply() public view returns (uint256);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>The total supply of subscription NFTs</td></tr>
</tbody></table>
</div>
<h3 id="__mint-1"><a class="header" href="#__mint-1">__mint</a></h3>
<p><em>Function to mint subscription NFTs to a specified address.</em></p>
<p><em>Allows minting with optional lock period based on the category of NFT.</em></p>
<pre><code class="language-solidity">function __mint(address _token, address _to, uint256 _subPeriod, uint256 _category) private;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_token</code></td><td><code>address</code></td><td>The address of the payment token for minting</td></tr>
<tr><td><code>_to</code></td><td><code>address</code></td><td>The address to mint the subscription NFTs to</td></tr>
<tr><td><code>_subPeriod</code></td><td><code>uint256</code></td><td>The subscription period associated with the minted NFTs</td></tr>
<tr><td><code>_category</code></td><td><code>uint256</code></td><td>The category of the subscription NFTs to mint</td></tr>
</tbody></table>
</div>
<h3 id="__handlemintpay"><a class="header" href="#__handlemintpay">__handleMintPay</a></h3>
<p><em>Function to handle payment and minting process.</em></p>
<p><em>Handles payment in either ETH or ERC20 tokens, calculates expected amount,
swaps assets if necessary, and transfers USDC to the <code>Ownablee::VAB_WALLET</code>.</em></p>
<pre><code class="language-solidity">function __handleMintPay(address _payToken, uint256[] calldata _periodList, uint256[] calldata _categoryList) private;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_payToken</code></td><td><code>address</code></td><td>The address of the payment token</td></tr>
<tr><td><code>_periodList</code></td><td><code>uint256[]</code></td><td>An array of subscription periods for minting</td></tr>
<tr><td><code>_categoryList</code></td><td><code>uint256[]</code></td><td>An array of categories for minting</td></tr>
</tbody></table>
</div>
<h2 id="events-1"><a class="header" href="#events-1">Events</a></h2>
<h3 id="subscriptionerc721created"><a class="header" href="#subscriptionerc721created">SubscriptionERC721Created</a></h3>
<p>Emitted when a new subscription ERC721 NFT contract is deployed.</p>
<pre><code class="language-solidity">event SubscriptionERC721Created(address indexed nftCreator, address nftContract);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>nftCreator</code></td><td><code>address</code></td><td>The address of the creator of the ERC721 contract</td></tr>
<tr><td><code>nftContract</code></td><td><code>address</code></td><td>The address of the deployed ERC721 contract</td></tr>
</tbody></table>
</div>
<h3 id="subscriptionerc721minted"><a class="header" href="#subscriptionerc721minted">SubscriptionERC721Minted</a></h3>
<p>Emitted when a new subscription NFT is minted.</p>
<pre><code class="language-solidity">event SubscriptionERC721Minted(address receiver, uint256 subscriptionPeriod, uint256 indexed tokenId);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>receiver</code></td><td><code>address</code></td><td>The address that received the minted NFT</td></tr>
<tr><td><code>subscriptionPeriod</code></td><td><code>uint256</code></td><td>The subscription period associated with the minted NFT</td></tr>
<tr><td><code>tokenId</code></td><td><code>uint256</code></td><td>The ID of the minted NFT</td></tr>
</tbody></table>
</div>
<h3 id="subscriptionnftlocked"><a class="header" href="#subscriptionnftlocked">SubscriptionNFTLocked</a></h3>
<p>Emitted when a subscription NFT is locked.</p>
<pre><code class="language-solidity">event SubscriptionNFTLocked(uint256 indexed tokenId, uint256 lockPeriod, address owner);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>tokenId</code></td><td><code>uint256</code></td><td>The ID of the locked NFT</td></tr>
<tr><td><code>lockPeriod</code></td><td><code>uint256</code></td><td>The lock period associated with the NFT</td></tr>
<tr><td><code>owner</code></td><td><code>address</code></td><td>The current owner of the NFT</td></tr>
</tbody></table>
</div>
<h3 id="subscriptionnftunlocked"><a class="header" href="#subscriptionnftunlocked">SubscriptionNFTUnLocked</a></h3>
<p>Emitted when a subscription NFT is unlocked.</p>
<pre><code class="language-solidity">event SubscriptionNFTUnLocked(uint256 indexed tokenId, address owner);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>tokenId</code></td><td><code>uint256</code></td><td>The ID of the unlocked NFT</td></tr>
<tr><td><code>owner</code></td><td><code>address</code></td><td>The owner who unlocked the NFT</td></tr>
</tbody></table>
</div>
<h2 id="structs-1"><a class="header" href="#structs-1">Structs</a></h2>
<h3 id="mint-1"><a class="header" href="#mint-1">Mint</a></h3>
<p><em>Struct containing minting parameters for each category of subscription NFTs.</em></p>
<pre><code class="language-solidity">struct Mint {
    uint256 maxMintAmount;
    uint256 mintPrice;
    uint256 lockPeriod;
}
</code></pre>
<p><strong>Properties</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>maxMintAmount</code></td><td><code>uint256</code></td><td>Maximum number of NFTs that can be minted in this category.</td></tr>
<tr><td><code>mintPrice</code></td><td><code>uint256</code></td><td>Price in USDC (scaled by 1e6) to mint one NFT in this category.</td></tr>
<tr><td><code>lockPeriod</code></td><td><code>uint256</code></td><td>Lock period in seconds after which the NFT can be unlocked.</td></tr>
</tbody></table>
</div>
<h3 id="lock"><a class="header" href="#lock">Lock</a></h3>
<p><em>Struct containing locking parameters for each subscription NFT.</em></p>
<pre><code class="language-solidity">struct Lock {
    uint256 subscriptionPeriod;
    uint256 lockPeriod;
    uint256 lockTime;
    uint256 category;
    address minter;
}
</code></pre>
<p><strong>Properties</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>subscriptionPeriod</code></td><td><code>uint256</code></td><td>Subscription period associated with the NFT.</td></tr>
<tr><td><code>lockPeriod</code></td><td><code>uint256</code></td><td>Lock period in seconds for this NFT.</td></tr>
<tr><td><code>lockTime</code></td><td><code>uint256</code></td><td>Timestamp when the NFT was locked.</td></tr>
<tr><td><code>category</code></td><td><code>uint256</code></td><td>Category of the NFT.</td></tr>
<tr><td><code>minter</code></td><td><code>address</code></td><td>Address of the user who minted the NFT.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="factorytiernft"><a class="header" href="#factorytiernft">FactoryTierNFT</a></h1>
<p><a href="https://github.com/Mill1995/VABDAO/blob/4914bdc306cbdb860037485ce4bcebbfdd390c9f/contracts/dao/FactoryTierNFT.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
ReentrancyGuard</p>
<p>This contract manages the deployment and minting of tier-specific NFTs
for films. It interacts with VabbleDAO for film ownership and fund management,
VabbleFund for investment tracking, and deploys VabbleNFT contracts for each tier.</p>
<h2 id="state-variables-2"><a class="header" href="#state-variables-2">State Variables</a></h2>
<h3 id="ownable-2"><a class="header" href="#ownable-2">OWNABLE</a></h3>
<p><em>Address of the Ownablee contract.</em></p>
<pre><code class="language-solidity">address private immutable OWNABLE;
</code></pre>
<h3 id="vabble_dao-1"><a class="header" href="#vabble_dao-1">VABBLE_DAO</a></h3>
<p><em>Address of the VabbleDAO contract.</em></p>
<pre><code class="language-solidity">address private immutable VABBLE_DAO;
</code></pre>
<h3 id="vabble_fund-1"><a class="header" href="#vabble_fund-1">VABBLE_FUND</a></h3>
<p><em>Address of the VabbleFund contract.</em></p>
<pre><code class="language-solidity">address private immutable VABBLE_FUND;
</code></pre>
<h3 id="baseuri-2"><a class="header" href="#baseuri-2">baseUri</a></h3>
<p>Base URI for the metadata of all NFTs created by this contract.</p>
<pre><code class="language-solidity">string public baseUri;
</code></pre>
<h3 id="collectionuri-2"><a class="header" href="#collectionuri-2">collectionUri</a></h3>
<p>Collection URI for the metadata of all NFTs created by this contract.</p>
<pre><code class="language-solidity">string public collectionUri;
</code></pre>
<h3 id="nftinfo-1"><a class="header" href="#nftinfo-1">nftInfo</a></h3>
<p>Mapping to store information about each deployed tiered NFT contract.</p>
<pre><code class="language-solidity">mapping(address =&gt; TierNFT) public nftInfo;
</code></pre>
<h3 id="tiercount"><a class="header" href="#tiercount">tierCount</a></h3>
<p>Mapping to store the number of tiers defined for each film.</p>
<pre><code class="language-solidity">mapping(uint256 =&gt; uint256) public tierCount;
</code></pre>
<h3 id="tierinfo"><a class="header" href="#tierinfo">tierInfo</a></h3>
<p>Mapping to store investment tiers for each film ID.</p>
<pre><code class="language-solidity">mapping(uint256 =&gt; mapping(uint256 =&gt; Tier)) public tierInfo;
</code></pre>
<h3 id="tiernftcontract"><a class="header" href="#tiernftcontract">tierNFTContract</a></h3>
<p>Mapping to store deployed VabbleNFT contracts for each film's tier.
(filmId =&gt; (tier number =&gt; nftcontract))</p>
<pre><code class="language-solidity">mapping(uint256 =&gt; mapping(uint256 =&gt; VabbleNFT)) public tierNFTContract;
</code></pre>
<h3 id="tiernfttokenlist"><a class="header" href="#tiernfttokenlist">tierNFTTokenList</a></h3>
<p>Mapping to store a list of token IDs minted for each film's tier.</p>
<pre><code class="language-solidity">mapping(uint256 =&gt; mapping(uint256 =&gt; uint256[])) public tierNFTTokenList;
</code></pre>
<h3 id="usertiernfts"><a class="header" href="#usertiernfts">userTierNFTs</a></h3>
<p>Mapping to store a list of tiered NFT contract addresses deployed by each studio.</p>
<pre><code class="language-solidity">mapping(address =&gt; address[]) private userTierNFTs;
</code></pre>
<h2 id="functions-2"><a class="header" href="#functions-2">Functions</a></h2>
<h3 id="onlyauditor-2"><a class="header" href="#onlyauditor-2">onlyAuditor</a></h3>
<p><em>Restricts access to the current Auditor.</em></p>
<pre><code class="language-solidity">modifier onlyAuditor();
</code></pre>
<h3 id="constructor-2"><a class="header" href="#constructor-2">constructor</a></h3>
<p><em>Constructor to initialize the FactoryTierNFT contract.</em></p>
<pre><code class="language-solidity">constructor(address _ownable, address _vabbleDAO, address _vabbleFund);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_ownable</code></td><td><code>address</code></td><td>Address of the Ownablee contract.</td></tr>
<tr><td><code>_vabbleDAO</code></td><td><code>address</code></td><td>Address of the VabbleDAO contract.</td></tr>
<tr><td><code>_vabbleFund</code></td><td><code>address</code></td><td>Address of the VabbleFund contract.</td></tr>
</tbody></table>
</div>
<h3 id="setbaseuri-2"><a class="header" href="#setbaseuri-2">setBaseURI</a></h3>
<p>Set baseURI and collectionURI for all NFTs created by this contract.</p>
<p><em>Only callable by the Auditor.</em></p>
<pre><code class="language-solidity">function setBaseURI(string memory _baseUri, string memory _collectionUri) external onlyAuditor;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_baseUri</code></td><td><code>string</code></td><td>Base URI for all NFTs.</td></tr>
<tr><td><code>_collectionUri</code></td><td><code>string</code></td><td>Collection URI for all NFTs.</td></tr>
</tbody></table>
</div>
<h3 id="settierinfo"><a class="header" href="#settierinfo">setTierInfo</a></h3>
<p>Set tier information for a film NFT.</p>
<p><em>Only callable by the owner of the film.</em></p>
<pre><code class="language-solidity">function setTierInfo(
    uint256 _filmId,
    uint256[] calldata _minAmounts,
    uint256[] calldata _maxAmounts
)
    external
    nonReentrant;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_filmId</code></td><td><code>uint256</code></td><td>ID of the film.</td></tr>
<tr><td><code>_minAmounts</code></td><td><code>uint256[]</code></td><td>Array of minimum investment amounts for each tier.</td></tr>
<tr><td><code>_maxAmounts</code></td><td><code>uint256[]</code></td><td>Array of maximum investment amounts for each tier.</td></tr>
</tbody></table>
</div>
<h3 id="deploytiernftcontract"><a class="header" href="#deploytiernftcontract">deployTierNFTContract</a></h3>
<p>Studio deploys a tier-specific NFT contract for a specific film.</p>
<p><em>Only callable by the owner of the film and when investment tiers are set.</em></p>
<pre><code class="language-solidity">function deployTierNFTContract(
    uint256 _filmId,
    uint256 _tier,
    string memory _name,
    string memory _symbol
)
    external
    nonReentrant;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_filmId</code></td><td><code>uint256</code></td><td>ID of the film.</td></tr>
<tr><td><code>_tier</code></td><td><code>uint256</code></td><td>Tier number associated with the NFT contract.</td></tr>
<tr><td><code>_name</code></td><td><code>string</code></td><td>Name of the NFT contract.</td></tr>
<tr><td><code>_symbol</code></td><td><code>string</code></td><td>Symbol of the NFT contract.</td></tr>
</tbody></table>
</div>
<h3 id="minttiernft"><a class="header" href="#minttiernft">mintTierNft</a></h3>
<p>Mints a tier-specific NFT for the caller if conditions are met.</p>
<p><em>Should be called before the fundProcess() of VabbleDAO contract.</em></p>
<pre><code class="language-solidity">function mintTierNft(uint256 _filmId) external nonReentrant;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_filmId</code></td><td><code>uint256</code></td><td>ID of the film for which the tier-specific NFT is minted.</td></tr>
</tbody></table>
</div>
<h3 id="getusertiernfts"><a class="header" href="#getusertiernfts">getUserTierNFTs</a></h3>
<p>Retrieves the list of tier-specific NFT contracts owned by a user.</p>
<pre><code class="language-solidity">function getUserTierNFTs(address _user) external view returns (address[] memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_user</code></td><td><code>address</code></td><td>Address of the user.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address[]</code></td><td>An array of addresses representing the tier-specific NFT contracts owned by the user.</td></tr>
</tbody></table>
</div>
<h3 id="getnftowner-2"><a class="header" href="#getnftowner-2">getNFTOwner</a></h3>
<p>Retrieves the owner of a specific tier-specific NFT token.</p>
<pre><code class="language-solidity">function getNFTOwner(uint256 _filmId, uint256 _tokenId, uint256 _tier) external view returns (address);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_filmId</code></td><td><code>uint256</code></td><td>ID of the film associated with the NFT.</td></tr>
<tr><td><code>_tokenId</code></td><td><code>uint256</code></td><td>ID of the NFT token.</td></tr>
<tr><td><code>_tier</code></td><td><code>uint256</code></td><td>Tier number associated with the NFT.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td>Address of the owner of the NFT token.</td></tr>
</tbody></table>
</div>
<h3 id="gettokenuri-2"><a class="header" href="#gettokenuri-2">getTokenUri</a></h3>
<p>Retrieves the URI of metadata associated with a specific tier-specific NFT token.</p>
<pre><code class="language-solidity">function getTokenUri(uint256 _filmId, uint256 _tokenId, uint256 _tier) external view returns (string memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_filmId</code></td><td><code>uint256</code></td><td>ID of the film associated with the NFT.</td></tr>
<tr><td><code>_tokenId</code></td><td><code>uint256</code></td><td>ID of the NFT token.</td></tr>
<tr><td><code>_tier</code></td><td><code>uint256</code></td><td>Tier number associated with the NFT.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>string</code></td><td>URI string pointing to the metadata of the NFT token.</td></tr>
</tbody></table>
</div>
<h3 id="gettiertokenidlist"><a class="header" href="#gettiertokenidlist">getTierTokenIdList</a></h3>
<p>Retrieves the list of token IDs minted for a specific tier of a film.</p>
<pre><code class="language-solidity">function getTierTokenIdList(uint256 _filmId, uint256 _tier) external view returns (uint256[] memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_filmId</code></td><td><code>uint256</code></td><td>ID of the film.</td></tr>
<tr><td><code>_tier</code></td><td><code>uint256</code></td><td>Tier number associated with the NFT.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256[]</code></td><td>An array of token IDs minted for the specified tier.</td></tr>
</tbody></table>
</div>
<h3 id="gettotalsupply-2"><a class="header" href="#gettotalsupply-2">getTotalSupply</a></h3>
<p>Retrieves the total supply of tier-specific NFTs minted for a film.</p>
<pre><code class="language-solidity">function getTotalSupply(uint256 _filmId, uint256 _tier) public view returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_filmId</code></td><td><code>uint256</code></td><td>ID of the film.</td></tr>
<tr><td><code>_tier</code></td><td><code>uint256</code></td><td>Tier number associated with the NFT.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>Total number of tier-specific NFTs minted for the specified tier of the film.</td></tr>
</tbody></table>
</div>
<h3 id="getusertokenidlist-2"><a class="header" href="#getusertokenidlist-2">getUserTokenIdList</a></h3>
<p>Retrieves the list of token IDs owned by a user for a specific tier of a film.</p>
<pre><code class="language-solidity">function getUserTokenIdList(uint256 _filmId, address _owner, uint256 _tier) public view returns (uint256[] memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_filmId</code></td><td><code>uint256</code></td><td>ID of the film.</td></tr>
<tr><td><code>_owner</code></td><td><code>address</code></td><td>Address of the owner.</td></tr>
<tr><td><code>_tier</code></td><td><code>uint256</code></td><td>Tier number associated with the NFT.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256[]</code></td><td>An array of token IDs owned by the specified owner for the specified tier.</td></tr>
</tbody></table>
</div>
<h2 id="events-2"><a class="header" href="#events-2">Events</a></h2>
<h3 id="tiererc721created"><a class="header" href="#tiererc721created">TierERC721Created</a></h3>
<p><em>Emitted when a new tier-specific ERC721 contract is created.</em></p>
<pre><code class="language-solidity">event TierERC721Created(address nftCreator, address nftContract, uint256 indexed tier);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>nftCreator</code></td><td><code>address</code></td><td>Address of the studio creating the NFT contract.</td></tr>
<tr><td><code>nftContract</code></td><td><code>address</code></td><td>Address of the newly created NFT contract.</td></tr>
<tr><td><code>tier</code></td><td><code>uint256</code></td><td>Tier number associated with the NFT contract, if tier != 0 then tierNFTContract</td></tr>
</tbody></table>
</div>
<h3 id="tiererc721minted"><a class="header" href="#tiererc721minted">TierERC721Minted</a></h3>
<p><em>Emitted when a tier-specific ERC721 token is minted.</em></p>
<pre><code class="language-solidity">event TierERC721Minted(address nftContract, uint256 indexed tokenId, address receiver);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>nftContract</code></td><td><code>address</code></td><td>Address of the NFT contract.</td></tr>
<tr><td><code>tokenId</code></td><td><code>uint256</code></td><td>ID of the minted token.</td></tr>
<tr><td><code>receiver</code></td><td><code>address</code></td><td>Address of the receiver of the minted token.</td></tr>
</tbody></table>
</div>
<h3 id="tierinfosetted"><a class="header" href="#tierinfosetted">TierInfoSetted</a></h3>
<p><em>Emitted when investment tier information is set for a film.</em></p>
<pre><code class="language-solidity">event TierInfoSetted(address filmOwner, uint256 indexed filmId, uint256 tierCount);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>filmOwner</code></td><td><code>address</code></td><td>Address of the studio setting the tier information.</td></tr>
<tr><td><code>filmId</code></td><td><code>uint256</code></td><td>ID of the film associated with the tier information.</td></tr>
<tr><td><code>tierCount</code></td><td><code>uint256</code></td><td>Number of tiers defined for the film.</td></tr>
</tbody></table>
</div>
<h2 id="structs-2"><a class="header" href="#structs-2">Structs</a></h2>
<h3 id="tiernft"><a class="header" href="#tiernft">TierNFT</a></h3>
<p><em>Struct to hold information about a tiered NFT.</em></p>
<pre><code class="language-solidity">struct TierNFT {
    string name;
    string symbol;
}
</code></pre>
<p><strong>Properties</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>name</code></td><td><code>string</code></td><td>Name of the NFT associated with the tier.</td></tr>
<tr><td><code>symbol</code></td><td><code>string</code></td><td>Symbol of the NFT associated with the tier.</td></tr>
</tbody></table>
</div>
<h3 id="tier"><a class="header" href="#tier">Tier</a></h3>
<p><em>Struct to define investment tiers for films.</em></p>
<pre><code class="language-solidity">struct Tier {
    uint256 maxAmount;
    uint256 minAmount;
}
</code></pre>
<p><strong>Properties</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>maxAmount</code></td><td><code>uint256</code></td><td>Minimum amount required to invest in this tier.</td></tr>
<tr><td><code>minAmount</code></td><td><code>uint256</code></td><td>Maximum amount allowed to invest in this tier.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="ownablee"><a class="header" href="#ownablee">Ownablee</a></h1>
<p><a href="https://github.com/Mill1995/VABDAO/blob/4914bdc306cbdb860037485ce4bcebbfdd390c9f/contracts/dao/Ownablee.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="contracts/dao/Ownablee.sol//contracts/interfaces/IOwnablee.sol/interface.IOwnablee.html">IOwnablee</a></p>
<p>Contract managing ownership and administrative functions for Vabble platform contracts.
This contract handles setup of key addresses such as auditor, Vabble wallet, and allowed deposit assets for staking,
voting and payments accross the whole protocol.</p>
<p><em>This contract must be deployed first.</em></p>
<h2 id="state-variables-3"><a class="header" href="#state-variables-3">State Variables</a></h2>
<h3 id="staking_pool"><a class="header" href="#staking_pool">STAKING_POOL</a></h3>
<p><em>The address of the StakingPool contract</em></p>
<pre><code class="language-solidity">address private STAKING_POOL;
</code></pre>
<h3 id="vabble_dao-2"><a class="header" href="#vabble_dao-2">VABBLE_DAO</a></h3>
<p><em>The address of the VabbleDAO contract</em></p>
<pre><code class="language-solidity">address private VABBLE_DAO;
</code></pre>
<h3 id="vote"><a class="header" href="#vote">VOTE</a></h3>
<p><em>The address of the Vote contract</em></p>
<pre><code class="language-solidity">address private VOTE;
</code></pre>
<h3 id="vab_wallet"><a class="header" href="#vab_wallet">VAB_WALLET</a></h3>
<p><em>The address of the Vabble wallet</em></p>
<pre><code class="language-solidity">address public override VAB_WALLET;
</code></pre>
<h3 id="auditor"><a class="header" href="#auditor">auditor</a></h3>
<p><em>The address of the current Auditor</em></p>
<pre><code class="language-solidity">address public override auditor;
</code></pre>
<h3 id="deployer"><a class="header" href="#deployer">deployer</a></h3>
<p><em>The address of the deployer</em></p>
<pre><code class="language-solidity">address public immutable override deployer;
</code></pre>
<h3 id="usdc_token"><a class="header" href="#usdc_token">USDC_TOKEN</a></h3>
<p><em>The address of the USDC token</em></p>
<pre><code class="language-solidity">address public immutable override USDC_TOKEN;
</code></pre>
<h3 id="payout_token"><a class="header" href="#payout_token">PAYOUT_TOKEN</a></h3>
<p><em>The address of the VAB token</em></p>
<pre><code class="language-solidity">address public immutable override PAYOUT_TOKEN;
</code></pre>
<h3 id="depositassetlist"><a class="header" href="#depositassetlist">depositAssetList</a></h3>
<p><em>List of assets allowed for deposit.</em></p>
<pre><code class="language-solidity">address[] private depositAssetList;
</code></pre>
<h3 id="allowassettodeposit"><a class="header" href="#allowassettodeposit">allowAssetToDeposit</a></h3>
<p><em>Mapping to track allowed deposit assets.</em></p>
<pre><code class="language-solidity">mapping(address =&gt; bool) private allowAssetToDeposit;
</code></pre>
<h2 id="functions-3"><a class="header" href="#functions-3">Functions</a></h2>
<h3 id="onlyauditor-3"><a class="header" href="#onlyauditor-3">onlyAuditor</a></h3>
<p><em>Restricts access to the auditor.</em></p>
<pre><code class="language-solidity">modifier onlyAuditor();
</code></pre>
<h3 id="onlydeployer-1"><a class="header" href="#onlydeployer-1">onlyDeployer</a></h3>
<p><em>Restricts access to the deployer.</em></p>
<pre><code class="language-solidity">modifier onlyDeployer();
</code></pre>
<h3 id="onlyvote"><a class="header" href="#onlyvote">onlyVote</a></h3>
<p><em>Restricts access to the vote contract.</em></p>
<pre><code class="language-solidity">modifier onlyVote();
</code></pre>
<h3 id="onlydao"><a class="header" href="#onlydao">onlyDAO</a></h3>
<p><em>Restricts access to the VabbleDAO contract.</em></p>
<pre><code class="language-solidity">modifier onlyDAO();
</code></pre>
<h3 id="onlystakingpool"><a class="header" href="#onlystakingpool">onlyStakingPool</a></h3>
<p><em>Restricts access to the StakingPool contract.</em></p>
<pre><code class="language-solidity">modifier onlyStakingPool();
</code></pre>
<h3 id="constructor-3"><a class="header" href="#constructor-3">constructor</a></h3>
<p><em>Constructor to initialize the Ownablee contract.</em></p>
<pre><code class="language-solidity">constructor(address _vabbleWallet, address _payoutToken, address _usdcToken, address _multiSigWallet);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_vabbleWallet</code></td><td><code>address</code></td><td>Address of the Vabble wallet.</td></tr>
<tr><td><code>_payoutToken</code></td><td><code>address</code></td><td>Address of the VAB token contract.</td></tr>
<tr><td><code>_usdcToken</code></td><td><code>address</code></td><td>Address of the USDC token contract.</td></tr>
<tr><td><code>_multiSigWallet</code></td><td><code>address</code></td><td>Address of the multi-signature wallet (auditor).</td></tr>
</tbody></table>
</div>
<h3 id="setup"><a class="header" href="#setup">setup</a></h3>
<p>Sets up initial contract addresses for voting, DAO, and staking pool.</p>
<pre><code class="language-solidity">function setup(address _vote, address _dao, address _stakingPool) external onlyDeployer;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_vote</code></td><td><code>address</code></td><td>Address of the Vote contract.</td></tr>
<tr><td><code>_dao</code></td><td><code>address</code></td><td>Address of the VabbleDAO contract.</td></tr>
<tr><td><code>_stakingPool</code></td><td><code>address</code></td><td>Address of the StakingPool contract.</td></tr>
</tbody></table>
</div>
<h3 id="transferauditor"><a class="header" href="#transferauditor">transferAuditor</a></h3>
<p>Transfers the role of auditor to a new address.</p>
<pre><code class="language-solidity">function transferAuditor(address _newAuditor) external override onlyAuditor;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_newAuditor</code></td><td><code>address</code></td><td>Address of the new auditor.</td></tr>
</tbody></table>
</div>
<h3 id="replaceauditor"><a class="header" href="#replaceauditor">replaceAuditor</a></h3>
<p>Replaces the auditor address with a new address (callable only by Vote contract).</p>
<p><em>This will be called when a proposal to replace the auditor is approved.</em></p>
<pre><code class="language-solidity">function replaceAuditor(address _newAuditor) external override onlyVote;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_newAuditor</code></td><td><code>address</code></td><td>Address of the new auditor.</td></tr>
</tbody></table>
</div>
<h3 id="adddepositasset"><a class="header" href="#adddepositasset">addDepositAsset</a></h3>
<p>Adds new assets to the list of assets allowed for deposit.</p>
<pre><code class="language-solidity">function addDepositAsset(address[] calldata _assetList) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_assetList</code></td><td><code>address[]</code></td><td>List of asset addresses to be added.</td></tr>
</tbody></table>
</div>
<h3 id="removedepositasset"><a class="header" href="#removedepositasset">removeDepositAsset</a></h3>
<p>Removes assets from the list of assets allowed for deposit.</p>
<pre><code class="language-solidity">function removeDepositAsset(address[] calldata _assetList) external onlyAuditor;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_assetList</code></td><td><code>address[]</code></td><td>List of asset addresses to be removed.</td></tr>
</tbody></table>
</div>
<h3 id="addtostudiopool"><a class="header" href="#addtostudiopool">addToStudioPool</a></h3>
<p>Adds VAB tokens from the contract balance to the VabbleDAO for studio pool.</p>
<pre><code class="language-solidity">function addToStudioPool(uint256 _amount) external override onlyDAO;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_amount</code></td><td><code>uint256</code></td><td>Amount of VAB tokens to transfer.</td></tr>
</tbody></table>
</div>
<h3 id="depositvabtoedgepool"><a class="header" href="#depositvabtoedgepool">depositVABToEdgePool</a></h3>
<p>Deposits VAB tokens from the auditor's address to the contract for the EdgePool.</p>
<pre><code class="language-solidity">function depositVABToEdgePool(uint256 _amount) external onlyAuditor;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_amount</code></td><td><code>uint256</code></td><td>Amount of VAB tokens to deposit.</td></tr>
</tbody></table>
</div>
<h3 id="withdrawvabfromedgepool"><a class="header" href="#withdrawvabfromedgepool">withdrawVABFromEdgePool</a></h3>
<p>Withdraws VAB tokens from the contract to a specified address (callable only by StakingPool).</p>
<p><em>This is part of the migration process to a new DAO.</em></p>
<p><em>The _to address is what was specified in the proposal to change the reward address.</em></p>
<pre><code class="language-solidity">function withdrawVABFromEdgePool(address _to) external override onlyStakingPool returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_to</code></td><td><code>address</code></td><td>Address to receive the withdrawn VAB tokens.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>The amount of VAB tokens withdrawn.</td></tr>
</tbody></table>
</div>
<h3 id="isdepositasset"><a class="header" href="#isdepositasset">isDepositAsset</a></h3>
<p>Checks if an asset is allowed for deposit.</p>
<pre><code class="language-solidity">function isDepositAsset(address _asset) external view override returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_asset</code></td><td><code>address</code></td><td>Address of the asset to check.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>True if the asset is allowed for deposit, false otherwise.</td></tr>
</tbody></table>
</div>
<h3 id="getdepositassetlist"><a class="header" href="#getdepositassetlist">getDepositAssetList</a></h3>
<p>Retrieves the list of assets allowed for deposit.</p>
<pre><code class="language-solidity">function getDepositAssetList() external view override returns (address[] memory);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address[]</code></td><td>An array of asset addresses allowed for deposit.</td></tr>
</tbody></table>
</div>
<h3 id="getvoteaddress"><a class="header" href="#getvoteaddress">getVoteAddress</a></h3>
<p>Retrieves the address of the Vote contract.</p>
<pre><code class="language-solidity">function getVoteAddress() public view returns (address);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td>The address of the Vote contract.</td></tr>
</tbody></table>
</div>
<h3 id="getvabbledao-1"><a class="header" href="#getvabbledao-1">getVabbleDAO</a></h3>
<p>Retrieves the address of the VabbleDAO contract.</p>
<pre><code class="language-solidity">function getVabbleDAO() public view returns (address dao_);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>dao_</code></td><td><code>address</code></td><td>The address of the VabbleDAO contract.</td></tr>
</tbody></table>
</div>
<h3 id="getstakingpooladdress"><a class="header" href="#getstakingpooladdress">getStakingPoolAddress</a></h3>
<p>Retrieves the address of the StakingPool contract.</p>
<pre><code class="language-solidity">function getStakingPoolAddress() public view returns (address);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td>The address of the StakingPool contract.</td></tr>
</tbody></table>
</div>
<h2 id="events-3"><a class="header" href="#events-3">Events</a></h2>
<h3 id="vabwalletchanged"><a class="header" href="#vabwalletchanged">VABWalletChanged</a></h3>
<p><em>Emitted when the Vabble wallet address is changed.</em></p>
<pre><code class="language-solidity">event VABWalletChanged(address indexed wallet);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>wallet</code></td><td><code>address</code></td><td>The new Vabble wallet address.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="property"><a class="header" href="#property">Property</a></h1>
<p><a href="https://github.com/Mill1995/VABDAO/blob/4914bdc306cbdb860037485ce4bcebbfdd390c9f/contracts/dao/Property.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
ReentrancyGuard</p>
<p>This contract manages various types of governance and property proposals
within a decentralized autonomous organization (DAO). It facilitates
proposals related to governance changes, property settings, and membership
adjustments for different roles within the organization.</p>
<p><em>The contract allows major stakeholders and stakers to propose and vote on
changes that impact the organization's governance, including adding or
replacing auditors, adding new film board members, and modifying various
operational parameters such as voting periods, fee amounts, and reward rates.</em></p>
<p><em>Major stakeholders, identified as those staking a significant amount of the
organization's native token (VAB), have exclusive rights to propose changes
such as adding auditors or modifying reward fund addresses.</em></p>
<p><em>Stakers, who hold tokens and participate in the organization's activities,
can propose changes related to the film board membership and various other properties.
They can also initiate the removal of film board members based on inactivity criteria.</em></p>
<p><em>The contract ensures that proposals are paid for using a fee mechanism,
converting USDC tokens to VAB tokens via Uniswap. This fee is essential for
incentivizing serious proposals and ensuring they are adequately funded.</em></p>
<p><em>Governance proposals and property proposals are tracked separately, with
detailed information stored for each proposal type. This includes creation
timestamps, approval statuses, proposal IDs, proposer addresses, and more.</em></p>
<p><em>Functions in this contract are restricted to specific roles (onlyMajor,
onlyStaker) to maintain security and prevent unauthorized access to critical
functions such as proposal creation, voting status updates, and membership
adjustments.</em></p>
<p><em>Additionally, the contract provides public and external functions for querying
proposal details, checking whitelist statuses of addresses and properties,
and retrieving lists of active governance proposals and property proposals.</em></p>
<p><em>This contract forms a crucial part of the DAO's governance framework, ensuring
that decisions are made transparently, securely, and in accordance with the
organization's operational needs and community consensus.</em></p>
<h2 id="state-variables-4"><a class="header" href="#state-variables-4">State Variables</a></h2>
<h3 id="ownable-3"><a class="header" href="#ownable-3">OWNABLE</a></h3>
<p><em>The address of the Ownablee contract</em></p>
<pre><code class="language-solidity">address private immutable OWNABLE;
</code></pre>
<h3 id="vote-1"><a class="header" href="#vote-1">VOTE</a></h3>
<p><em>The address of the Vote contract</em></p>
<pre><code class="language-solidity">address private immutable VOTE;
</code></pre>
<h3 id="staking_pool-1"><a class="header" href="#staking_pool-1">STAKING_POOL</a></h3>
<p><em>The address of the StakingPool contract</em></p>
<pre><code class="language-solidity">address private immutable STAKING_POOL;
</code></pre>
<h3 id="uni_helper-1"><a class="header" href="#uni_helper-1">UNI_HELPER</a></h3>
<p><em>The address of the UniHelper contract</em></p>
<pre><code class="language-solidity">address private immutable UNI_HELPER;
</code></pre>
<h3 id="dao_fund_reward"><a class="header" href="#dao_fund_reward">DAO_FUND_REWARD</a></h3>
<p>The address for sending the VAB from StakingPool, EdgePool and StudioPool when a proposal to change the
reward address passed.</p>
<p><em>This is the address where all of the VAB tokens will be send when calling <code>StakingPool::withdrawAllFund()</code>.
This address will be updated to the address that was added in the proposal, once it has been finalized.</em></p>
<pre><code class="language-solidity">address public DAO_FUND_REWARD;
</code></pre>
<h3 id="minpropertylist"><a class="header" href="#minpropertylist">minPropertyList</a></h3>
<p><em>contains the minimum values for each property change</em></p>
<pre><code class="language-solidity">uint256[] private minPropertyList;
</code></pre>
<h3 id="maxpropertylist"><a class="header" href="#maxpropertylist">maxPropertyList</a></h3>
<p><em>contains the maximum values for each property change</em></p>
<pre><code class="language-solidity">uint256[] private maxPropertyList;
</code></pre>
<h3 id="governanceproposalcount"><a class="header" href="#governanceproposalcount">governanceProposalCount</a></h3>
<p>total count of all governance proposals</p>
<pre><code class="language-solidity">uint256 public governanceProposalCount;
</code></pre>
<h3 id="agentlist"><a class="header" href="#agentlist">agentList</a></h3>
<p><em>List of agents proposed for replacing the auditor.</em></p>
<pre><code class="language-solidity">Agent[] private agentList;
</code></pre>
<h3 id="rewardaddresslist"><a class="header" href="#rewardaddresslist">rewardAddressList</a></h3>
<p><em>List of addresses proposed for receiving all pool funds (migrations proceess).</em></p>
<pre><code class="language-solidity">address[] private rewardAddressList;
</code></pre>
<h3 id="filmboardcandidates"><a class="header" href="#filmboardcandidates">filmBoardCandidates</a></h3>
<p><em>List of candidates proposed for the filmBoard.</em></p>
<pre><code class="language-solidity">address[] private filmBoardCandidates;
</code></pre>
<h3 id="filmboardmembers"><a class="header" href="#filmboardmembers">filmBoardMembers</a></h3>
<p><em>List of current filmBoard members.</em></p>
<pre><code class="language-solidity">address[] private filmBoardMembers;
</code></pre>
<h3 id="isgovwhitelist"><a class="header" href="#isgovwhitelist">isGovWhitelist</a></h3>
<p><em>Whitelist status for governance roles (flag: 1 =&gt; agent, 2 =&gt; board, 3 =&gt; reward).
Maps flag to address and status (0: no, 1: candidate, 2: member).</em></p>
<pre><code class="language-solidity">mapping(uint256 =&gt; mapping(address =&gt; uint256)) private isGovWhitelist;
</code></pre>
<h3 id="ispropertywhitelist"><a class="header" href="#ispropertywhitelist">isPropertyWhitelist</a></h3>
<p><em>Whitelist status for properties (flag =&gt; property i.e. 0 =&gt; filmVotePeriod).
Maps flag to property and status (0: no, 1: candidate, 2: member).</em></p>
<pre><code class="language-solidity">mapping(uint256 =&gt; mapping(uint256 =&gt; uint256)) private isPropertyWhitelist;
</code></pre>
<h3 id="govproposalinfo"><a class="header" href="#govproposalinfo">govProposalInfo</a></h3>
<p><em>Information about governance proposals. Maps flag to proposal index and proposal details.</em></p>
<pre><code class="language-solidity">mapping(uint256 =&gt; mapping(uint256 =&gt; GovProposal)) private govProposalInfo;
</code></pre>
<h3 id="proproposalinfo"><a class="header" href="#proproposalinfo">proProposalInfo</a></h3>
<p><em>Information about property proposals. Maps flag to proposal index and proposal details.</em></p>
<pre><code class="language-solidity">mapping(uint256 =&gt; mapping(uint256 =&gt; ProProposal)) private proProposalInfo;
</code></pre>
<h3 id="allgovproposalinfo"><a class="header" href="#allgovproposalinfo">allGovProposalInfo</a></h3>
<p><em>List of addresses associated with all governance proposals. Maps flag to address array.</em></p>
<pre><code class="language-solidity">mapping(uint256 =&gt; address[]) private allGovProposalInfo;
</code></pre>
<h3 id="usergovproposalcount"><a class="header" href="#usergovproposalcount">userGovProposalCount</a></h3>
<p><em>Count of governance proposals created by each user. Maps user address to proposal count.</em></p>
<pre><code class="language-solidity">mapping(address =&gt; uint256) public userGovProposalCount;
</code></pre>
<h3 id="filmvoteperiod"><a class="header" href="#filmvoteperiod">filmVotePeriod</a></h3>
<p>The amount of time a vote for a film proposal is open for</p>
<p><em>index/flag : 0</em></p>
<pre><code class="language-solidity">uint256 public filmVotePeriod;
</code></pre>
<h3 id="filmvoteperiodlist"><a class="header" href="#filmvoteperiodlist">filmVotePeriodList</a></h3>
<pre><code class="language-solidity">uint256[] private filmVotePeriodList;
</code></pre>
<h3 id="agentvoteperiod"><a class="header" href="#agentvoteperiod">agentVotePeriod</a></h3>
<p>The amount of time a vote to change the auditor is open for</p>
<p><em>index/flag : 1</em></p>
<pre><code class="language-solidity">uint256 public agentVotePeriod;
</code></pre>
<h3 id="agentvoteperiodlist"><a class="header" href="#agentvoteperiodlist">agentVotePeriodList</a></h3>
<pre><code class="language-solidity">uint256[] private agentVotePeriodList;
</code></pre>
<h3 id="disputegraceperiod"><a class="header" href="#disputegraceperiod">disputeGracePeriod</a></h3>
<p>The amount of time the dispute period is open for, when a proposal to change the Auditor passed Voting</p>
<p><em>index/flag : 2</em></p>
<pre><code class="language-solidity">uint256 public disputeGracePeriod;
</code></pre>
<h3 id="disputegraceperiodlist"><a class="header" href="#disputegraceperiodlist">disputeGracePeriodList</a></h3>
<pre><code class="language-solidity">uint256[] private disputeGracePeriodList;
</code></pre>
<h3 id="propertyvoteperiod"><a class="header" href="#propertyvoteperiod">propertyVotePeriod</a></h3>
<p>The amount of time a vote to change a property state is open for</p>
<p><em>index/flag : 3</em></p>
<pre><code class="language-solidity">uint256 public propertyVotePeriod;
</code></pre>
<h3 id="propertyvoteperiodlist"><a class="header" href="#propertyvoteperiodlist">propertyVotePeriodList</a></h3>
<pre><code class="language-solidity">uint256[] private propertyVotePeriodList;
</code></pre>
<h3 id="lockperiod"><a class="header" href="#lockperiod">lockPeriod</a></h3>
<p>The amount of time VAB tokens are locked when added to the staking pool contract.</p>
<p><em>index/flag : 4</em></p>
<pre><code class="language-solidity">uint256 public lockPeriod;
</code></pre>
<h3 id="lockperiodlist"><a class="header" href="#lockperiodlist">lockPeriodList</a></h3>
<pre><code class="language-solidity">uint256[] private lockPeriodList;
</code></pre>
<h3 id="filmrewardclaimperiod"><a class="header" href="#filmrewardclaimperiod">filmRewardClaimPeriod</a></h3>
<p>The period after the auditor can submit the films reward results</p>
<p><em>index/flag : 6</em></p>
<pre><code class="language-solidity">uint256 public filmRewardClaimPeriod;
</code></pre>
<h3 id="filmrewardclaimperiodlist"><a class="header" href="#filmrewardclaimperiodlist">filmRewardClaimPeriodList</a></h3>
<pre><code class="language-solidity">uint256[] private filmRewardClaimPeriodList;
</code></pre>
<h3 id="maxallowperiod"><a class="header" href="#maxallowperiod">maxAllowPeriod</a></h3>
<p>The maximum allowed period (in seconds) for removing film board members due to inactivity.</p>
<p><em>Used to check if a film board member has been inactive (i.e., not voting) for longer than this period.
It also ensures that the most recent fund proposal creation is within this period.</em></p>
<p><em>index/flag : 7</em></p>
<pre><code class="language-solidity">uint256 public maxAllowPeriod;
</code></pre>
<h3 id="maxallowperiodlist"><a class="header" href="#maxallowperiodlist">maxAllowPeriodList</a></h3>
<pre><code class="language-solidity">uint256[] private maxAllowPeriodList;
</code></pre>
<h3 id="boardvoteperiod"><a class="header" href="#boardvoteperiod">boardVotePeriod</a></h3>
<p>The amount of time a vote to add a film board member is open for</p>
<p><em>index/flag : 16</em></p>
<pre><code class="language-solidity">uint256 public boardVotePeriod;
</code></pre>
<h3 id="boardvoteperiodlist"><a class="header" href="#boardvoteperiodlist">boardVotePeriodList</a></h3>
<pre><code class="language-solidity">uint256[] private boardVotePeriodList;
</code></pre>
<h3 id="rewardvoteperiod"><a class="header" href="#rewardvoteperiod">rewardVotePeriod</a></h3>
<p>The amount of time a vote to change the reward address (moving pool funds) is open for</p>
<p><em>index/flag : 18</em></p>
<pre><code class="language-solidity">uint256 public rewardVotePeriod;
</code></pre>
<h3 id="rewardvoteperiodlist"><a class="header" href="#rewardvoteperiodlist">rewardVotePeriodList</a></h3>
<pre><code class="language-solidity">uint256[] private rewardVotePeriodList;
</code></pre>
<h3 id="rewardrate"><a class="header" href="#rewardrate">rewardRate</a></h3>
<p>The amount of daily rewards for staking
(1% = 1e8, 100% = 1e10)</p>
<p><em>index/flag : 5</em></p>
<pre><code class="language-solidity">uint256 public rewardRate;
</code></pre>
<h3 id="rewardratelist"><a class="header" href="#rewardratelist">rewardRateList</a></h3>
<pre><code class="language-solidity">uint256[] private rewardRateList;
</code></pre>
<h3 id="boardrewardrate"><a class="header" href="#boardrewardrate">boardRewardRate</a></h3>
<p>The reward rate Film Board members receive on top of normal staking rewards
(1% = 1e8, 100% = 1e10)</p>
<p><em>index/flag : 20</em></p>
<pre><code class="language-solidity">uint256 public boardRewardRate;
</code></pre>
<h3 id="boardrewardratelist"><a class="header" href="#boardrewardratelist">boardRewardRateList</a></h3>
<pre><code class="language-solidity">uint256[] private boardRewardRateList;
</code></pre>
<h3 id="proposalfeeamount"><a class="header" href="#proposalfeeamount">proposalFeeAmount</a></h3>
<p>The amount to submit a proposal to the DAO</p>
<p><em>index/flag : 8</em></p>
<pre><code class="language-solidity">uint256 public proposalFeeAmount;
</code></pre>
<h3 id="proposalfeeamountlist"><a class="header" href="#proposalfeeamountlist">proposalFeeAmountList</a></h3>
<pre><code class="language-solidity">uint256[] private proposalFeeAmountList;
</code></pre>
<h3 id="fundfeepercent"><a class="header" href="#fundfeepercent">fundFeePercent</a></h3>
<p>The amount of funding fees the DAO takes for film financing proposal raises.</p>
<p><em>index/flag : 9</em></p>
<pre><code class="language-solidity">uint256 public fundFeePercent;
</code></pre>
<h3 id="fundfeepercentlist"><a class="header" href="#fundfeepercentlist">fundFeePercentList</a></h3>
<pre><code class="language-solidity">uint256[] private fundFeePercentList;
</code></pre>
<h3 id="mindepositamount"><a class="header" href="#mindepositamount">minDepositAmount</a></h3>
<p>The minimum amount to deposit per individual on film financing proposals.</p>
<p><em>index/flag : 10</em></p>
<pre><code class="language-solidity">uint256 public minDepositAmount;
</code></pre>
<h3 id="mindepositamountlist"><a class="header" href="#mindepositamountlist">minDepositAmountList</a></h3>
<pre><code class="language-solidity">uint256[] private minDepositAmountList;
</code></pre>
<h3 id="maxdepositamount"><a class="header" href="#maxdepositamount">maxDepositAmount</a></h3>
<p>The maximum amount to deposit per individual on film financing proposals.</p>
<p><em>index/flag : 11</em></p>
<pre><code class="language-solidity">uint256 public maxDepositAmount;
</code></pre>
<h3 id="maxdepositamountlist"><a class="header" href="#maxdepositamountlist">maxDepositAmountList</a></h3>
<pre><code class="language-solidity">uint256[] private maxDepositAmountList;
</code></pre>
<h3 id="maxmintfeepercent"><a class="header" href="#maxmintfeepercent">maxMintFeePercent</a></h3>
<p>The maximum percent fee Vab DAO takes for minting an NFT collection.</p>
<p><em>index/flag : 12</em></p>
<pre><code class="language-solidity">uint256 public maxMintFeePercent;
</code></pre>
<h3 id="maxmintfeepercentlist"><a class="header" href="#maxmintfeepercentlist">maxMintFeePercentList</a></h3>
<pre><code class="language-solidity">uint256[] private maxMintFeePercentList;
</code></pre>
<h3 id="subscriptionamount"><a class="header" href="#subscriptionamount">subscriptionAmount</a></h3>
<p>The monthly fee rate for streaming content on Vabble Streaming.</p>
<p><em>index/flag : 19</em></p>
<pre><code class="language-solidity">uint256 public subscriptionAmount;
</code></pre>
<h3 id="subscriptionamountlist"><a class="header" href="#subscriptionamountlist">subscriptionAmountList</a></h3>
<pre><code class="language-solidity">uint256[] private subscriptionAmountList;
</code></pre>
<h3 id="minvotecount"><a class="header" href="#minvotecount">minVoteCount</a></h3>
<p>The minimum amount of people that need to vote for a proposal to pass</p>
<p><em>This variable represents the threshold count of voters required for a proposal to be considered valid.</em></p>
<p><em>index/flag : 13</em></p>
<pre><code class="language-solidity">uint256 public minVoteCount;
</code></pre>
<h3 id="minvotecountlist"><a class="header" href="#minvotecountlist">minVoteCountList</a></h3>
<pre><code class="language-solidity">uint256[] private minVoteCountList;
</code></pre>
<h3 id="minstakercountpercent"><a class="header" href="#minstakercountpercent">minStakerCountPercent</a></h3>
<p>The minimum percentage of stakers that need to vote for a proposal to pass</p>
<p><em>This percentage is used to calculate the required number of stakers based on the total staker count.</em></p>
<p><em>index/flag: 14</em></p>
<pre><code class="language-solidity">uint256 public minStakerCountPercent;
</code></pre>
<h3 id="minstakercountpercentlist"><a class="header" href="#minstakercountpercentlist">minStakerCountPercentList</a></h3>
<pre><code class="language-solidity">uint256[] private minStakerCountPercentList;
</code></pre>
<h3 id="availablevabamount"><a class="header" href="#availablevabamount">availableVABAmount</a></h3>
<p>The amount of VAB a user has to stake in order to create a proposal to change the auditor/reward address</p>
<p><em>index/flag: 15</em></p>
<pre><code class="language-solidity">uint256 public availableVABAmount;
</code></pre>
<h3 id="availablevabamountlist"><a class="header" href="#availablevabamountlist">availableVABAmountList</a></h3>
<pre><code class="language-solidity">uint256[] private availableVABAmountList;
</code></pre>
<h3 id="boardvoteweight"><a class="header" href="#boardvoteweight">boardVoteWeight</a></h3>
<p>The percentage weight Film Board members have in voting on proposals.</p>
<p><em>index/flag: 17</em></p>
<pre><code class="language-solidity">uint256 public boardVoteWeight;
</code></pre>
<h3 id="boardvoteweightlist"><a class="header" href="#boardvoteweightlist">boardVoteWeightList</a></h3>
<pre><code class="language-solidity">uint256[] private boardVoteWeightList;
</code></pre>
<h2 id="functions-4"><a class="header" href="#functions-4">Functions</a></h2>
<h3 id="onlyvote-1"><a class="header" href="#onlyvote-1">onlyVote</a></h3>
<p><em>Restricts access to the Vote contract.</em></p>
<pre><code class="language-solidity">modifier onlyVote();
</code></pre>
<h3 id="onlydeployer-2"><a class="header" href="#onlydeployer-2">onlyDeployer</a></h3>
<p><em>Restricts access to the deployer of the Ownable contract.</em></p>
<pre><code class="language-solidity">modifier onlyDeployer();
</code></pre>
<h3 id="onlystaker"><a class="header" href="#onlystaker">onlyStaker</a></h3>
<p><em>Restricts access to stakers.</em></p>
<pre><code class="language-solidity">modifier onlyStaker();
</code></pre>
<h3 id="onlymajor"><a class="header" href="#onlymajor">onlyMajor</a></h3>
<p>Ensures that the caller is a major staker</p>
<pre><code class="language-solidity">modifier onlyMajor();
</code></pre>
<h3 id="constructor-4"><a class="header" href="#constructor-4">constructor</a></h3>
<p>Constructor to initialize the contract with required addresses and parameters</p>
<p><em>Sets up the min and max allowed parameters for property changes</em></p>
<pre><code class="language-solidity">constructor(address _ownable, address _uniHelper, address _vote, address _staking);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_ownable</code></td><td><code>address</code></td><td>Address of the Ownablee contract</td></tr>
<tr><td><code>_uniHelper</code></td><td><code>address</code></td><td>Address of the UniHelper contract</td></tr>
<tr><td><code>_vote</code></td><td><code>address</code></td><td>Address of the Vote contract</td></tr>
<tr><td><code>_staking</code></td><td><code>address</code></td><td>Address for sending the DAO rewards fund</td></tr>
</tbody></table>
</div>
<h3 id="proposalproperty"><a class="header" href="#proposalproperty">proposalProperty</a></h3>
<p>Creates a proposal to update a specific property with the provided details.</p>
<p><em>Only callable by a staker. Ensures the property and flag values are within valid ranges and that the
property is not already a candidate or the current value of the property.</em></p>
<pre><code class="language-solidity">function proposalProperty(
    uint256 _property,
    uint256 _flag,
    string memory _title,
    string memory _description
)
    external
    onlyStaker
    nonReentrant;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_property</code></td><td><code>uint256</code></td><td>The property value to propose.</td></tr>
<tr><td><code>_flag</code></td><td><code>uint256</code></td><td>The flag representing the type of property. 0 - Film Vote Period 1 - Agent Vote Period 2 - Dispute Grace Period 3 - Property Vote Period 4 - Lock Period 5 - Reward Rate 6 - Film Reward Claim Period 7 - Max Allow Period 8 - Proposal Fee Amount 9 - Fund Fee Percent 10 - Minimum Deposit Amount 11 - Maximum Deposit Amount 12 - Maximum Mint Fee Percent 13 - Minimum Vote Count 14 - Minimum Staker Count Percent 15 - Available VAB Amount 16 - Board Vote Period 17 - Board Vote Weight 18 - Reward Vote Period 19 - Subscription Amount 20 - Board Reward Rate</td></tr>
<tr><td><code>_title</code></td><td><code>string</code></td><td>The title of the proposal.</td></tr>
<tr><td><code>_description</code></td><td><code>string</code></td><td>The description of the proposal.</td></tr>
</tbody></table>
</div>
<h3 id="updatepropertyproposal"><a class="header" href="#updatepropertyproposal">updatePropertyProposal</a></h3>
<p>Updates the status of a property proposal.
If the proposal passed voting, this will update the property to the new value.</p>
<p><em>Only callable by <code>Vote::updateProperty()</code> after the voting period has elapsed.
Updates the approval status and the whitelist status of the property.</em></p>
<pre><code class="language-solidity">function updatePropertyProposal(uint256 _index, uint256 _flag, uint256 _approveStatus) external onlyVote;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_index</code></td><td><code>uint256</code></td><td>The index of the proposal to update.</td></tr>
<tr><td><code>_flag</code></td><td><code>uint256</code></td><td>The flag representing the type of property. 0 - Film Vote Period 1 - Agent Vote Period 2 - Dispute Grace Period 3 - Property Vote Period 4 - Lock Period 5 - Reward Rate 6 - Film Reward Claim Period 7 - Max Allow Period 8 - Proposal Fee Amount 9 - Fund Fee Percent 10 - Minimum Deposit Amount 11 - Maximum Deposit Amount 12 - Maximum Mint Fee Percent 13 - Minimum Vote Count 14 - Minimum Staker Count Percent 15 - Available VAB Amount 16 - Board Vote Period 17 - Board Vote Weight 18 - Reward Vote Period 19 - Subscription Amount 20 - Board Reward Rate</td></tr>
<tr><td><code>_approveStatus</code></td><td><code>uint256</code></td><td>The approval status (1 for approved, 0 for rejected).</td></tr>
</tbody></table>
</div>
<h3 id="proposalauditor"><a class="header" href="#proposalauditor">proposalAuditor</a></h3>
<p>Creates a proposal to replace the current auditor with a new agent.</p>
<p><em>Only callable by a major stakeholder (needs to stake at least <code>availableVABAmount</code>).
Ensures the agent is not already the auditor or a candidate.</em></p>
<pre><code class="language-solidity">function proposalAuditor(
    address _agent,
    string memory _title,
    string memory _description
)
    external
    onlyMajor
    nonReentrant;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_agent</code></td><td><code>address</code></td><td>The address of the proposed new auditor.</td></tr>
<tr><td><code>_title</code></td><td><code>string</code></td><td>The title of the proposal.</td></tr>
<tr><td><code>_description</code></td><td><code>string</code></td><td>The description of the proposal.</td></tr>
</tbody></table>
</div>
<h3 id="proposalrewardfund"><a class="header" href="#proposalrewardfund">proposalRewardFund</a></h3>
<p>Creates a proposal to add a new reward fund address.
This will be used if we need to do a migration to a new DAO.
The address proposed will receive all of the VAB from the Edge,Studio and StakingPool.</p>
<p><em>Only callable by a major stakeholder (needs to stake at least <code>availableVABAmount</code>).
Ensures the address is not already a candidate.</em></p>
<pre><code class="language-solidity">function proposalRewardFund(
    address _rewardAddress,
    string memory _title,
    string memory _description
)
    external
    onlyMajor
    nonReentrant;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_rewardAddress</code></td><td><code>address</code></td><td>The address proposed to receive all of the tokens.</td></tr>
<tr><td><code>_title</code></td><td><code>string</code></td><td>The title of the proposal.</td></tr>
<tr><td><code>_description</code></td><td><code>string</code></td><td>The description of the proposal.</td></tr>
</tbody></table>
</div>
<h3 id="proposalfilmboard"><a class="header" href="#proposalfilmboard">proposalFilmBoard</a></h3>
<p>Creates a proposal to add a new member to the film board.</p>
<p><em>Only callable by a staker. Ensures the member is not already a candidate.</em></p>
<pre><code class="language-solidity">function proposalFilmBoard(
    address _member,
    string memory _title,
    string memory _description
)
    external
    onlyStaker
    nonReentrant;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_member</code></td><td><code>address</code></td><td>The address of the proposed new film board member.</td></tr>
<tr><td><code>_title</code></td><td><code>string</code></td><td>The title of the proposal.</td></tr>
<tr><td><code>_description</code></td><td><code>string</code></td><td>The description of the proposal.</td></tr>
</tbody></table>
</div>
<h3 id="updategovproposal"><a class="header" href="#updategovproposal">updateGovProposal</a></h3>
<p>Updates the status of a governance proposal.
If the proposal passed voting, this will update the property to the new value.</p>
<p><em>Only callable by the Vote contract. Updates the approval status and the whitelist status of the member.</em></p>
<pre><code class="language-solidity">function updateGovProposal(uint256 _index, uint256 _flag, uint256 _approveStatus) external onlyVote;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_index</code></td><td><code>uint256</code></td><td>The index of the proposal to update.</td></tr>
<tr><td><code>_flag</code></td><td><code>uint256</code></td><td>The flag representing the type of proposal (1 for agent, 2 for board, 3 for pool).</td></tr>
<tr><td><code>_approveStatus</code></td><td><code>uint256</code></td><td>The approval status (1 for approved, 0 for rejected, 5 for replaced).</td></tr>
</tbody></table>
</div>
<h3 id="removefilmboardmember"><a class="header" href="#removefilmboardmember">removeFilmBoardMember</a></h3>
<p>Removes a film board member from the whitelist if they haven't voted on any proposal within the maximum
allowed period.</p>
<p><em>Only callable by a staker. Ensures the member meets the inactivity criteria by checking their last vote time
and the most recent fund proposal creation time.</em></p>
<pre><code class="language-solidity">function removeFilmBoardMember(address _member) external onlyStaker nonReentrant;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_member</code></td><td><code>address</code></td><td>The address of the film board member to remove. Requirements: - The member must be an active film board member (isGovWhitelist[2][_member] == 2). - The member's last vote must be older than the <code>maxAllowPeriod</code>. - The most recent fund proposal creation time must be within the <code>maxAllowPeriod</code>.</td></tr>
</tbody></table>
</div>
<h3 id="getgovproposallist"><a class="header" href="#getgovproposallist">getGovProposalList</a></h3>
<p>Retrieves the list of addresses for a specific governance proposal type.</p>
<pre><code class="language-solidity">function getGovProposalList(uint256 _flag) external view returns (address[] memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_flag</code></td><td><code>uint256</code></td><td>The flag representing the type of proposal (1 for agentList, 2 for boardCandidateList, 3 for rewardAddressList, 4 for filmBoardMembers).</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address[]</code></td><td>The list of addresses corresponding to the proposal type.</td></tr>
</tbody></table>
</div>
<h3 id="getgovproposalinfo"><a class="header" href="#getgovproposalinfo">getGovProposalInfo</a></h3>
<p>Retrieves detailed information about a specific governance proposal.</p>
<pre><code class="language-solidity">function getGovProposalInfo(
    uint256 _index,
    uint256 _flag
)
    external
    view
    returns (uint256, uint256, uint256, address, address, Helper.Status);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_index</code></td><td><code>uint256</code></td><td>The index of the proposal.</td></tr>
<tr><td><code>_flag</code></td><td><code>uint256</code></td><td>The flag representing the type of proposal (1 for agent, 2 for board, 3 for reward address).</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>The creation time, approval time, proposal ID, value address, creator address, and status of the proposal.</td></tr>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td></td></tr>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td></td></tr>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td></td></tr>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td></td></tr>
<tr><td><code>&lt;none&gt;</code></td><td><code>Helper.Status</code></td><td></td></tr>
</tbody></table>
</div>
<h3 id="getgovproposalstr"><a class="header" href="#getgovproposalstr">getGovProposalStr</a></h3>
<p>Retrieves the title and description of a specific governance proposal.</p>
<pre><code class="language-solidity">function getGovProposalStr(uint256 _index, uint256 _flag) external view returns (string memory, string memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_index</code></td><td><code>uint256</code></td><td>The index of the proposal.</td></tr>
<tr><td><code>_flag</code></td><td><code>uint256</code></td><td>The flag representing the type of proposal.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>string</code></td><td>The title and description of the proposal.</td></tr>
<tr><td><code>&lt;none&gt;</code></td><td><code>string</code></td><td></td></tr>
</tbody></table>
</div>
<h3 id="getpropertyproposalinfo"><a class="header" href="#getpropertyproposalinfo">getPropertyProposalInfo</a></h3>
<p>Retrieves detailed information about a specific property proposal.</p>
<pre><code class="language-solidity">function getPropertyProposalInfo(
    uint256 _index,
    uint256 _flag
)
    external
    view
    returns (uint256, uint256, uint256, uint256, address, Helper.Status);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_index</code></td><td><code>uint256</code></td><td>The index of the proposal.</td></tr>
<tr><td><code>_flag</code></td><td><code>uint256</code></td><td>The flag representing the type of proposal.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>The creation time, approval time, proposal ID, property value, creator address, and status of the proposal.</td></tr>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td></td></tr>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td></td></tr>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td></td></tr>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td></td></tr>
<tr><td><code>&lt;none&gt;</code></td><td><code>Helper.Status</code></td><td></td></tr>
</tbody></table>
</div>
<h3 id="getpropertyproposalstr"><a class="header" href="#getpropertyproposalstr">getPropertyProposalStr</a></h3>
<p>Retrieves the title and description of a specific property proposal.</p>
<pre><code class="language-solidity">function getPropertyProposalStr(uint256 _index, uint256 _flag) external view returns (string memory, string memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_index</code></td><td><code>uint256</code></td><td>The index of the proposal.</td></tr>
<tr><td><code>_flag</code></td><td><code>uint256</code></td><td>The flag representing the type of proposal.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>string</code></td><td>The title and description of the proposal.</td></tr>
<tr><td><code>&lt;none&gt;</code></td><td><code>string</code></td><td></td></tr>
</tbody></table>
</div>
<h3 id="getagentproposerstakeamount"><a class="header" href="#getagentproposerstakeamount">getAgentProposerStakeAmount</a></h3>
<p>Retrieves the stake amount of an agent proposer.</p>
<p><em>This is used on the Vote contract for the auditor dispute flow.
We need to check if the user who disputes the proposal has staked double the amount
of the creator of the auditor change proposal.</em></p>
<pre><code class="language-solidity">function getAgentProposerStakeAmount(uint256 _index) external view returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_index</code></td><td><code>uint256</code></td><td>The index of the agent in the agent list.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>The stake amount of the agent proposer.</td></tr>
</tbody></table>
</div>
<h3 id="checkgovwhitelist"><a class="header" href="#checkgovwhitelist">checkGovWhitelist</a></h3>
<p>Checks the whitelist status of a governance address.</p>
<pre><code class="language-solidity">function checkGovWhitelist(uint256 _flag, address _address) external view returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_flag</code></td><td><code>uint256</code></td><td>The flag representing the type of governance address.</td></tr>
<tr><td><code>_address</code></td><td><code>address</code></td><td>The address to check.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>The whitelist status of the address.</td></tr>
</tbody></table>
</div>
<h3 id="checkpropertywhitelist"><a class="header" href="#checkpropertywhitelist">checkPropertyWhitelist</a></h3>
<p>Checks the whitelist status of a property.</p>
<pre><code class="language-solidity">function checkPropertyWhitelist(uint256 _flag, uint256 _property) external view returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_flag</code></td><td><code>uint256</code></td><td>The flag representing the type of property.</td></tr>
<tr><td><code>_property</code></td><td><code>uint256</code></td><td>The property to check.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>The whitelist status of the property.</td></tr>
</tbody></table>
</div>
<h3 id="getallgovproposalinfo"><a class="header" href="#getallgovproposalinfo">getAllGovProposalInfo</a></h3>
<p>Retrieves all governance proposal information for a specific flag.</p>
<pre><code class="language-solidity">function getAllGovProposalInfo(uint256 _flag) external view returns (address[] memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_flag</code></td><td><code>uint256</code></td><td>The flag representing the type of governance proposals (1: auditor, 2: film board member, 3: reward address)</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address[]</code></td><td>The list of addresses for the governance proposals.</td></tr>
</tbody></table>
</div>
<h3 id="getpropertyproposallist"><a class="header" href="#getpropertyproposallist">getPropertyProposalList</a></h3>
<p>Retrieves the list of property proposals for a specified flag.</p>
<pre><code class="language-solidity">function getPropertyProposalList(uint256 _flag) public view returns (uint256[] memory _list);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_flag</code></td><td><code>uint256</code></td><td>The flag representing the type of property proposal list to retrieve. 0 - Film Vote Period List 1 - Agent Vote Period List 2 - Dispute Grace Period List 3 - Property Vote Period List 4 - Lock Period List 5 - Reward Rate List 6 - Film Reward Claim Period List 7 - Max Allow Period List 8 - Proposal Fee Amount List 9 - Fund Fee Percent List 10 - Minimum Deposit Amount List 11 - Maximum Deposit Amount List 12 - Maximum Mint Fee Percent List 13 - Minimum Vote Count List 14 - Minimum Staker Count Percent List 15 - Available VAB Amount List 16 - Board Vote Period List 17 - Board Vote Weight List 18 - Reward Vote Period List 19 - Subscription Amount List 20 - Board Reward Rate List</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_list</code></td><td><code>uint256[]</code></td><td>The list of property proposals corresponding to the specified flag.</td></tr>
</tbody></table>
</div>
<h3 id="__paidfee"><a class="header" href="#__paidfee">__paidFee</a></h3>
<p><em>Ensures the proposal fee is paid by transferring the expected amount of VAB tokens from the user to the
staking pool.</em></p>
<p><em>Converts the specified amount of USDC to the expected amount of VAB using Uniswap, then transfers the VAB to
the staking pool.</em></p>
<pre><code class="language-solidity">function __paidFee(uint256 _payAmount) private;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_payAmount</code></td><td><code>uint256</code></td><td>The amount of USDC to be converted to VAB and paid as the proposal fee.</td></tr>
</tbody></table>
</div>
<h3 id="__removeboardmember"><a class="header" href="#__removeboardmember">__removeBoardMember</a></h3>
<p><em>Removes a film board member from the list.</em></p>
<p><em>Finds the member in the film board members list and removes them by swapping with the last element and
reducing the list length.</em></p>
<pre><code class="language-solidity">function __removeBoardMember(address _member) private;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_member</code></td><td><code>address</code></td><td>The address of the film board member to remove.</td></tr>
</tbody></table>
</div>
<h2 id="events-4"><a class="header" href="#events-4">Events</a></h2>
<h3 id="auditorproposalcreated"><a class="header" href="#auditorproposalcreated">AuditorProposalCreated</a></h3>
<p>Emitted when an auditor proposal is created</p>
<pre><code class="language-solidity">event AuditorProposalCreated(address indexed creator, address member, string title, string description);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>creator</code></td><td><code>address</code></td><td>The address of the proposal creator</td></tr>
<tr><td><code>member</code></td><td><code>address</code></td><td>The address of the proposed auditor</td></tr>
<tr><td><code>title</code></td><td><code>string</code></td><td>The title of the proposal</td></tr>
<tr><td><code>description</code></td><td><code>string</code></td><td>The description of the proposal</td></tr>
</tbody></table>
</div>
<h3 id="rewardfundproposalcreated"><a class="header" href="#rewardfundproposalcreated">RewardFundProposalCreated</a></h3>
<p>Emitted when a reward fund proposal is created</p>
<pre><code class="language-solidity">event RewardFundProposalCreated(address indexed creator, address member, string title, string description);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>creator</code></td><td><code>address</code></td><td>The address of the proposal creator</td></tr>
<tr><td><code>member</code></td><td><code>address</code></td><td>The address of the proposed reward fund address</td></tr>
<tr><td><code>title</code></td><td><code>string</code></td><td>The title of the proposal</td></tr>
<tr><td><code>description</code></td><td><code>string</code></td><td>The description of the proposal</td></tr>
</tbody></table>
</div>
<h3 id="filmboardproposalcreated"><a class="header" href="#filmboardproposalcreated">FilmBoardProposalCreated</a></h3>
<p>Emitted when a film board proposal is created</p>
<pre><code class="language-solidity">event FilmBoardProposalCreated(address indexed creator, address member, string title, string description);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>creator</code></td><td><code>address</code></td><td>The address of the proposal creator</td></tr>
<tr><td><code>member</code></td><td><code>address</code></td><td>The address of the proposed film board member address</td></tr>
<tr><td><code>title</code></td><td><code>string</code></td><td>The title of the proposal</td></tr>
<tr><td><code>description</code></td><td><code>string</code></td><td>The description of the proposal</td></tr>
</tbody></table>
</div>
<h3 id="propertyproposalcreated"><a class="header" href="#propertyproposalcreated">PropertyProposalCreated</a></h3>
<p>Emitted when a property proposal is created</p>
<pre><code class="language-solidity">event PropertyProposalCreated(
    address indexed creator, uint256 property, uint256 flag, string title, string description
);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>creator</code></td><td><code>address</code></td><td>The address of the proposal creator</td></tr>
<tr><td><code>property</code></td><td><code>uint256</code></td><td>The proposed property value</td></tr>
<tr><td><code>flag</code></td><td><code>uint256</code></td><td>The flag indicating the type of property</td></tr>
<tr><td><code>title</code></td><td><code>string</code></td><td>The title of the proposal</td></tr>
<tr><td><code>description</code></td><td><code>string</code></td><td>The description of the proposal</td></tr>
</tbody></table>
</div>
<h3 id="filmboardmemberremoved"><a class="header" href="#filmboardmemberremoved">FilmBoardMemberRemoved</a></h3>
<p>Emitted when a film board member is removed</p>
<pre><code class="language-solidity">event FilmBoardMemberRemoved(address indexed caller, address member);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>caller</code></td><td><code>address</code></td><td>The address of the caller who removed the member</td></tr>
<tr><td><code>member</code></td><td><code>address</code></td><td>The address of the removed member</td></tr>
</tbody></table>
</div>
<h2 id="structs-3"><a class="header" href="#structs-3">Structs</a></h2>
<h3 id="proproposal"><a class="header" href="#proproposal">ProProposal</a></h3>
<p><em>This structure contains information related to proposals that update governance properties of the contract.</em></p>
<pre><code class="language-solidity">struct ProProposal {
    string title;
    string description;
    uint256 createTime;
    uint256 approveTime;
    uint256 proposalID;
    uint256 value;
    address creator;
    Helper.Status status;
}
</code></pre>
<p><strong>Properties</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>title</code></td><td><code>string</code></td><td>The title of the proposal</td></tr>
<tr><td><code>description</code></td><td><code>string</code></td><td>The detailed description of the proposal</td></tr>
<tr><td><code>createTime</code></td><td><code>uint256</code></td><td>The timestamp when the proposal was created</td></tr>
<tr><td><code>approveTime</code></td><td><code>uint256</code></td><td>The timestamp when the proposal was approved</td></tr>
<tr><td><code>proposalID</code></td><td><code>uint256</code></td><td>The unique identifier for the proposal</td></tr>
<tr><td><code>value</code></td><td><code>uint256</code></td><td>The proposed new value for the governance property</td></tr>
<tr><td><code>creator</code></td><td><code>address</code></td><td>The address of the creator of the proposal</td></tr>
<tr><td><code>status</code></td><td><code>Helper.Status</code></td><td>The current status of the proposal</td></tr>
</tbody></table>
</div>
<h3 id="govproposal"><a class="header" href="#govproposal">GovProposal</a></h3>
<p><em>This structure contains information related to governance proposals such as Auditor change, Reward Address
allocation, and Filmboard Member addition or removal.</em></p>
<pre><code class="language-solidity">struct GovProposal {
    string title;
    string description;
    uint256 createTime;
    uint256 approveTime;
    uint256 proposalID;
    address value;
    address creator;
    Helper.Status status;
}
</code></pre>
<p><strong>Properties</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>title</code></td><td><code>string</code></td><td>The title of the proposal</td></tr>
<tr><td><code>description</code></td><td><code>string</code></td><td>The detailed description of the proposal</td></tr>
<tr><td><code>createTime</code></td><td><code>uint256</code></td><td>The timestamp when the proposal was created</td></tr>
<tr><td><code>approveTime</code></td><td><code>uint256</code></td><td>The timestamp when the proposal was approved</td></tr>
<tr><td><code>proposalID</code></td><td><code>uint256</code></td><td>The unique identifier for the proposal</td></tr>
<tr><td><code>value</code></td><td><code>address</code></td><td>The proposed new address</td></tr>
<tr><td><code>creator</code></td><td><code>address</code></td><td>The address of the creator of the proposal</td></tr>
<tr><td><code>status</code></td><td><code>Helper.Status</code></td><td>The current status of the proposal</td></tr>
</tbody></table>
</div>
<h3 id="agent"><a class="header" href="#agent">Agent</a></h3>
<p><em>This structure contains information about an agent in the context of auditor replacement proposals.</em></p>
<pre><code class="language-solidity">struct Agent {
    address agent;
    uint256 stakeAmount;
}
</code></pre>
<p><strong>Properties</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>agent</code></td><td><code>address</code></td><td>The address of the agent</td></tr>
<tr><td><code>stakeAmount</code></td><td><code>uint256</code></td><td>The stake amount of the agent proposal creator</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="stakingpool"><a class="header" href="#stakingpool">StakingPool</a></h1>
<p><a href="https://github.com/Mill1995/VABDAO/blob/4914bdc306cbdb860037485ce4bcebbfdd390c9f/contracts/dao/StakingPool.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
ReentrancyGuard</p>
<p>This contract manages a staking pool where users can stake VAB tokens to earn rewards based on their staked
amount and participation in governance activities.
The contract handles staking, unstaking, calculating rewards, and distributing rewards to stakers.
It also facilitates  participation in governance by allowing stakers to vote on proposals and earn rewards based on
their voting activities.
Stakers can:</p>
<ul>
<li>Stake VAB tokens to participate in the staking pool.</li>
<li>Earn rewards based on the amount staked and their participation in governance activities such as voting on
proposals.</li>
<li>Unstake their tokens after a lock period to withdraw their staked amount and any earned rewards.</li>
<li>Vote on proposals submitted to the governance system, this includes governance and film proposals.
The contract calculates rewards based on the staking period, the amount staked, and the user's participation in
governance.
During a migration process, stakers can withdraw their staked tokens and any accrued rewards without earning new
rewards until the migration is complete.
The contract ensures that stakers can safely withdraw their funds during this period
while maintaining the integrity of the staking pool and ongoing governance activities.
Stakers are informed about the migration status, allowing them to make informed decisions regarding their staked
amounts and participation in governance activities.
This contract plays a critical role in the Vabble ecosystem by providing a secure and efficient platform for staking
VAB tokens for participating in governance decisions and earning rewards.</li>
</ul>
<h2 id="state-variables-5"><a class="header" href="#state-variables-5">State Variables</a></h2>
<h3 id="ownable-4"><a class="header" href="#ownable-4">OWNABLE</a></h3>
<p><em>The Ownablee contract address</em></p>
<pre><code class="language-solidity">address private immutable OWNABLE;
</code></pre>
<h3 id="vote-2"><a class="header" href="#vote-2">VOTE</a></h3>
<p><em>The Vote contract address</em></p>
<pre><code class="language-solidity">address private VOTE;
</code></pre>
<h3 id="vabble_dao-3"><a class="header" href="#vabble_dao-3">VABBLE_DAO</a></h3>
<p><em>The VabbleDAO contract address</em></p>
<pre><code class="language-solidity">address private VABBLE_DAO;
</code></pre>
<h3 id="dao_property"><a class="header" href="#dao_property">DAO_PROPERTY</a></h3>
<p><em>The Property contract address</em></p>
<pre><code class="language-solidity">address private DAO_PROPERTY;
</code></pre>
<h3 id="totalstakingamount"><a class="header" href="#totalstakingamount">totalStakingAmount</a></h3>
<p>Total amount staked in the contract</p>
<pre><code class="language-solidity">uint256 public totalStakingAmount;
</code></pre>
<h3 id="totalrewardamount"><a class="header" href="#totalrewardamount">totalRewardAmount</a></h3>
<p>Total amount of rewards available for distribution</p>
<pre><code class="language-solidity">uint256 public totalRewardAmount;
</code></pre>
<h3 id="totalrewardissuedamount"><a class="header" href="#totalrewardissuedamount">totalRewardIssuedAmount</a></h3>
<p>Total amount of rewards already distributed</p>
<pre><code class="language-solidity">uint256 public totalRewardIssuedAmount;
</code></pre>
<h3 id="lastfundproposalcreatetime"><a class="header" href="#lastfundproposalcreatetime">lastfundProposalCreateTime</a></h3>
<p>Timestamp of the last funding proposal creation on the VabbleDAO contract</p>
<pre><code class="language-solidity">uint256 public lastfundProposalCreateTime;
</code></pre>
<h3 id="migrationstatus"><a class="header" href="#migrationstatus">migrationStatus</a></h3>
<p>Migration status of the contract:</p>
<ul>
<li>0: not started</li>
<li>1: started</li>
<li>2: ended</li>
</ul>
<pre><code class="language-solidity">uint256 public migrationStatus = 0;
</code></pre>
<h3 id="totalmigrationvab"><a class="header" href="#totalmigrationvab">totalMigrationVAB</a></h3>
<p>Total amount of tokens that can be migrated</p>
<pre><code class="language-solidity">uint256 public totalMigrationVAB = 0;
</code></pre>
<h3 id="votedtime"><a class="header" href="#votedtime">votedTime</a></h3>
<p><em>Mapping to track the time of votes for proposals
(user, proposalID) =&gt; voteTime needed for calculating rewards</em></p>
<pre><code class="language-solidity">mapping(address =&gt; mapping(uint256 =&gt; uint256)) private votedTime;
</code></pre>
<h3 id="stakeinfo"><a class="header" href="#stakeinfo">stakeInfo</a></h3>
<p>Mapping to store stake information for each address</p>
<pre><code class="language-solidity">mapping(address =&gt; Stake) public stakeInfo;
</code></pre>
<h3 id="receivedrewardamount"><a class="header" href="#receivedrewardamount">receivedRewardAmount</a></h3>
<p>Mapping to track the amount of rewards received by each staker</p>
<pre><code class="language-solidity">mapping(address =&gt; uint256) public receivedRewardAmount;
</code></pre>
<h3 id="userrentinfo"><a class="header" href="#userrentinfo">userRentInfo</a></h3>
<p>Mapping to store rental information for each user</p>
<pre><code class="language-solidity">mapping(address =&gt; UserRent) public userRentInfo;
</code></pre>
<h3 id="minproposalindex"><a class="header" href="#minproposalindex">minProposalIndex</a></h3>
<p>Mapping to track the minimum proposal index for each address</p>
<pre><code class="language-solidity">mapping(address =&gt; uint256) public minProposalIndex;
</code></pre>
<h3 id="proposalcount"><a class="header" href="#proposalcount">proposalCount</a></h3>
<p>Counter to keep track of the number of proposals</p>
<p>Count starts from 1</p>
<pre><code class="language-solidity">Counters.Counter public proposalCount;
</code></pre>
<h3 id="stakermap"><a class="header" href="#stakermap">stakerMap</a></h3>
<p><em>Struct to store staker information</em></p>
<pre><code class="language-solidity">Staker private stakerMap;
</code></pre>
<h3 id="propslist"><a class="header" href="#propslist">propsList</a></h3>
<p><em>Array to store proposal information, needed for calculating rewards</em></p>
<pre><code class="language-solidity">Props[] private propsList;
</code></pre>
<h2 id="functions-5"><a class="header" href="#functions-5">Functions</a></h2>
<h3 id="onlyvote-2"><a class="header" href="#onlyvote-2">onlyVote</a></h3>
<p><em>Restricts access to the Vote contract.</em></p>
<pre><code class="language-solidity">modifier onlyVote();
</code></pre>
<h3 id="onlydao-1"><a class="header" href="#onlydao-1">onlyDAO</a></h3>
<p><em>Restricts access to the VabbleDAO contract.</em></p>
<pre><code class="language-solidity">modifier onlyDAO();
</code></pre>
<h3 id="onlyauditor-4"><a class="header" href="#onlyauditor-4">onlyAuditor</a></h3>
<p><em>Restricts access to the current Auditor.</em></p>
<pre><code class="language-solidity">modifier onlyAuditor();
</code></pre>
<h3 id="onlydeployer-3"><a class="header" href="#onlydeployer-3">onlyDeployer</a></h3>
<p><em>Restricts access to the deployer of the Ownable contract.</em></p>
<pre><code class="language-solidity">modifier onlyDeployer();
</code></pre>
<h3 id="onlynormal"><a class="header" href="#onlynormal">onlyNormal</a></h3>
<p><em>Restricts access during migration.</em></p>
<pre><code class="language-solidity">modifier onlyNormal();
</code></pre>
<h3 id="constructor-5"><a class="header" href="#constructor-5">constructor</a></h3>
<p><em>Constructor function to initialize the StakingPool contract.</em></p>
<pre><code class="language-solidity">constructor(address _ownable);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_ownable</code></td><td><code>address</code></td><td>Address of the Ownable contract</td></tr>
</tbody></table>
</div>
<h3 id="initialize-1"><a class="header" href="#initialize-1">initialize</a></h3>
<p>Initializes the StakingPool contract, can only be called by the Deployer</p>
<pre><code class="language-solidity">function initialize(address _vabbleDAO, address _property, address _vote) external onlyDeployer;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_vabbleDAO</code></td><td><code>address</code></td><td>Address of the VabbleDAO contract</td></tr>
<tr><td><code>_property</code></td><td><code>address</code></td><td>Address of the Property contract</td></tr>
<tr><td><code>_vote</code></td><td><code>address</code></td><td>Address of the Vote contract</td></tr>
</tbody></table>
</div>
<h3 id="addrewardtopool"><a class="header" href="#addrewardtopool">addRewardToPool</a></h3>
<p>Add reward token (VAB) to the StakingPool</p>
<p><em>Should be called before users start staking in order to generate staking rewards</em></p>
<p><em>This can't be called when a migration has started</em></p>
<pre><code class="language-solidity">function addRewardToPool(uint256 _amount) external onlyNormal nonReentrant;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_amount</code></td><td><code>uint256</code></td><td>Amount of VAB tokens to add as reward</td></tr>
</tbody></table>
</div>
<h3 id="stakevab"><a class="header" href="#stakevab">stakeVAB</a></h3>
<p>Stake VAB token to the StakingPool to earn rewards and participate in the Governance</p>
<p><em>A user turns in to a staker when they stake their tokens</em></p>
<p><em>When a user stakes for the first time we add his address to the <code>stakerMap</code></em></p>
<p><em>This can't be called when a migration has started</em></p>
<pre><code class="language-solidity">function stakeVAB(uint256 _amount) external onlyNormal nonReentrant;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_amount</code></td><td><code>uint256</code></td><td>Amount of VAB tokens to stake, must be greater than 1 Token</td></tr>
</tbody></table>
</div>
<h3 id="unstakevab"><a class="header" href="#unstakevab">unstakeVAB</a></h3>
<p>Unstake VAB tokens after the correct time period has elapsed or a migration has started.</p>
<p><em>The lock period of the tokens is a Governance property that can be changed through a proposal.</em></p>
<p><em>This will transfer the stake amount + realized rewards to the user.</em></p>
<p><em>This will remove the staker from the <code>stakerMap</code> when he unstakes all tokens.</em></p>
<pre><code class="language-solidity">function unstakeVAB(uint256 _amount) external nonReentrant;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_amount</code></td><td><code>uint256</code></td><td>Amount of VAB tokens to unstake</td></tr>
</tbody></table>
</div>
<h3 id="withdrawreward"><a class="header" href="#withdrawreward">withdrawReward</a></h3>
<p>Withdraw Rewards without unstaking VAB tokens</p>
<p><em>This will lock the staked tokens for the duration of the lock period again</em></p>
<p><em>There must be rewards in the StakingPool to withdraw</em></p>
<pre><code class="language-solidity">function withdrawReward(uint256 _isCompound) external nonReentrant;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_isCompound</code></td><td><code>uint256</code></td><td>can either be 1 to compound rewards or 0 to withdraw the rewards</td></tr>
</tbody></table>
</div>
<h3 id="depositvab"><a class="header" href="#depositvab">depositVAB</a></h3>
<p>Users on the streaming portal need to deposit VAB used for renting films</p>
<p><em>This will update the userRentInfo for the given user.</em></p>
<p><em>This can't be called when a migration has started.</em></p>
<pre><code class="language-solidity">function depositVAB(uint256 _amount) external onlyNormal nonReentrant;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_amount</code></td><td><code>uint256</code></td><td>Amount of VAB tokens to deposit</td></tr>
</tbody></table>
</div>
<h3 id="pendingwithdraw"><a class="header" href="#pendingwithdraw">pendingWithdraw</a></h3>
<p>Request a withdrawal of VAB tokens from the streaming portal</p>
<p><em>this is the counter part of the <code>depositVAB</code> function</em></p>
<p><em>users can only request one withdrawal at a time, then the Auditor needs to approve or deny the withdraw
request</em></p>
<pre><code class="language-solidity">function pendingWithdraw(uint256 _amount) external nonReentrant;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_amount</code></td><td><code>uint256</code></td><td>Amount of VAB tokens to withdraw</td></tr>
</tbody></table>
</div>
<h3 id="approvependingwithdraw"><a class="header" href="#approvependingwithdraw">approvePendingWithdraw</a></h3>
<p>Approve pending withdrawals of given users by Auditor</p>
<p><em>A user has to call <code>pendingWithdraw</code> before</em></p>
<pre><code class="language-solidity">function approvePendingWithdraw(address[] calldata _customers) external onlyAuditor nonReentrant;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_customers</code></td><td><code>address[]</code></td><td>Array of user addresses</td></tr>
</tbody></table>
</div>
<h3 id="denypendingwithdraw"><a class="header" href="#denypendingwithdraw">denyPendingWithdraw</a></h3>
<p>Deny pending withdrawal of given users by Auditor</p>
<pre><code class="language-solidity">function denyPendingWithdraw(address[] calldata _customers) external onlyAuditor nonReentrant;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_customers</code></td><td><code>address[]</code></td><td>Array of user addresses</td></tr>
</tbody></table>
</div>
<h3 id="sendvab"><a class="header" href="#sendvab">sendVAB</a></h3>
<p>Send VAB tokens from the given users to the given address</p>
<p><em>This will be called from the VabbleDAO contract function <code>allocateToPool</code> by the Auditor</em></p>
<p><em>The Auditor calculates what a user has to pay</em></p>
<pre><code class="language-solidity">function sendVAB(
    address[] calldata _users,
    address _to,
    uint256[] calldata _amounts
)
    external
    onlyDAO
    returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_users</code></td><td><code>address[]</code></td><td>Array of user addresses</td></tr>
<tr><td><code>_to</code></td><td><code>address</code></td><td>Address to send tokens to</td></tr>
<tr><td><code>_amounts</code></td><td><code>uint256[]</code></td><td>Array of amounts to transfer</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>sum Total amount of VAB tokens transferred</td></tr>
</tbody></table>
</div>
<h3 id="calcmigrationvab"><a class="header" href="#calcmigrationvab">calcMigrationVAB</a></h3>
<p>Calculate VAB amount able to be migrated and for each staker to receive</p>
<p><em>This can only be called by the <code>Property::updateGovProposal()</code> function.</em></p>
<p><em>After a proposal to change the reward Address has passed Governance Voting, we calculate the total VAB we
can migrate to a new address. All users should receive their outstanding VAB rewards.</em></p>
<p><em>After calling this function the migrationStatus will be set to 1 and stakers wont receive any new rewards.</em></p>
<p><em>All stakers can immediately unstake their VAB.</em></p>
<pre><code class="language-solidity">function calcMigrationVAB() external onlyNormal nonReentrant;
</code></pre>
<h3 id="withdrawallfund"><a class="header" href="#withdrawallfund">withdrawAllFund</a></h3>
<p>Transfer all funds from the StakingPool, EdgePool and StudioPool to a new address</p>
<p><em>This will be called by the Auditor after a proposal to change the reward Address
<code>Property::proposalRewardFund()</code> has passed Governance Voting and has been finalized.</em></p>
<p><em>The <code>to</code> address is the address voted for by Governance.</em></p>
<p><em>This can only be called after <code>calcMigrationVAB</code>.</em></p>
<p><em>All VAB tokens will be transfered and the migration status will be updated to 2 (ended).</em></p>
<pre><code class="language-solidity">function withdrawAllFund() external onlyAuditor nonReentrant;
</code></pre>
<h3 id="addvoteddata"><a class="header" href="#addvoteddata">addVotedData</a></h3>
<p>Add voted data for a staker when they vote on (Governance / Film) proposals</p>
<p><em>We need this so we can track if a user has voted on a proposal in order to calculate rewards</em></p>
<pre><code class="language-solidity">function addVotedData(address _user, uint256 _time, uint256 _proposalID) external onlyVote;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_user</code></td><td><code>address</code></td><td>Address of the user</td></tr>
<tr><td><code>_time</code></td><td><code>uint256</code></td><td>Time of the vote</td></tr>
<tr><td><code>_proposalID</code></td><td><code>uint256</code></td><td>ID of the proposal</td></tr>
</tbody></table>
</div>
<h3 id="updatelastfundproposalcreatetime"><a class="header" href="#updatelastfundproposalcreatetime">updateLastfundProposalCreateTime</a></h3>
<p>Update the last creation time of a film proposal that is for funding</p>
<pre><code class="language-solidity">function updateLastfundProposalCreateTime(uint256 _time) external onlyDAO;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_time</code></td><td><code>uint256</code></td><td>New creation time</td></tr>
</tbody></table>
</div>
<h3 id="addproposaldata"><a class="header" href="#addproposaldata">addProposalData</a></h3>
<p>Add proposal data used for calculating staking rewards</p>
<p><em>This must be called when a Governance / Film proposal is created</em></p>
<pre><code class="language-solidity">function addProposalData(address _creator, uint256 _cTime, uint256 _period) external returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_creator</code></td><td><code>address</code></td><td>Address of the proposal creator</td></tr>
<tr><td><code>_cTime</code></td><td><code>uint256</code></td><td>Creation time of the proposal</td></tr>
<tr><td><code>_period</code></td><td><code>uint256</code></td><td>Vote period of the proposal</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>proposalID ID of the new proposal</td></tr>
</tbody></table>
</div>
<h3 id="checkallocatetopool"><a class="header" href="#checkallocatetopool">checkAllocateToPool</a></h3>
<p>Function to validate if <code>sendVAB()</code> can be called with the given arguments</p>
<p><em>Should be called before <code>VabbleDAO::allocateToPool()</code> to ensure that the arguments are valid</em></p>
<pre><code class="language-solidity">function checkAllocateToPool(address[] calldata _users, uint256[] calldata _amounts) external view returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_users</code></td><td><code>address[]</code></td><td>Array of user addresses</td></tr>
<tr><td><code>_amounts</code></td><td><code>uint256[]</code></td><td>Array of amounts to allocate</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>bool True if allocation is valid, otherwise false</td></tr>
</tbody></table>
</div>
<h3 id="checkdenypendingwithdraw"><a class="header" href="#checkdenypendingwithdraw">checkDenyPendingWithDraw</a></h3>
<p>Check if pending withdrawals can be denied</p>
<p><em>Should be called before <code>denyPendingWithdraw()</code></em></p>
<pre><code class="language-solidity">function checkDenyPendingWithDraw(address[] calldata _customers) external view returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_customers</code></td><td><code>address[]</code></td><td>Array of user addresses</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>bool True if withdrawals can be denied, otherwise false</td></tr>
</tbody></table>
</div>
<h3 id="checkapprovependingwithdraw"><a class="header" href="#checkapprovependingwithdraw">checkApprovePendingWithdraw</a></h3>
<p>Check if pending withdrawals can be approved</p>
<p><em>Should be called before <code>approvePendingWithdraw()</code></em></p>
<pre><code class="language-solidity">function checkApprovePendingWithdraw(address[] calldata _customers) external view returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_customers</code></td><td><code>address[]</code></td><td>Array of user addresses</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>bool True if withdrawals can be approved, otherwise false</td></tr>
</tbody></table>
</div>
<h3 id="calculateapr"><a class="header" href="#calculateapr">calculateAPR</a></h3>
<p>Calculate APR (Annual Percentage Rate) for staking/pending rewards</p>
<pre><code class="language-solidity">function calculateAPR(
    uint256 _period,
    uint256 _stakeAmount,
    uint256 _proposalCount,
    uint256 _voteCount,
    bool isBoardMember
)
    external
    view
    returns (uint256 amount_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_period</code></td><td><code>uint256</code></td><td>The staking period in days (e.g., 2 days, 32 days, 365 days)</td></tr>
<tr><td><code>_stakeAmount</code></td><td><code>uint256</code></td><td>The amount of VAB staked (e.g., 100 VAB)</td></tr>
<tr><td><code>_proposalCount</code></td><td><code>uint256</code></td><td>The number of proposals during the staking period</td></tr>
<tr><td><code>_voteCount</code></td><td><code>uint256</code></td><td>The number of votes cast by the staker during the staking period</td></tr>
<tr><td><code>isBoardMember</code></td><td><code>bool</code></td><td>Indicates whether the staker is a film board member</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>amount_</code></td><td><code>uint256</code></td><td>The calculated APR amount for the specified staking period and conditions</td></tr>
</tbody></table>
</div>
<h3 id="getstakeamount"><a class="header" href="#getstakeamount">getStakeAmount</a></h3>
<p>Get VAB staking amount for an address</p>
<pre><code class="language-solidity">function getStakeAmount(address _user) external view returns (uint256 amount_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_user</code></td><td><code>address</code></td><td>The address of the user</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>amount_</code></td><td><code>uint256</code></td><td>The staking amount of the user</td></tr>
</tbody></table>
</div>
<h3 id="getrentvabamount"><a class="header" href="#getrentvabamount">getRentVABAmount</a></h3>
<p>Get user rent VAB amoun</p>
<p><em>This is the amount that was deposited on the streaming portal used to rent films</em></p>
<pre><code class="language-solidity">function getRentVABAmount(address _user) external view returns (uint256 amount_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_user</code></td><td><code>address</code></td><td>The address of the user</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>amount_</code></td><td><code>uint256</code></td><td>The VAB amount of the user</td></tr>
</tbody></table>
</div>
<h3 id="getlimitcount"><a class="header" href="#getlimitcount">getLimitCount</a></h3>
<p>Get minimum amount of stakers that needs to vote for a proposal to pass</p>
<p><em>This is a threshold for proposals in order to pass</em></p>
<pre><code class="language-solidity">function getLimitCount() external view returns (uint256 count_);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>count_</code></td><td><code>uint256</code></td><td>The count of stakers for voting</td></tr>
</tbody></table>
</div>
<h3 id="getwithdrawabletime"><a class="header" href="#getwithdrawabletime">getWithdrawableTime</a></h3>
<p>Get the time when a staker can withdraw / unstake his VAB</p>
<pre><code class="language-solidity">function getWithdrawableTime(address _user) external view returns (uint256 time_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_user</code></td><td><code>address</code></td><td>The address of the user</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>time_</code></td><td><code>uint256</code></td><td>The time when the user can withdraw their stake</td></tr>
</tbody></table>
</div>
<h3 id="getstakerlist"><a class="header" href="#getstakerlist">getStakerList</a></h3>
<p>Get the list of all stakers</p>
<pre><code class="language-solidity">function getStakerList() external view returns (address[] memory);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address[]</code></td><td>An array of addresses representing all stakers</td></tr>
</tbody></table>
</div>
<h3 id="calcrewardamount"><a class="header" href="#calcrewardamount">calcRewardAmount</a></h3>
<p>Calculate the VAB reward amount for a user including previous rewards</p>
<p><em>When a migration has started returns the outstanding rewards and doesn't generate new rewards</em></p>
<pre><code class="language-solidity">function calcRewardAmount(address _user) public view returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_user</code></td><td><code>address</code></td><td>The address of the user</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>The total reward amount for the user</td></tr>
</tbody></table>
</div>
<h3 id="__calcproposaltimeintervals"><a class="header" href="#__calcproposaltimeintervals">__calcProposalTimeIntervals</a></h3>
<p>Calculate the proposal time intervals for a user.
This function computes the start and end times of all proposals that overlap with the staking period of a user.
The resulting array includes the user's stake time, the start and end times of the relevant proposals, and the
current block timestamp.</p>
<p><em>The function retrieves proposals from the <code>propsList</code> array and checks if their end time is greater than or
equal to the user's stake time.
It constructs an array containing the user's stake time, the start and end times of the overlapping proposals,
and the current block timestamp.</em></p>
<pre><code class="language-solidity">function __calcProposalTimeIntervals(address _user) public view returns (uint256[] memory times_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_user</code></td><td><code>address</code></td><td>The address of the user for whom the proposal time intervals are calculated.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>times_</code></td><td><code>uint256[]</code></td><td>An array of timestamps representing the proposal time intervals. The array is sorted in ascending order and includes: - The user's stake time at index 0. - The start and end times of the overlapping proposals. - The current block timestamp as the last element.</td></tr>
</tbody></table>
</div>
<h3 id="__getproposalvotecount"><a class="header" href="#__getproposalvotecount">__getProposalVoteCount</a></h3>
<p>Get the count of proposals, votes, and pending votes within a specific time interval for a user.
This function calculates the number of proposals, the number of votes cast by the user, and the number of pending
votes within a specified time interval.</p>
<p><em>The function iterates through the <code>propsList</code> array starting from `minIndex,
and counts proposals whose creation time falls within the interval [_start, _end].
It also counts the number of votes cast by the user during this period and pending votes.</em></p>
<pre><code class="language-solidity">function __getProposalVoteCount(
    address _user,
    uint256 minIndex,
    uint256 _start,
    uint256 _end
)
    public
    view
    returns (uint256, uint256, uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_user</code></td><td><code>address</code></td><td>The address of the user for whom the vote count is calculated.</td></tr>
<tr><td><code>minIndex</code></td><td><code>uint256</code></td><td>The minimum index of the proposals to consider.</td></tr>
<tr><td><code>_start</code></td><td><code>uint256</code></td><td>The start time of the interval in which the votes are counted.</td></tr>
<tr><td><code>_end</code></td><td><code>uint256</code></td><td>The end time of the interval in which the votes are counted.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>pCount The total number of proposals within the interval.</td></tr>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>vCount The number of votes cast by the user within the interval.</td></tr>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>pendingVoteCount The number of pending votes within the interval.</td></tr>
</tbody></table>
</div>
<h3 id="calcrealizedrewards"><a class="header" href="#calcrealizedrewards">calcRealizedRewards</a></h3>
<p>Calculate the realized rewards for a user
This function calculates the realized rewards for a user based on the proposals they have voted on and the
intervals between proposals within the staking period.</p>
<pre><code class="language-solidity">function calcRealizedRewards(address _user) public view returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_user</code></td><td><code>address</code></td><td>The address of the user for whom the realized rewards are being calculated.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>realizeReward The total realized rewards for the user.</td></tr>
</tbody></table>
</div>
<h3 id="calcpendingrewards"><a class="header" href="#calcpendingrewards">calcPendingRewards</a></h3>
<p>Calculate the pending rewards for a user
This function calculates the pending rewards for a user based on the proposals they are yet to vote on within the
specified intervals between proposals within the staking period.</p>
<pre><code class="language-solidity">function calcPendingRewards(address _user) public view returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_user</code></td><td><code>address</code></td><td>The address of the user for whom the pending rewards are being calculated.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>pendingReward The total pending rewards for the user.</td></tr>
</tbody></table>
</div>
<h3 id="stakercount"><a class="header" href="#stakercount">stakerCount</a></h3>
<p>Get the count of stakers</p>
<pre><code class="language-solidity">function stakerCount() public view returns (uint256);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>The total number of stakers</td></tr>
</tbody></table>
</div>
<h3 id="getownableaddress"><a class="header" href="#getownableaddress">getOwnableAddress</a></h3>
<p>Get the address of the Ownable contract</p>
<pre><code class="language-solidity">function getOwnableAddress() public view returns (address);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td>The address of the Ownable contract</td></tr>
</tbody></table>
</div>
<h3 id="getvoteaddress-1"><a class="header" href="#getvoteaddress-1">getVoteAddress</a></h3>
<p>Get the address of the Vote contract</p>
<pre><code class="language-solidity">function getVoteAddress() public view returns (address);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td>The address of the Vote contract</td></tr>
</tbody></table>
</div>
<h3 id="getvabbledaoaddress"><a class="header" href="#getvabbledaoaddress">getVabbleDaoAddress</a></h3>
<p>Get the address of the VabbleDAO contract</p>
<pre><code class="language-solidity">function getVabbleDaoAddress() public view returns (address);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td>The address of the VabbleDAO contract</td></tr>
</tbody></table>
</div>
<h3 id="getpropertyaddress"><a class="header" href="#getpropertyaddress">getPropertyAddress</a></h3>
<p>Get the address of the Property contract</p>
<pre><code class="language-solidity">function getPropertyAddress() public view returns (address);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td>The address of the Property contract</td></tr>
</tbody></table>
</div>
<h3 id="__withdrawreward"><a class="header" href="#__withdrawreward">__withdrawReward</a></h3>
<p><em>Transfer reward amount to the user and update relevant states
This function handles the transfer of the reward amount to the user, updates the total reward amount,
received reward amount, and the user's stake information. It also emits the RewardWithdraw event
and updates the minimum proposal index for the user.</em></p>
<pre><code class="language-solidity">function __withdrawReward(uint256 _amount) private;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_amount</code></td><td><code>uint256</code></td><td>The amount of reward to be withdrawn</td></tr>
</tbody></table>
</div>
<h3 id="__updateminproposalindex"><a class="header" href="#__updateminproposalindex">__updateMinProposalIndex</a></h3>
<p><em>Update the minimum proposal index for a user
This function updates the minimum proposal index for a user by iterating through the proposals
and finding the first proposal whose end time is greater than or equal to the user's stake time.</em></p>
<pre><code class="language-solidity">function __updateMinProposalIndex(address _user) private;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_user</code></td><td><code>address</code></td><td>The address of the user whose minimum proposal index is being updated</td></tr>
</tbody></table>
</div>
<h3 id="__stakerset"><a class="header" href="#__stakerset">__stakerSet</a></h3>
<p><em>Add a staker to the staker map
This function adds a staker to the staker map if they are not already present.</em></p>
<pre><code class="language-solidity">function __stakerSet(address key) private;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>key</code></td><td><code>address</code></td><td>The address of the staker to be added</td></tr>
</tbody></table>
</div>
<h3 id="__stakerremove"><a class="header" href="#__stakerremove">__stakerRemove</a></h3>
<p><em>Remove a staker from the staker map
This function removes a staker from the staker map if they are present.</em></p>
<pre><code class="language-solidity">function __stakerRemove(address key) private;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>key</code></td><td><code>address</code></td><td>The address of the staker to be removed</td></tr>
</tbody></table>
</div>
<h3 id="__transfervabwithdraw"><a class="header" href="#__transfervabwithdraw">__transferVABWithdraw</a></h3>
<p><em>Transfer VAB tokens to fulfill a user's withdrawal request on the streaming portal</em></p>
<pre><code class="language-solidity">function __transferVABWithdraw(address _to) private returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_to</code></td><td><code>address</code></td><td>The address of the user to whom the VAB tokens are being transferred</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>payAmount The amount of VAB tokens transferred to the user</td></tr>
</tbody></table>
</div>
<h3 id="__calcrewards"><a class="header" href="#__calcrewards">__calcRewards</a></h3>
<p><em>Calculate the rewards for a user within a specific time period
This function calculates the rewards for a user based on their stake amount and the time period specified.
If the user is a film board member, additional rewards are included.</em></p>
<pre><code class="language-solidity">function __calcRewards(address _user, uint256 startTime, uint256 endTime) private view returns (uint256 amount_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_user</code></td><td><code>address</code></td><td>The address of the user for whom the rewards are being calculated</td></tr>
<tr><td><code>startTime</code></td><td><code>uint256</code></td><td>The start time of the reward calculation period</td></tr>
<tr><td><code>endTime</code></td><td><code>uint256</code></td><td>The end time of the reward calculation period</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>amount_</code></td><td><code>uint256</code></td><td>The calculated reward amount for the user</td></tr>
</tbody></table>
</div>
<h3 id="__rewardpercent"><a class="header" href="#__rewardpercent">__rewardPercent</a></h3>
<p><em>Calculate the reward percentage based on the staking amount
This function calculates the reward percentage for a user based on their staking amount
and the total staking amount.</em></p>
<pre><code class="language-solidity">function __rewardPercent(uint256 _stakingAmount) private view returns (uint256 percent_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_stakingAmount</code></td><td><code>uint256</code></td><td>The amount staked by the user</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>percent_</code></td><td><code>uint256</code></td><td>The calculated reward percentage for the user</td></tr>
</tbody></table>
</div>
<h2 id="events-5"><a class="header" href="#events-5">Events</a></h2>
<h3 id="tokenstaked"><a class="header" href="#tokenstaked">TokenStaked</a></h3>
<p><em>Emitted when a staker stakes VAB tokens.</em></p>
<pre><code class="language-solidity">event TokenStaked(address indexed staker, uint256 stakeAmount);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>staker</code></td><td><code>address</code></td><td>The address of the staker.</td></tr>
<tr><td><code>stakeAmount</code></td><td><code>uint256</code></td><td>The amount of VAB tokens staked.</td></tr>
</tbody></table>
</div>
<h3 id="tokenunstaked"><a class="header" href="#tokenunstaked">TokenUnstaked</a></h3>
<p><em>Emitted when a staker unstakes VAB tokens.</em></p>
<pre><code class="language-solidity">event TokenUnstaked(address indexed unstaker, uint256 unStakeAmount);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>unstaker</code></td><td><code>address</code></td><td>The address of the staker.</td></tr>
<tr><td><code>unStakeAmount</code></td><td><code>uint256</code></td><td>The amount of VAB tokens unstaked.</td></tr>
</tbody></table>
</div>
<h3 id="rewardwithdraw"><a class="header" href="#rewardwithdraw">RewardWithdraw</a></h3>
<p><em>Emitted when a staker withdraws rewards.</em></p>
<pre><code class="language-solidity">event RewardWithdraw(address indexed staker, uint256 rewardAmount);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>staker</code></td><td><code>address</code></td><td>The address of the staker.</td></tr>
<tr><td><code>rewardAmount</code></td><td><code>uint256</code></td><td>The amount of rewards withdrawn.</td></tr>
</tbody></table>
</div>
<h3 id="rewardcontinued"><a class="header" href="#rewardcontinued">RewardContinued</a></h3>
<p><em>Emitted when a staker continues to receive rewards, either by withdrawing or compounding.</em></p>
<pre><code class="language-solidity">event RewardContinued(address indexed staker, uint256 isCompound, uint256 rewardAmount);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>staker</code></td><td><code>address</code></td><td>The address of the staker.</td></tr>
<tr><td><code>isCompound</code></td><td><code>uint256</code></td><td>Flag indicating if the rewards are compounded (1) or withdrawn (0).</td></tr>
<tr><td><code>rewardAmount</code></td><td><code>uint256</code></td><td>The amount of rewards continued.</td></tr>
</tbody></table>
</div>
<h3 id="allfundwithdraw"><a class="header" href="#allfundwithdraw">AllFundWithdraw</a></h3>
<p><em>Emitted when all funds are withdrawn from the contract.</em></p>
<pre><code class="language-solidity">event AllFundWithdraw(address to, uint256 amount);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>to</code></td><td><code>address</code></td><td>The address where the funds are withdrawn to.</td></tr>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>The total amount of funds withdrawn.</td></tr>
</tbody></table>
</div>
<h3 id="rewardadded"><a class="header" href="#rewardadded">RewardAdded</a></h3>
<p><em>Emitted when reward tokens are added to the pool.</em></p>
<pre><code class="language-solidity">event RewardAdded(uint256 totalRewardAmount, uint256 rewardAmount, address indexed contributor);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>totalRewardAmount</code></td><td><code>uint256</code></td><td>The total reward amount after addition.</td></tr>
<tr><td><code>rewardAmount</code></td><td><code>uint256</code></td><td>The amount of rewards added.</td></tr>
<tr><td><code>contributor</code></td><td><code>address</code></td><td>The address of the contributor who added the rewards.</td></tr>
</tbody></table>
</div>
<h3 id="vabdeposited"><a class="header" href="#vabdeposited">VABDeposited</a></h3>
<p><em>Emitted when VAB tokens are deposited by a user.</em></p>
<pre><code class="language-solidity">event VABDeposited(address indexed customer, uint256 amount);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>customer</code></td><td><code>address</code></td><td>The address of the user who deposited VAB tokens.</td></tr>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>The amount of VAB tokens deposited.</td></tr>
</tbody></table>
</div>
<h3 id="withdrawpending"><a class="header" href="#withdrawpending">WithdrawPending</a></h3>
<p><em>Emitted when a pending withdrawal request is made by a user.</em></p>
<pre><code class="language-solidity">event WithdrawPending(address indexed customer, uint256 amount);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>customer</code></td><td><code>address</code></td><td>The address of the user who made the pending withdrawal request.</td></tr>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>The amount of VAB tokens requested for withdrawal.</td></tr>
</tbody></table>
</div>
<h3 id="pendingwithdrawapproved"><a class="header" href="#pendingwithdrawapproved">PendingWithdrawApproved</a></h3>
<p><em>Emitted when pending withdrawal requests are approved by the auditor.</em></p>
<pre><code class="language-solidity">event PendingWithdrawApproved(address[] customers, uint256[] withdrawAmounts);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>customers</code></td><td><code>address[]</code></td><td>An array of user addresses whose pending withdrawals are approved.</td></tr>
<tr><td><code>withdrawAmounts</code></td><td><code>uint256[]</code></td><td>An array of withdrawal amounts approved for each user.</td></tr>
</tbody></table>
</div>
<h3 id="pendingwithdrawdenied"><a class="header" href="#pendingwithdrawdenied">PendingWithdrawDenied</a></h3>
<p><em>Emitted when pending withdrawal requests are denied by the auditor.</em></p>
<pre><code class="language-solidity">event PendingWithdrawDenied(address[] customers);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>customers</code></td><td><code>address[]</code></td><td>An array of user addresses whose pending withdrawals are denied.</td></tr>
</tbody></table>
</div>
<h2 id="structs-4"><a class="header" href="#structs-4">Structs</a></h2>
<h3 id="staker"><a class="header" href="#staker">Staker</a></h3>
<p><em>Struct for storing staker information.</em></p>
<pre><code class="language-solidity">struct Staker {
    address[] keys;
    mapping(address =&gt; uint256) indexOf;
}
</code></pre>
<p><strong>Properties</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>keys</code></td><td><code>address[]</code></td><td>Array of staker addresses.</td></tr>
<tr><td><code>indexOf</code></td><td><code>mapping(address =&gt; uint256)</code></td><td>Mapping of staker addresses to their index in the keys array.</td></tr>
</tbody></table>
</div>
<h3 id="stake"><a class="header" href="#stake">Stake</a></h3>
<p><em>Struct for storing staking information.</em></p>
<pre><code class="language-solidity">struct Stake {
    uint256 stakeAmount;
    uint256 stakeTime;
    uint256 outstandingReward;
}
</code></pre>
<p><strong>Properties</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>stakeAmount</code></td><td><code>uint256</code></td><td>The amount of VAB tokens staked.</td></tr>
<tr><td><code>stakeTime</code></td><td><code>uint256</code></td><td>The timestamp when the stake was made.</td></tr>
<tr><td><code>outstandingReward</code></td><td><code>uint256</code></td><td>The amount of outstanding rewards for the staker reserved after migration has started</td></tr>
</tbody></table>
</div>
<h3 id="userrent"><a class="header" href="#userrent">UserRent</a></h3>
<p><em>Struct for storing user rent information from the streaming portal.</em></p>
<pre><code class="language-solidity">struct UserRent {
    uint256 vabAmount;
    uint256 withdrawAmount;
    bool pending;
}
</code></pre>
<p><strong>Properties</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>vabAmount</code></td><td><code>uint256</code></td><td>The amount of VAB tokens deposited by the user.</td></tr>
<tr><td><code>withdrawAmount</code></td><td><code>uint256</code></td><td>The amount of VAB tokens requested for withdrawal by the user.</td></tr>
<tr><td><code>pending</code></td><td><code>bool</code></td><td>Flag indicating if there's a pending withdrawal request for the user.</td></tr>
</tbody></table>
</div>
<h3 id="props"><a class="header" href="#props">Props</a></h3>
<p><em>Struct for storing proposal information.</em></p>
<pre><code class="language-solidity">struct Props {
    address creator;
    uint256 cTime;
    uint256 period;
    uint256 proposalID;
}
</code></pre>
<p><strong>Properties</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>creator</code></td><td><code>address</code></td><td>The address of the proposal creator.</td></tr>
<tr><td><code>cTime</code></td><td><code>uint256</code></td><td>The creation time of the proposal.</td></tr>
<tr><td><code>period</code></td><td><code>uint256</code></td><td>The duration of the proposal.</td></tr>
<tr><td><code>proposalID</code></td><td><code>uint256</code></td><td>The ID of the proposal.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="subscription"><a class="header" href="#subscription">Subscription</a></h1>
<p><a href="https://github.com/Mill1995/VABDAO/blob/4914bdc306cbdb860037485ce4bcebbfdd390c9f/contracts/dao/Subscription.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
ReentrancyGuard</p>
<p><em>This contract facilitates subscription management for renting films on the streaming portal,
allowing users to activate subscriptions using allowed payment tokens and managing subscription periods.
The Auditor can add discount percentage for different subscription periods.
We allow subscriptions for (1, 3, 6, 12 months).</em></p>
<h2 id="state-variables-6"><a class="header" href="#state-variables-6">State Variables</a></h2>
<h3 id="ownable-5"><a class="header" href="#ownable-5">OWNABLE</a></h3>
<p><em>Address of the Ownablee contract</em></p>
<pre><code class="language-solidity">address private immutable OWNABLE;
</code></pre>
<h3 id="uni_helper-2"><a class="header" href="#uni_helper-2">UNI_HELPER</a></h3>
<p><em>Address of the UniHelper contract</em></p>
<pre><code class="language-solidity">address private immutable UNI_HELPER;
</code></pre>
<h3 id="dao_property-1"><a class="header" href="#dao_property-1">DAO_PROPERTY</a></h3>
<p><em>Address of the Property contract</em></p>
<pre><code class="language-solidity">address private immutable DAO_PROPERTY;
</code></pre>
<h3 id="period_unit"><a class="header" href="#period_unit">PERIOD_UNIT</a></h3>
<p><em>Fixed unit of a subscription period (30 days)</em></p>
<pre><code class="language-solidity">uint256 private constant PERIOD_UNIT = 30 days;
</code></pre>
<h3 id="percent40"><a class="header" href="#percent40">PERCENT40</a></h3>
<p><em>Constant representing 40% in scaled units</em></p>
<pre><code class="language-solidity">uint256 private constant PERCENT40 = 40 * 1e8;
</code></pre>
<h3 id="percent60"><a class="header" href="#percent60">PERCENT60</a></h3>
<p><em>Constant representing 60% in scaled units</em></p>
<pre><code class="language-solidity">uint256 private constant PERCENT60 = 60 * 1e8;
</code></pre>
<h3 id="discountlist"><a class="header" href="#discountlist">discountList</a></h3>
<p><em>Array holding discount percentages for different subscription durations</em></p>
<pre><code class="language-solidity">uint256[] private discountList;
</code></pre>
<h3 id="subscriptioninfo"><a class="header" href="#subscriptioninfo">subscriptionInfo</a></h3>
<p>Mapping to store user subscription information</p>
<pre><code class="language-solidity">mapping(address =&gt; UserSubscription) public subscriptionInfo;
</code></pre>
<h2 id="functions-6"><a class="header" href="#functions-6">Functions</a></h2>
<h3 id="onlyauditor-5"><a class="header" href="#onlyauditor-5">onlyAuditor</a></h3>
<p><em>Restricts access to the current Auditor.</em></p>
<pre><code class="language-solidity">modifier onlyAuditor();
</code></pre>
<h3 id="constructor-6"><a class="header" href="#constructor-6">constructor</a></h3>
<p><em>Constructor to initialize Subscription contract.</em></p>
<pre><code class="language-solidity">constructor(address _ownable, address _uniHelper, address _property, uint256[] memory _discountPercents);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_ownable</code></td><td><code>address</code></td><td>Address of the Ownablee contract.</td></tr>
<tr><td><code>_uniHelper</code></td><td><code>address</code></td><td>Address of the UniHelper contract.</td></tr>
<tr><td><code>_property</code></td><td><code>address</code></td><td>Address of the Property contract.</td></tr>
<tr><td><code>_discountPercents</code></td><td><code>uint256[]</code></td><td>Array of discount percentages for different subscription periods (3, 6, 12 months).</td></tr>
</tbody></table>
</div>
<h3 id="receive-1"><a class="header" href="#receive-1">receive</a></h3>
<pre><code class="language-solidity">receive() external payable;
</code></pre>
<h3 id="activesubscription"><a class="header" href="#activesubscription">activeSubscription</a></h3>
<p>active subscription(pay $1 monthly as ETH/USDC/USDT/VAB...) for renting the films</p>
<p>Activate a subscription using a specified token for a given period.</p>
<p><em>Allows users to activate a subscription by paying using ETH or allowed ERC20 tokens.</em></p>
<pre><code class="language-solidity">function activeSubscription(address _token, uint256 _period) external payable nonReentrant;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_token</code></td><td><code>address</code></td><td>Address of the payment token (ERC20) or address(0) for ETH.</td></tr>
<tr><td><code>_period</code></td><td><code>uint256</code></td><td>Subscription period in months (e.g., 1, 3, 6, 12).</td></tr>
</tbody></table>
</div>
<h3 id="adddiscountpercent"><a class="header" href="#adddiscountpercent">addDiscountPercent</a></h3>
<p>Add discount percentages for different subscription durations.</p>
<p><em>Only callable by the auditor.</em></p>
<pre><code class="language-solidity">function addDiscountPercent(uint256[] calldata _discountPercents) external onlyAuditor;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_discountPercents</code></td><td><code>uint256[]</code></td><td>Array of discount percentages for subscription periods (3, 6, 12 months). The array must contain exactly three elements.</td></tr>
</tbody></table>
</div>
<h3 id="getdiscountpercentlist"><a class="header" href="#getdiscountpercentlist">getDiscountPercentList</a></h3>
<p>Retrieve the current discount percentage list.</p>
<pre><code class="language-solidity">function getDiscountPercentList() external view returns (uint256[] memory list_);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>list_</code></td><td><code>uint256[]</code></td><td>Array of discount percentages for subscription periods (3, 6, 12 months).</td></tr>
</tbody></table>
</div>
<h3 id="getexpectedsubscriptionamount"><a class="header" href="#getexpectedsubscriptionamount">getExpectedSubscriptionAmount</a></h3>
<p>Calculate the expected token amount that a user should pay for activating the subscription.</p>
<pre><code class="language-solidity">function getExpectedSubscriptionAmount(address _token, uint256 _period) public view returns (uint256 expectAmount_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_token</code></td><td><code>address</code></td><td>Address of the payment token (ERC20) or address(0) for ETH.</td></tr>
<tr><td><code>_period</code></td><td><code>uint256</code></td><td>Subscription period in months (e.g., 1, 3, 6, 12).</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>expectAmount_</code></td><td><code>uint256</code></td><td>Expected token amount to be paid.</td></tr>
</tbody></table>
</div>
<h3 id="isactivedsubscription"><a class="header" href="#isactivedsubscription">isActivedSubscription</a></h3>
<p>Check if a customer has an active subscription.</p>
<pre><code class="language-solidity">function isActivedSubscription(address _customer) public view returns (bool active_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_customer</code></td><td><code>address</code></td><td>Address of the customer to check.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>active_</code></td><td><code>bool</code></td><td>Boolean indicating whether the customer has an active subscription.</td></tr>
</tbody></table>
</div>
<h2 id="events-6"><a class="header" href="#events-6">Events</a></h2>
<h3 id="subscriptionactivated"><a class="header" href="#subscriptionactivated">SubscriptionActivated</a></h3>
<p><em>Emitted when a subscription is successfully activated.</em></p>
<pre><code class="language-solidity">event SubscriptionActivated(address indexed customer, address token, uint256 period);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>customer</code></td><td><code>address</code></td><td>Address of the customer who activated the subscription.</td></tr>
<tr><td><code>token</code></td><td><code>address</code></td><td>Address of the payment token used for subscription.</td></tr>
<tr><td><code>period</code></td><td><code>uint256</code></td><td>Subscription period in months.</td></tr>
</tbody></table>
</div>
<h2 id="structs-5"><a class="header" href="#structs-5">Structs</a></h2>
<h3 id="usersubscription"><a class="header" href="#usersubscription">UserSubscription</a></h3>
<p><em>Struct representing a user's subscription details.</em></p>
<pre><code class="language-solidity">struct UserSubscription {
    uint256 activeTime;
    uint256 period;
    uint256 expireTime;
}
</code></pre>
<p><strong>Properties</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>activeTime</code></td><td><code>uint256</code></td><td>Timestamp when the subscription was activated.</td></tr>
<tr><td><code>period</code></td><td><code>uint256</code></td><td>Subscription period in months (e.g., 1 =&gt; 1 month, 3 =&gt; 3 months).</td></tr>
<tr><td><code>expireTime</code></td><td><code>uint256</code></td><td>Timestamp when the subscription expires.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="unihelper"><a class="header" href="#unihelper">UniHelper</a></h1>
<p><a href="https://github.com/Mill1995/VABDAO/blob/4914bdc306cbdb860037485ce4bcebbfdd390c9f/contracts/dao/UniHelper.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="contracts/dao/UniHelper.sol//contracts/interfaces/IUniHelper.sol/interface.IUniHelper.html">IUniHelper</a>, ReentrancyGuard</p>
<p>A contract facilitating token swaps between ERC20 tokens and ETH using Uniswap and Sushiswap.
This contract provides functionalities to:</p>
<ul>
<li>Set whitelisted Vabble contracts for interaction.</li>
<li>Swap ERC20 tokens for ETH and vice versa using Uniswap or Sushiswap.</li>
<li>Estimate amounts of incoming assets for a given deposit amount and assets.</li>
<li>Retrieve addresses of Uniswap V2 and Sushiswap routers and factories.</li>
<li>Check for the existence of liquidity pools on Uniswap or Sushiswap for given asset pairs.
The contract is initialized with the addresses of Uniswap and Sushiswap routers and factories,
and the Ownable contract address. Only the deployer of the Ownable contract can set whitelisted
Vabble contracts until the contract is initialized. Once initialized, Vabble contracts can call
specific functions to interact with this contract for token swaps and other operations.
This contract uses helper functions from external libraries and interfaces defined in other contracts,
such as <code>IUniswapV2Router</code>, <code>IUniswapV2Factory</code>, <code>IOwnablee</code>, <code>IUniHelper</code>, and <code>Helper</code>.</li>
</ul>
<p><em>The contract is designed to be non-upgradable with fixed addresses for routers and factories,
ensuring predictable behavior and security of asset swaps.</em></p>
<h2 id="state-variables-7"><a class="header" href="#state-variables-7">State Variables</a></h2>
<h3 id="uniswap2_router"><a class="header" href="#uniswap2_router">UNISWAP2_ROUTER</a></h3>
<p><em>The address of the UniswapV2 Router contract.</em></p>
<pre><code class="language-solidity">address private immutable UNISWAP2_ROUTER;
</code></pre>
<h3 id="uniswap2_factory"><a class="header" href="#uniswap2_factory">UNISWAP2_FACTORY</a></h3>
<p><em>The address of the UniswapV2 Factory contract.</em></p>
<pre><code class="language-solidity">address private immutable UNISWAP2_FACTORY;
</code></pre>
<h3 id="sushi_router"><a class="header" href="#sushi_router">SUSHI_ROUTER</a></h3>
<p><em>The address of the Sushiswap Router contract.</em></p>
<pre><code class="language-solidity">address private immutable SUSHI_ROUTER;
</code></pre>
<h3 id="sushi_factory"><a class="header" href="#sushi_factory">SUSHI_FACTORY</a></h3>
<p><em>The address of the Sushiswap Factory contract.</em></p>
<pre><code class="language-solidity">address private immutable SUSHI_FACTORY;
</code></pre>
<h3 id="ownable-6"><a class="header" href="#ownable-6">OWNABLE</a></h3>
<p><em>The address of the Ownable contract.</em></p>
<pre><code class="language-solidity">address private immutable OWNABLE;
</code></pre>
<h3 id="isvabblecontract"><a class="header" href="#isvabblecontract">isVabbleContract</a></h3>
<p><em>mapping to keep track of all Vabble contract addresses
allowed to interact with this contract</em></p>
<pre><code class="language-solidity">mapping(address =&gt; bool) public isVabbleContract;
</code></pre>
<h3 id="isinitialized"><a class="header" href="#isinitialized">isInitialized</a></h3>
<p><em>Boolean flag to indicate if the contract has been initialized</em></p>
<pre><code class="language-solidity">bool public isInitialized;
</code></pre>
<h2 id="functions-7"><a class="header" href="#functions-7">Functions</a></h2>
<h3 id="onlydeployer-4"><a class="header" href="#onlydeployer-4">onlyDeployer</a></h3>
<p><em>Restricts access to the deployer of the Ownable contract.</em></p>
<pre><code class="language-solidity">modifier onlyDeployer();
</code></pre>
<h3 id="constructor-7"><a class="header" href="#constructor-7">constructor</a></h3>
<p><em>Constructor to initialize contract with necessary addresses.</em></p>
<pre><code class="language-solidity">constructor(
    address _uniswap2Factory,
    address _uniswap2Router,
    address _sushiswapFactory,
    address _sushiswapRouter,
    address _ownable
);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_uniswap2Factory</code></td><td><code>address</code></td><td>The address of the Uniswap V2 factory.</td></tr>
<tr><td><code>_uniswap2Router</code></td><td><code>address</code></td><td>The address of the Uniswap V2 router.</td></tr>
<tr><td><code>_sushiswapFactory</code></td><td><code>address</code></td><td>The address of the Sushiswap factory.</td></tr>
<tr><td><code>_sushiswapRouter</code></td><td><code>address</code></td><td>The address of the Sushiswap router.</td></tr>
<tr><td><code>_ownable</code></td><td><code>address</code></td><td>The address of the Ownable contract.</td></tr>
</tbody></table>
</div>
<h3 id="receive-2"><a class="header" href="#receive-2">receive</a></h3>
<pre><code class="language-solidity">receive() external payable;
</code></pre>
<h3 id="setwhitelist"><a class="header" href="#setwhitelist">setWhiteList</a></h3>
<p>Sets the addresses of Vabble contracts for whitelist validation.</p>
<p><em>Only callable by the deployer until contract is initialized.</em></p>
<pre><code class="language-solidity">function setWhiteList(
    address _vabbleDAO,
    address _vabbleFund,
    address _subscription,
    address _factoryFilm,
    address _factorySub
)
    external
    onlyDeployer;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_vabbleDAO</code></td><td><code>address</code></td><td>The address of the VabbleDAO contract.</td></tr>
<tr><td><code>_vabbleFund</code></td><td><code>address</code></td><td>The address of the VabbleFund contract.</td></tr>
<tr><td><code>_subscription</code></td><td><code>address</code></td><td>The address of the Subscription contract.</td></tr>
<tr><td><code>_factoryFilm</code></td><td><code>address</code></td><td>The address of the FactoryFilmNFT contract.</td></tr>
<tr><td><code>_factorySub</code></td><td><code>address</code></td><td>The address of the FactorySubNFT contract.</td></tr>
</tbody></table>
</div>
<h3 id="swapasset"><a class="header" href="#swapasset">swapAsset</a></h3>
<p>Swaps an ERC20 token for another ERC20 token using Uniswap or Sushiswap.</p>
<pre><code class="language-solidity">function swapAsset(bytes calldata _swapArgs) external override nonReentrant returns (uint256 amount_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_swapArgs</code></td><td><code>bytes</code></td><td>Packed arguments including deposit amount, deposit asset address, and incoming asset address.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>amount_</code></td><td><code>uint256</code></td><td>The amount of tokens received after the swap.</td></tr>
</tbody></table>
</div>
<h3 id="expectedamount"><a class="header" href="#expectedamount">expectedAmount</a></h3>
<p>Estimates the amount of incoming asset received for a given deposit amount and assets.</p>
<pre><code class="language-solidity">function expectedAmount(
    uint256 _depositAmount,
    address _depositAsset,
    address _incomingAsset
)
    external
    view
    override
    returns (uint256 amount_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_depositAmount</code></td><td><code>uint256</code></td><td>The amount of deposit asset.</td></tr>
<tr><td><code>_depositAsset</code></td><td><code>address</code></td><td>The address of the deposit asset.</td></tr>
<tr><td><code>_incomingAsset</code></td><td><code>address</code></td><td>The address of the incoming asset.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>amount_</code></td><td><code>uint256</code></td><td>The estimated amount of incoming asset.</td></tr>
</tbody></table>
</div>
<h3 id="expectedamountfortest"><a class="header" href="#expectedamountfortest">expectedAmountForTest</a></h3>
<p>Estimates the amount of incoming asset received for a given deposit amount and assets (for testing
purposes).</p>
<pre><code class="language-solidity">function expectedAmountForTest(
    uint256 _depositAmount,
    address _depositAsset,
    address _incomingAsset
)
    external
    view
    returns (uint256 amount_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_depositAmount</code></td><td><code>uint256</code></td><td>The amount of deposit asset.</td></tr>
<tr><td><code>_depositAsset</code></td><td><code>address</code></td><td>The address of the deposit asset.</td></tr>
<tr><td><code>_incomingAsset</code></td><td><code>address</code></td><td>The address of the incoming asset.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>amount_</code></td><td><code>uint256</code></td><td>The estimated amount of incoming asset.</td></tr>
</tbody></table>
</div>
<h3 id="getuniswaprouter"><a class="header" href="#getuniswaprouter">getUniswapRouter</a></h3>
<p>Retrieves the address of the Uniswap V2 router.</p>
<pre><code class="language-solidity">function getUniswapRouter() external view returns (address router_);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>router_</code></td><td><code>address</code></td><td>The address of the Uniswap V2 router.</td></tr>
</tbody></table>
</div>
<h3 id="getuniswapfactory"><a class="header" href="#getuniswapfactory">getUniswapFactory</a></h3>
<p>Retrieves the address of the Uniswap V2 factory.</p>
<pre><code class="language-solidity">function getUniswapFactory() external view returns (address factory_);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>factory_</code></td><td><code>address</code></td><td>The address of the Uniswap V2 factory.</td></tr>
</tbody></table>
</div>
<h3 id="getsushifactory"><a class="header" href="#getsushifactory">getSushiFactory</a></h3>
<p>Retrieves the address of the Sushiswap factory.</p>
<pre><code class="language-solidity">function getSushiFactory() external view returns (address factory_);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>factory_</code></td><td><code>address</code></td><td>The address of the Sushiswap factory.</td></tr>
</tbody></table>
</div>
<h3 id="getsushirouter"><a class="header" href="#getsushirouter">getSushiRouter</a></h3>
<p>Retrieves the address of the Sushiswap router.</p>
<pre><code class="language-solidity">function getSushiRouter() external view returns (address router_);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>router_</code></td><td><code>address</code></td><td>The address of the Sushiswap router.</td></tr>
</tbody></table>
</div>
<h3 id="__swapethtotoken"><a class="header" href="#__swapethtotoken">__swapETHToToken</a></h3>
<p><em>Swaps ETH for an ERC20 token using a specified router and path.</em></p>
<p><em>This function performs a swap of ETH to an ERC20 token using Uniswap or Sushiswap.</em></p>
<pre><code class="language-solidity">function __swapETHToToken(
    uint256 _depositAmount,
    uint256 _expectedAmount,
    address _router,
    address[] memory _path
)
    private
    returns (uint256[] memory amounts_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_depositAmount</code></td><td><code>uint256</code></td><td>The amount of ETH to swap.</td></tr>
<tr><td><code>_expectedAmount</code></td><td><code>uint256</code></td><td>The expected amount of ERC20 token to receive.</td></tr>
<tr><td><code>_router</code></td><td><code>address</code></td><td>The address of the Uniswap or Sushiswap router.</td></tr>
<tr><td><code>_path</code></td><td><code>address[]</code></td><td>The path of tokens for the swap, starting from ETH.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>amounts_</code></td><td><code>uint256[]</code></td><td>An array of amounts received in the swap.</td></tr>
</tbody></table>
</div>
<h3 id="__swaptokentoeth"><a class="header" href="#__swaptokentoeth">__swapTokenToETH</a></h3>
<p><em>Swaps an ERC20 token for ETH using a specified router and path.</em></p>
<p><em>This function performs a swap of an ERC20 token to ETH using Uniswap or Sushiswap.</em></p>
<pre><code class="language-solidity">function __swapTokenToETH(
    uint256 _depositAmount,
    uint256 _expectedAmount,
    address _router,
    address[] memory _path
)
    private
    returns (uint256[] memory amounts_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_depositAmount</code></td><td><code>uint256</code></td><td>The amount of ERC20 token to swap.</td></tr>
<tr><td><code>_expectedAmount</code></td><td><code>uint256</code></td><td>The expected amount of ETH to receive.</td></tr>
<tr><td><code>_router</code></td><td><code>address</code></td><td>The address of the Uniswap or Sushiswap router.</td></tr>
<tr><td><code>_path</code></td><td><code>address[]</code></td><td>The path of tokens for the swap, starting from the ERC20 token.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>amounts_</code></td><td><code>uint256[]</code></td><td>An array of amounts received in the swap.</td></tr>
</tbody></table>
</div>
<h3 id="__approvemaxasneeded"><a class="header" href="#__approvemaxasneeded">__approveMaxAsNeeded</a></h3>
<p><em>Approves the maximum amount of an ERC20 token to a specified target.</em></p>
<p><em>This function ensures that the contract has approved enough tokens to perform transactions.</em></p>
<pre><code class="language-solidity">function __approveMaxAsNeeded(address _asset, address _target, uint256 _neededAmount) private;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_asset</code></td><td><code>address</code></td><td>The address of the ERC20 token.</td></tr>
<tr><td><code>_target</code></td><td><code>address</code></td><td>The address of the spender to approve.</td></tr>
<tr><td><code>_neededAmount</code></td><td><code>uint256</code></td><td>The amount of tokens needed to be approved.</td></tr>
</tbody></table>
</div>
<h3 id="__transferassettocaller"><a class="header" href="#__transferassettocaller">__transferAssetToCaller</a></h3>
<p><em>Transfers the entire contract balance of a specified asset to a caller.</em></p>
<p><em>This function safely transfers either ETH or ERC20 tokens to the caller.</em></p>
<pre><code class="language-solidity">function __transferAssetToCaller(address payable _target, address _asset) private;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_target</code></td><td><code>address payable</code></td><td>The address of the caller to receive the assets.</td></tr>
<tr><td><code>_asset</code></td><td><code>address</code></td><td>The address of the asset to transfer, or <code>address(0)</code> for ETH.</td></tr>
</tbody></table>
</div>
<h3 id="__checkpool"><a class="header" href="#__checkpool">__checkPool</a></h3>
<p><em>Checks for the existence of a liquidity pool on Uniswap or Sushiswap for given assets.</em></p>
<p><em>This function checks if a liquidity pool exists between <code>_depositAsset</code> and <code>_incomeAsset</code>.</em></p>
<pre><code class="language-solidity">function __checkPool(
    address _depositAsset,
    address _incomeAsset
)
    private
    view
    returns (address router, address[] memory path);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_depositAsset</code></td><td><code>address</code></td><td>The address of the deposit asset, or <code>address(0)</code> for ETH.</td></tr>
<tr><td><code>_incomeAsset</code></td><td><code>address</code></td><td>The address of the incoming asset, or <code>address(0)</code> for ETH.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>router</code></td><td><code>address</code></td><td>The address of the router where the pool exists, and path The token path of the pool.</td></tr>
<tr><td><code>path</code></td><td><code>address[]</code></td><td></td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="vabbledao"><a class="header" href="#vabbledao">VabbleDAO</a></h1>
<p><a href="https://github.com/Mill1995/VABDAO/blob/4914bdc306cbdb860037485ce4bcebbfdd390c9f/contracts/dao/VabbleDAO.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
ReentrancyGuard</p>
<p>The VabbleDAO contract manages the creation and updating of film proposals,
reward distribution, payment processing,
and claims related to film projects within the Vabble decentralized platform.</p>
<p>*This contract contains various functions to handle film proposals, finalize films,
and distribute rewards to both studio payees and investors. It interacts with multiple
external contracts such as Property, Ownablee, UniHelper, StakingPool, and VabbleFund
to perform these operations. The contract ensures proper reward calculation and distribution
based on the film's status and the amount raised.
Key Features:</p>
<ul>
<li>Film proposal creation and approval times tracking.</li>
<li>Reward calculation and distribution for both studio payees and investors.</li>
<li>Finalization of film rewards based on status (listing or funding).</li>
<li>Secure handling of proposal fees and reward claims.*</li>
</ul>
<h2 id="state-variables-8"><a class="header" href="#state-variables-8">State Variables</a></h2>
<h3 id="ownable-7"><a class="header" href="#ownable-7">OWNABLE</a></h3>
<p>Address of the Ownable contract</p>
<pre><code class="language-solidity">address public immutable OWNABLE;
</code></pre>
<h3 id="vote-3"><a class="header" href="#vote-3">VOTE</a></h3>
<p>Address of the Vote contract</p>
<pre><code class="language-solidity">address public immutable VOTE;
</code></pre>
<h3 id="staking_pool-2"><a class="header" href="#staking_pool-2">STAKING_POOL</a></h3>
<p>Address of the StakingPool contract</p>
<pre><code class="language-solidity">address public immutable STAKING_POOL;
</code></pre>
<h3 id="uni_helper-3"><a class="header" href="#uni_helper-3">UNI_HELPER</a></h3>
<p>Address of the UniHelper contract</p>
<pre><code class="language-solidity">address public immutable UNI_HELPER;
</code></pre>
<h3 id="dao_property-2"><a class="header" href="#dao_property-2">DAO_PROPERTY</a></h3>
<p>Address of the DAO property</p>
<pre><code class="language-solidity">address public immutable DAO_PROPERTY;
</code></pre>
<h3 id="vabble_fund-2"><a class="header" href="#vabble_fund-2">VABBLE_FUND</a></h3>
<p>Address of the Vabble fund</p>
<pre><code class="language-solidity">address public immutable VABBLE_FUND;
</code></pre>
<h3 id="studiopool"><a class="header" href="#studiopool">StudioPool</a></h3>
<p>Total VAB tokens in the StudioPool</p>
<pre><code class="language-solidity">uint256 public StudioPool;
</code></pre>
<h3 id="filmcount"><a class="header" href="#filmcount">filmCount</a></h3>
<p>Counter for the total number of created films</p>
<p><em>Film IDs start from 1 and increment for each new film create</em></p>
<pre><code class="language-solidity">Counters.Counter public filmCount;
</code></pre>
<h3 id="updatedfilmcount"><a class="header" href="#updatedfilmcount">updatedFilmCount</a></h3>
<p>Counter for the total number of updated films</p>
<p><em>Updated film IDs start from 1 and increment for each updated film</em></p>
<pre><code class="language-solidity">Counters.Counter public updatedFilmCount;
</code></pre>
<h3 id="monthid"><a class="header" href="#monthid">monthId</a></h3>
<p>Counter for the current month ID</p>
<p><em>Month IDs increment for each new month</em></p>
<pre><code class="language-solidity">Counters.Counter public monthId;
</code></pre>
<h3 id="studiopoolusers"><a class="header" href="#studiopoolusers">studioPoolUsers</a></h3>
<p><em>List of users in the StudioPool</em></p>
<pre><code class="language-solidity">address[] private studioPoolUsers;
</code></pre>
<h3 id="edgepoolusers"><a class="header" href="#edgepoolusers">edgePoolUsers</a></h3>
<p><em>List of users in the EdgePool</em></p>
<pre><code class="language-solidity">address[] private edgePoolUsers;
</code></pre>
<h3 id="filminfo"><a class="header" href="#filminfo">filmInfo</a></h3>
<p>Mapping of film IDs to film information</p>
<p><em>Maps each film ID to its corresponding film information</em></p>
<pre><code class="language-solidity">mapping(uint256 =&gt; IVabbleDAO.Film) public filmInfo;
</code></pre>
<h3 id="finalizedamount"><a class="header" href="#finalizedamount">finalizedAmount</a></h3>
<p>Mapping of finalized amounts by film ID, month ID, and user address</p>
<p><em>Maps film ID and month ID to user addresses and their finalized amounts</em></p>
<pre><code class="language-solidity">mapping(uint256 =&gt; mapping(uint256 =&gt; mapping(address =&gt; uint256))) public finalizedAmount;
</code></pre>
<h3 id="latestclaimmonthid"><a class="header" href="#latestclaimmonthid">latestClaimMonthId</a></h3>
<p>Mapping of latest claim month ID by film ID and user address</p>
<p><em>Maps film ID to user addresses and their latest claim month IDs</em></p>
<pre><code class="language-solidity">mapping(uint256 =&gt; mapping(address =&gt; uint256)) public latestClaimMonthId;
</code></pre>
<h3 id="finalfilmcalledtime"><a class="header" href="#finalfilmcalledtime">finalFilmCalledTime</a></h3>
<p>Mapping of finalized film call times by film ID</p>
<p><em>Maps film ID to the timestamp when the film was finalized</em></p>
<pre><code class="language-solidity">mapping(uint256 =&gt; uint256) public finalFilmCalledTime;
</code></pre>
<h3 id="totalfilmids"><a class="header" href="#totalfilmids">totalFilmIds</a></h3>
<p><em>Mapping of flags to film ID lists</em></p>
<p><em>Flags indicate different states:
1 = proposal, 2 = approveListing, 3 = approveFunding, 4 = updated</em></p>
<pre><code class="language-solidity">mapping(uint256 =&gt; uint256[]) private totalFilmIds;
</code></pre>
<h3 id="userfilmids"><a class="header" href="#userfilmids">userFilmIds</a></h3>
<p><em>Mapping of user addresses to film ID lists by flag</em></p>
<p><em>(user =&gt; (flag =&gt; filmId list))</em></p>
<p><em>Flags indicate different user actions:
1 = create, 2 = update, 3 = approve, 4 = final</em></p>
<pre><code class="language-solidity">mapping(address =&gt; mapping(uint256 =&gt; uint256[])) private userFilmIds;
</code></pre>
<h3 id="finalizedfilmids"><a class="header" href="#finalizedfilmids">finalizedFilmIds</a></h3>
<p><em>Mapping of month IDs to finalized film ID lists</em></p>
<p><em>Maps each month ID to a list of finalized film IDs</em></p>
<pre><code class="language-solidity">mapping(uint256 =&gt; uint256[]) private finalizedFilmIds;
</code></pre>
<h3 id="isinvested"><a class="header" href="#isinvested">isInvested</a></h3>
<p><em>Mapping of investment status by investor address and film ID</em></p>
<p><em>Maps investor addresses to film IDs indicating if they have invested (true/false)</em></p>
<pre><code class="language-solidity">mapping(address =&gt; mapping(uint256 =&gt; bool)) private isInvested;
</code></pre>
<h3 id="isstudiopooluser"><a class="header" href="#isstudiopooluser">isStudioPoolUser</a></h3>
<p><em>Mapping indicating if an address is a StudioPool user</em></p>
<p><em>Maps user addresses to boolean values indicating StudioPool membership</em></p>
<pre><code class="language-solidity">mapping(address =&gt; bool) private isStudioPoolUser;
</code></pre>
<h3 id="isedgepooluser"><a class="header" href="#isedgepooluser">isEdgePoolUser</a></h3>
<p><em>Mapping indicating if an address is an EdgePool user</em></p>
<p><em>Maps user addresses to boolean values indicating EdgePool membership</em></p>
<pre><code class="language-solidity">mapping(address =&gt; bool) private isEdgePoolUser;
</code></pre>
<h2 id="functions-8"><a class="header" href="#functions-8">Functions</a></h2>
<h3 id="onlyauditor-6"><a class="header" href="#onlyauditor-6">onlyAuditor</a></h3>
<p><em>Restricts access to the current Auditor.</em></p>
<pre><code class="language-solidity">modifier onlyAuditor();
</code></pre>
<h3 id="onlyvote-3"><a class="header" href="#onlyvote-3">onlyVote</a></h3>
<p><em>Restricts access to the Vote contract.</em></p>
<pre><code class="language-solidity">modifier onlyVote();
</code></pre>
<h3 id="onlystakingpool-1"><a class="header" href="#onlystakingpool-1">onlyStakingPool</a></h3>
<p><em>Restricts access to the StakingPool contract.</em></p>
<pre><code class="language-solidity">modifier onlyStakingPool();
</code></pre>
<h3 id="constructor-8"><a class="header" href="#constructor-8">constructor</a></h3>
<p><em>Constructor for the VabbleDAO contract</em></p>
<pre><code class="language-solidity">constructor(
    address _ownable,
    address _uniHelper,
    address _vote,
    address _staking,
    address _property,
    address _vabbleFund
);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_ownable</code></td><td><code>address</code></td><td>The address of the Ownable contract</td></tr>
<tr><td><code>_uniHelper</code></td><td><code>address</code></td><td>The address of the UniHelper contract</td></tr>
<tr><td><code>_vote</code></td><td><code>address</code></td><td>The address of the Vote contract</td></tr>
<tr><td><code>_staking</code></td><td><code>address</code></td><td>The address of the StakingPool contract</td></tr>
<tr><td><code>_property</code></td><td><code>address</code></td><td>The address of the Property contract</td></tr>
<tr><td><code>_vabbleFund</code></td><td><code>address</code></td><td>The address of the VabbleFund contract</td></tr>
</tbody></table>
</div>
<h3 id="receive-3"><a class="header" href="#receive-3">receive</a></h3>
<pre><code class="language-solidity">receive() external payable;
</code></pre>
<h3 id="proposalfilmcreate"><a class="header" href="#proposalfilmcreate">proposalFilmCreate</a></h3>
<p>Creates a film proposal</p>
<p>User has to pay the current proposal fee</p>
<pre><code class="language-solidity">function proposalFilmCreate(uint256 _fundType, uint256 _noVote, address _feeToken) external payable nonReentrant;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_fundType</code></td><td><code>uint256</code></td><td>Distribution =&gt; 0, Token =&gt; 1, NFT =&gt; 2, NFT &amp; Token =&gt; 3</td></tr>
<tr><td><code>_noVote</code></td><td><code>uint256</code></td><td>If the proposal can skip voting phase 0 = false, 1 = true</td></tr>
<tr><td><code>_feeToken</code></td><td><code>address</code></td><td>Must be a deposit asset added in the Ownable contract</td></tr>
</tbody></table>
</div>
<h3 id="proposalfilmupdate"><a class="header" href="#proposalfilmupdate">proposalFilmUpdate</a></h3>
<p>Update the details of an existing film proposal</p>
<p>*This function allows the film owner to update the details of their film proposal.
It verifies the validity of the input parameters, ensuring that the share percentages
and studio payee addresses are correctly specified and that other conditions are met
based on the type of funding. The function updates the film proposal details and adjusts
related records and mappings accordingly.
Requirements:</p>
<ul>
<li><code>_studioPayees</code> must not be empty.</li>
<li>The length of <code>_studioPayees</code> must equal the length of <code>_sharePercents</code>.</li>
<li><code>_title</code> must not be an empty string.</li>
<li>If the film requires funding (<code>fundType != 0</code>):</li>
<li><code>_fundPeriod</code> must be non-zero.</li>
<li><code>_raiseAmount</code> must be greater than the minimum deposit amount defined in the DAO properties.</li>
<li><code>_rewardPercent</code> must not exceed 100% (1e10 basis points).</li>
<li>If the film does not require funding (<code>fundType == 0</code>):</li>
<li><code>_rewardPercent</code> must be zero.</li>
<li>The total of <code>_sharePercents</code> must equal 100% (1e10 basis points).</li>
<li>The film proposal must have a status of <code>LISTED</code>.</li>
<li>The caller must be the owner of the film proposal.
Effects:</li>
<li>Updates the film proposal details.</li>
<li>Updates the timestamp of proposal creation.</li>
<li>Updates the status of the film proposal to <code>UPDATED</code>.</li>
<li>Increments the <code>updatedFilmCount</code>.</li>
<li>Records the film ID in the list of updated film proposals for the current month.</li>
<li>Records the film ID in the list of film proposals updated by the user.</li>
<li>Adds a new proposal in the staking pool contract used to calculate staker rewards.</li>
<li>If the film requires funding and voting is skipped, it directly approves the film for funding.*</li>
</ul>
<pre><code class="language-solidity">function proposalFilmUpdate(
    uint256 _filmId,
    string memory _title,
    string memory _description,
    uint256[] calldata _sharePercents,
    address[] calldata _studioPayees,
    uint256 _raiseAmount,
    uint256 _fundPeriod,
    uint256 _rewardPercent,
    uint256 _enableClaimer
)
    external
    nonReentrant;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_filmId</code></td><td><code>uint256</code></td><td>The unique identifier of the film proposal to update</td></tr>
<tr><td><code>_title</code></td><td><code>string</code></td><td>The title of the film</td></tr>
<tr><td><code>_description</code></td><td><code>string</code></td><td>The description of the film</td></tr>
<tr><td><code>_sharePercents</code></td><td><code>uint256[]</code></td><td>An array of share percentages for the studio payees</td></tr>
<tr><td><code>_studioPayees</code></td><td><code>address[]</code></td><td>An array of addresses for the studio payees</td></tr>
<tr><td><code>_raiseAmount</code></td><td><code>uint256</code></td><td>The amount to raise for funding</td></tr>
<tr><td><code>_fundPeriod</code></td><td><code>uint256</code></td><td>The duration of the funding period in seconds</td></tr>
<tr><td><code>_rewardPercent</code></td><td><code>uint256</code></td><td>The reward percentage allocated for funders (in basis points)</td></tr>
<tr><td><code>_enableClaimer</code></td><td><code>uint256</code></td><td>A flag to enable or disable the claimer (1 = enabled, 0 = disabled)</td></tr>
</tbody></table>
</div>
<h3 id="changeowner-1"><a class="header" href="#changeowner-1">changeOwner</a></h3>
<p>Change owner of a film</p>
<pre><code class="language-solidity">function changeOwner(uint256 _filmId, address newOwner) external nonReentrant returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_filmId</code></td><td><code>uint256</code></td><td>ID of the film to change owner</td></tr>
<tr><td><code>newOwner</code></td><td><code>address</code></td><td>New owner address</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>success Boolean indicating success of the operation</td></tr>
</tbody></table>
</div>
<h3 id="approvefilmbyvote"><a class="header" href="#approvefilmbyvote">approveFilmByVote</a></h3>
<p>Updates the film's approval status accordingly</p>
<pre><code class="language-solidity">function approveFilmByVote(uint256 _filmId, uint256 _flag) external onlyVote;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_filmId</code></td><td><code>uint256</code></td><td>ID of the film to approve</td></tr>
<tr><td><code>_flag</code></td><td><code>uint256</code></td><td>Flag: 0 for film funding, 1 for listing film</td></tr>
</tbody></table>
</div>
<h3 id="updatefilmfundperiod"><a class="header" href="#updatefilmfundperiod">updateFilmFundPeriod</a></h3>
<p>Update film fund period by studio</p>
<pre><code class="language-solidity">function updateFilmFundPeriod(uint256 _filmId, uint256 _fundPeriod) external nonReentrant;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_filmId</code></td><td><code>uint256</code></td><td>ID of the film to update fund period</td></tr>
<tr><td><code>_fundPeriod</code></td><td><code>uint256</code></td><td>New fund period in seconds</td></tr>
</tbody></table>
</div>
<h3 id="allocatetopool"><a class="header" href="#allocatetopool">allocateToPool</a></h3>
<p>Allocate VAB from StakingPool(user balance) to EdgePool(Ownable)/StudioPool(VabbleDAO) by Auditor</p>
<pre><code class="language-solidity">function allocateToPool(
    address[] calldata _users,
    uint256[] calldata _amounts,
    uint256 _which
)
    external
    onlyAuditor
    nonReentrant;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_users</code></td><td><code>address[]</code></td><td>Array of users to allocate VAB</td></tr>
<tr><td><code>_amounts</code></td><td><code>uint256[]</code></td><td>Array of amounts to allocate per user</td></tr>
<tr><td><code>_which</code></td><td><code>uint256</code></td><td>1 =&gt; to EdgePool, 2 =&gt; to StudioPool</td></tr>
</tbody></table>
</div>
<h3 id="allocatefromedgepool"><a class="header" href="#allocatefromedgepool">allocateFromEdgePool</a></h3>
<p>Allocate VAB from EdgePool(Ownable) to StudioPool(VabbleDAO) by Auditor</p>
<pre><code class="language-solidity">function allocateFromEdgePool(uint256 _amount) external onlyAuditor nonReentrant;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_amount</code></td><td><code>uint256</code></td><td>Amount of VAB to allocate</td></tr>
</tbody></table>
</div>
<h3 id="withdrawvabfromstudiopool"><a class="header" href="#withdrawvabfromstudiopool">withdrawVABFromStudioPool</a></h3>
<p>Withdraw VAB token from StudioPool(VabbleDAO) to the new reward address.</p>
<p><em>This will be called by the StakingPool contract after a reward address proposal has been accepted and
finalized. This is part of the migration process to a new DAO.</em></p>
<pre><code class="language-solidity">function withdrawVABFromStudioPool(address _to) external onlyStakingPool nonReentrant returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_to</code></td><td><code>address</code></td><td>Address to receive the withdrawn VAB</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>Amount of VAB withdrawn</td></tr>
</tbody></table>
</div>
<h3 id="startnewmonth"><a class="header" href="#startnewmonth">startNewMonth</a></h3>
<p>Start a new month for film rewards calculation / distribution</p>
<p><em>This must be called before the auditor calls <code>setFinalFilms</code>.</em></p>
<pre><code class="language-solidity">function startNewMonth() external onlyAuditor nonReentrant;
</code></pre>
<h3 id="setfinalfilms"><a class="header" href="#setfinalfilms">setFinalFilms</a></h3>
<p>Finalizes the payout and reward distribution for a batch of films.</p>
<p><em>This function is callable only by the auditor, he must call <code>startNewMonth</code> before.
It validates the input arrays, checks the validity of each film, and then
finalizes the payout for each valid film using the internal function <code>__setFinalFilm</code>.
This action will allow the studio, investors and assigned reward receives to claim their rewards.</em></p>
<pre><code class="language-solidity">function setFinalFilms(uint256[] calldata _filmIds, uint256[] calldata _payouts) external onlyAuditor nonReentrant;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_filmIds</code></td><td><code>uint256[]</code></td><td>An array of unique identifiers for the films to be finalized.</td></tr>
<tr><td><code>_payouts</code></td><td><code>uint256[]</code></td><td>An array of total payout amounts corresponding to each film, to be distributed to payees and film investors / funders.</td></tr>
</tbody></table>
</div>
<h3 id="claimreward"><a class="header" href="#claimreward">claimReward</a></h3>
<p>Claim rewards for multiple film IDs after the auditor called setFinalFilms()</p>
<pre><code class="language-solidity">function claimReward(uint256[] memory _filmIds) external nonReentrant;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_filmIds</code></td><td><code>uint256[]</code></td><td>Array of film IDs to claim rewards for</td></tr>
</tbody></table>
</div>
<h3 id="claimallreward"><a class="header" href="#claimallreward">claimAllReward</a></h3>
<p>Claim rewards of all finalized film IDs for the caller</p>
<pre><code class="language-solidity">function claimAllReward() external nonReentrant;
</code></pre>
<h3 id="updateenabledclaimer"><a class="header" href="#updateenabledclaimer">updateEnabledClaimer</a></h3>
<p>Update enableClaimer status for a film by studio</p>
<pre><code class="language-solidity">function updateEnabledClaimer(uint256 _filmId, uint256 _enable) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_filmId</code></td><td><code>uint256</code></td><td>ID of the film to update enableClaimer</td></tr>
<tr><td><code>_enable</code></td><td><code>uint256</code></td><td>New enableClaimer status</td></tr>
</tbody></table>
</div>
<h3 id="getuserfilmids"><a class="header" href="#getuserfilmids">getUserFilmIds</a></h3>
<p>Gets the film IDs for a user based on a flag</p>
<pre><code class="language-solidity">function getUserFilmIds(address _user, uint256 _flag) external view returns (uint256[] memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_user</code></td><td><code>address</code></td><td>Address of the user</td></tr>
<tr><td><code>_flag</code></td><td><code>uint256</code></td><td>Flag indicating the type of film IDs to retrieve (1 for created, 2 for updated, 3 for approved, 4 for final)</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256[]</code></td><td>List of film IDs for the user</td></tr>
</tbody></table>
</div>
<h3 id="getfilmstatus"><a class="header" href="#getfilmstatus">getFilmStatus</a></h3>
<p>Gets the status of a film based on its ID</p>
<p><em>Retrieves the status of the specified film</em></p>
<pre><code class="language-solidity">function getFilmStatus(uint256 _filmId) external view returns (Helper.Status status_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_filmId</code></td><td><code>uint256</code></td><td>ID of the film</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>status_</code></td><td><code>Helper.Status</code></td><td>Status of the film</td></tr>
</tbody></table>
</div>
<h3 id="getfilmowner"><a class="header" href="#getfilmowner">getFilmOwner</a></h3>
<p>Gets the owner of a film based on its ID</p>
<p><em>Retrieves the address of the studio that owns the specified film</em></p>
<pre><code class="language-solidity">function getFilmOwner(uint256 _filmId) external view returns (address owner_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_filmId</code></td><td><code>uint256</code></td><td>ID of the film</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>owner_</code></td><td><code>address</code></td><td>Address of the film owner</td></tr>
</tbody></table>
</div>
<h3 id="getfilmfund"><a class="header" href="#getfilmfund">getFilmFund</a></h3>
<p>Gets the fund information for a film based on its ID</p>
<p><em>Retrieves the fund details for the specified film</em></p>
<pre><code class="language-solidity">function getFilmFund(uint256 _filmId)
    external
    view
    returns (uint256 raiseAmount_, uint256 fundPeriod_, uint256 fundType_, uint256 rewardPercent_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_filmId</code></td><td><code>uint256</code></td><td>ID of the film</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>raiseAmount_</code></td><td><code>uint256</code></td><td>Amount to be raised for the film</td></tr>
<tr><td><code>fundPeriod_</code></td><td><code>uint256</code></td><td>Fund period for the film</td></tr>
<tr><td><code>fundType_</code></td><td><code>uint256</code></td><td>Fund type for the film</td></tr>
<tr><td><code>rewardPercent_</code></td><td><code>uint256</code></td><td>Reward percentage for the film</td></tr>
</tbody></table>
</div>
<h3 id="getfilmshare"><a class="header" href="#getfilmshare">getFilmShare</a></h3>
<p>Gets the share information for a film based on its ID</p>
<p><em>Retrieves the share percentages and studio payees for the specified film
Studio payees are the addresses that will receive a part of the film's revenue based on their share percentage.</em></p>
<pre><code class="language-solidity">function getFilmShare(uint256 _filmId)
    external
    view
    returns (uint256[] memory sharePercents_, address[] memory studioPayees_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_filmId</code></td><td><code>uint256</code></td><td>ID of the film</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>sharePercents_</code></td><td><code>uint256[]</code></td><td>List of share percentages for the film</td></tr>
<tr><td><code>studioPayees_</code></td><td><code>address[]</code></td><td>List of studio payees for the film</td></tr>
</tbody></table>
</div>
<h3 id="isenabledclaimer"><a class="header" href="#isenabledclaimer">isEnabledClaimer</a></h3>
<p>Gets the enableClaimer status for a filmID</p>
<pre><code class="language-solidity">function isEnabledClaimer(uint256 _filmId) external view returns (bool enable_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_filmId</code></td><td><code>uint256</code></td><td>ID of the film to get the enableClaimer status</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>enable_</code></td><td><code>bool</code></td><td>The enableClaimer status</td></tr>
</tbody></table>
</div>
<h3 id="getfilmids"><a class="header" href="#getfilmids">getFilmIds</a></h3>
<p>Get film IDs based on flag</p>
<pre><code class="language-solidity">function getFilmIds(uint256 _flag) external view returns (uint256[] memory list_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_flag</code></td><td><code>uint256</code></td><td>Flag: 1 = proposal, 2 = approveListing, 3 = approveFunding, 4 = updated</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>list_</code></td><td><code>uint256[]</code></td><td>Array of film IDs</td></tr>
</tbody></table>
</div>
<h3 id="getpoolusers"><a class="header" href="#getpoolusers">getPoolUsers</a></h3>
<p>Get pool users based on flag</p>
<pre><code class="language-solidity">function getPoolUsers(uint256 _flag) external view onlyAuditor returns (address[] memory list_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_flag</code></td><td><code>uint256</code></td><td>Flag: 1 for studioPoolUsers, 2 for edgePoolUsers</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>list_</code></td><td><code>address[]</code></td><td>Array of pool users addresses</td></tr>
</tbody></table>
</div>
<h3 id="getfinalizedfilmids"><a class="header" href="#getfinalizedfilmids">getFinalizedFilmIds</a></h3>
<p>Get finalized film IDs for a specific month</p>
<pre><code class="language-solidity">function getFinalizedFilmIds(uint256 _monthId) external view returns (uint256[] memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_monthId</code></td><td><code>uint256</code></td><td>Month ID to get finalized film IDs</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256[]</code></td><td>Array of finalized film IDs</td></tr>
</tbody></table>
</div>
<h3 id="checksetfinalfilms"><a class="header" href="#checksetfinalfilms">checkSetFinalFilms</a></h3>
<p>Checks if the rewards for the provided film IDs can be finalized.</p>
<p>*Determines whether each film ID is eligible to have its rewards distributed based on the time since the last
reward distribution.
A film can receive rewards if either:</p>
<ul>
<li>It has never received rewards before.</li>
<li>The required period (specified by <code>Property::filmRewardClaimPeriod</code>) has passed since the last time it received
rewards.*</li>
</ul>
<pre><code class="language-solidity">function checkSetFinalFilms(uint256[] calldata _filmIds) public view returns (bool[] memory _valids);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_filmIds</code></td><td><code>uint256[]</code></td><td>List of film IDs to check for reward finalization eligibility.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_valids</code></td><td><code>bool[]</code></td><td>List of boolean values indicating if each film ID is eligible to have its rewards finalized.</td></tr>
</tbody></table>
</div>
<h3 id="getallavailablerewards"><a class="header" href="#getallavailablerewards">getAllAvailableRewards</a></h3>
<p>Gets all available rewards for a user</p>
<p><em>Calculates the total available rewards for the user from the last time he claimed up to the current month</em></p>
<pre><code class="language-solidity">function getAllAvailableRewards(uint256 _curMonth, address _user) public view returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_curMonth</code></td><td><code>uint256</code></td><td>Current month ID</td></tr>
<tr><td><code>_user</code></td><td><code>address</code></td><td>Address of the user</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>Total available rewards for the user</td></tr>
</tbody></table>
</div>
<h3 id="getuserrewardamountforuser"><a class="header" href="#getuserrewardamountforuser">getUserRewardAmountForUser</a></h3>
<p>Gets the reward amount for a user for a specific film ID</p>
<p><em>Calculates the total reward amount for the user for the specified film ID
from the last time he claimed up to the current month</em></p>
<pre><code class="language-solidity">function getUserRewardAmountForUser(uint256 _filmId, uint256 _curMonth, address _user) public view returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_filmId</code></td><td><code>uint256</code></td><td>ID of the film</td></tr>
<tr><td><code>_curMonth</code></td><td><code>uint256</code></td><td>Current month ID</td></tr>
<tr><td><code>_user</code></td><td><code>address</code></td><td>Address of the user</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>Total reward amount for the user</td></tr>
</tbody></table>
</div>
<h3 id="getfilmproposaltime"><a class="header" href="#getfilmproposaltime">getFilmProposalTime</a></h3>
<p>Gets the proposal creation and approval times for a film based on its ID</p>
<p><em>Retrieves the proposal creation and approval times for the specified film</em></p>
<pre><code class="language-solidity">function getFilmProposalTime(uint256 _filmId) public view returns (uint256 cTime_, uint256 aTime_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_filmId</code></td><td><code>uint256</code></td><td>ID of the film</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>cTime_</code></td><td><code>uint256</code></td><td>Creation time of the proposal</td></tr>
<tr><td><code>aTime_</code></td><td><code>uint256</code></td><td>Approval time of the proposal</td></tr>
</tbody></table>
</div>
<h3 id="getuserrewardamountbetweenmonths"><a class="header" href="#getuserrewardamountbetweenmonths">getUserRewardAmountBetweenMonths</a></h3>
<p>Gets the reward amount for a user between two months</p>
<p><em>Calculates the total reward amount for the user for the specified film ID between the two months</em></p>
<pre><code class="language-solidity">function getUserRewardAmountBetweenMonths(
    uint256 _filmId,
    uint256 _preMonth,
    uint256 _curMonth,
    address _user
)
    public
    view
    returns (uint256 amount_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_filmId</code></td><td><code>uint256</code></td><td>ID of the film</td></tr>
<tr><td><code>_preMonth</code></td><td><code>uint256</code></td><td>Previous month ID</td></tr>
<tr><td><code>_curMonth</code></td><td><code>uint256</code></td><td>Current month ID</td></tr>
<tr><td><code>_user</code></td><td><code>address</code></td><td>Address of the user</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>amount_</code></td><td><code>uint256</code></td><td>Total reward amount for the user</td></tr>
</tbody></table>
</div>
<h3 id="__movetoanotherarray"><a class="header" href="#__movetoanotherarray">__moveToAnotherArray</a></h3>
<p><em>Moves a value from one storage array to another and removes it from the first array.</em></p>
<p><em>Finds the index of the value in <code>array1</code>, moves it to <code>array2</code>, and updates <code>array1</code> accordingly.</em></p>
<pre><code class="language-solidity">function __moveToAnotherArray(uint256[] storage array1, uint256[] storage array2, uint256 value) private;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>array1</code></td><td><code>uint256[]</code></td><td>The source array from which the value will be moved.</td></tr>
<tr><td><code>array2</code></td><td><code>uint256[]</code></td><td>The destination array to which the value will be moved.</td></tr>
<tr><td><code>value</code></td><td><code>uint256</code></td><td>The value to be moved from <code>array1</code> to <code>array2</code>.</td></tr>
</tbody></table>
</div>
<h3 id="__paidfee-1"><a class="header" href="#__paidfee-1">__paidFee</a></h3>
<p><em>Handles the payment of proposal fees from the user / studio to the staking pool.</em></p>
<p><em>Transfers the required fee amount in a specified token (must be an allowed deposit asset)
to the staking pool, calculates the expected amount of VAB tokens using UniswapV2, swaps the token to VAB,
and adds the resulting VAB amount as a reward to the staking pool.</em></p>
<pre><code class="language-solidity">function __paidFee(address _dToken, uint256 _noVote) private;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_dToken</code></td><td><code>address</code></td><td>The token address used for the payment of the proposal fee.</td></tr>
<tr><td><code>_noVote</code></td><td><code>uint256</code></td><td>Flag indicating if the proposal skipped voting phase 0 = false, 1 = true has to pay double the proposal fee if the proposal skipped voting</td></tr>
</tbody></table>
</div>
<h3 id="__setfinalfilm"><a class="header" href="#__setfinalfilm">__setFinalFilm</a></h3>
<p><em>Finalizes the payout and reward distribution for a given film.</em></p>
<p><em>This function updates the final amounts to be paid to payees and investors
based on the film's status and the amount raised.
It handles both <code>APPROVED_LISTING</code> and <code>APPROVED_FUNDING</code> statuses. For <code>APPROVED_LISTING</code>,
it directly sets the final payout amounts to the payees. For <code>APPROVED_FUNDING</code>
it calculates and distributes the rewards to the helpers (investors) and the remaining amount to the payees.</em></p>
<pre><code class="language-solidity">function __setFinalFilm(uint256 _filmId, uint256 _payout) private;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_filmId</code></td><td><code>uint256</code></td><td>The unique identifier of the film being finalized.</td></tr>
<tr><td><code>_payout</code></td><td><code>uint256</code></td><td>The total payout amount to be distributed for the film.</td></tr>
</tbody></table>
</div>
<h3 id="__setfinalamounttopayees"><a class="header" href="#__setfinalamounttopayees">__setFinalAmountToPayees</a></h3>
<p><em>Calculates and sets the final payout amounts for the studio payees of a film.</em></p>
<p><em>Avoid stack to deep error here.</em></p>
<pre><code class="language-solidity">function __setFinalAmountToPayees(uint256 _filmId, uint256 _payout, uint256 _curMonth) private;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_filmId</code></td><td><code>uint256</code></td><td>The unique identifier of the film.</td></tr>
<tr><td><code>_payout</code></td><td><code>uint256</code></td><td>The total payout amount to be distributed to the payees.</td></tr>
<tr><td><code>_curMonth</code></td><td><code>uint256</code></td><td>The current month identifier.</td></tr>
</tbody></table>
</div>
<h3 id="__setfinalamounttohelpers"><a class="header" href="#__setfinalamounttohelpers">__setFinalAmountToHelpers</a></h3>
<p><em>Calculates and sets the final reward amounts for the investors of a funded film.</em></p>
<pre><code class="language-solidity">function __setFinalAmountToHelpers(uint256 _filmId, uint256 _rewardAmount, uint256 _curMonth) private;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_filmId</code></td><td><code>uint256</code></td><td>The unique identifier of the film.</td></tr>
<tr><td><code>_rewardAmount</code></td><td><code>uint256</code></td><td>The total reward amount to be distributed to the investors.</td></tr>
<tr><td><code>_curMonth</code></td><td><code>uint256</code></td><td>The current month identifier.</td></tr>
</tbody></table>
</div>
<h3 id="__addfinalfilmid"><a class="header" href="#__addfinalfilmid">__addFinalFilmId</a></h3>
<p><em>Adds the film ID to the list of finalized rewards based on the film IDs for the user.</em></p>
<pre><code class="language-solidity">function __addFinalFilmId(address _user, uint256 _filmId) private;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_user</code></td><td><code>address</code></td><td>The address of the user.</td></tr>
<tr><td><code>_filmId</code></td><td><code>uint256</code></td><td>The unique identifier of the film.</td></tr>
</tbody></table>
</div>
<h3 id="__claimallreward"><a class="header" href="#__claimallreward">__claimAllReward</a></h3>
<p><em>Claims all rewards for a given list of film IDs for the caller.</em></p>
<p><em>Retrieves the total reward amount for the caller from the specified film IDs,
transfers the rewards in VAB tokens to the caller, and updates the studio pool accordingly.</em></p>
<pre><code class="language-solidity">function __claimAllReward(uint256[] memory _filmIds) private;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_filmIds</code></td><td><code>uint256[]</code></td><td>List of film IDs for which rewards are being claimed.</td></tr>
</tbody></table>
</div>
<h3 id="__updatefinalizeamountandlastclaimmonth"><a class="header" href="#__updatefinalizeamountandlastclaimmonth">__updateFinalizeAmountAndLastClaimMonth</a></h3>
<p><em>Updates the finalized payout amounts and last claim month for a film when ownership changes.</em></p>
<pre><code class="language-solidity">function __updateFinalizeAmountAndLastClaimMonth(
    uint256 _filmId,
    uint256 _curMonth,
    address _oldOwner,
    address _newOwner
)
    private;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_filmId</code></td><td><code>uint256</code></td><td>The unique identifier of the film for which the ownership is being updated.</td></tr>
<tr><td><code>_curMonth</code></td><td><code>uint256</code></td><td>The current month identifier.</td></tr>
<tr><td><code>_oldOwner</code></td><td><code>address</code></td><td>The address of the current owner of the film's payouts.</td></tr>
<tr><td><code>_newOwner</code></td><td><code>address</code></td><td>The address of the new owner of the film's payouts.</td></tr>
</tbody></table>
</div>
<h2 id="events-7"><a class="header" href="#events-7">Events</a></h2>
<h3 id="filmproposalcreated"><a class="header" href="#filmproposalcreated">FilmProposalCreated</a></h3>
<p><em>Emitted when a film proposal is created</em></p>
<pre><code class="language-solidity">event FilmProposalCreated(uint256 indexed filmId, uint256 noVote, uint256 fundType, address studio);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>filmId</code></td><td><code>uint256</code></td><td>The ID of the film proposal</td></tr>
<tr><td><code>noVote</code></td><td><code>uint256</code></td><td>If the proposal can skip voting phase 0 = false, 1 = true</td></tr>
<tr><td><code>fundType</code></td><td><code>uint256</code></td><td>The type of funding for the proposal 0 = Distribution, 1 = Token, 2 = NFT, 3 = NFT &amp; Token)</td></tr>
<tr><td><code>studio</code></td><td><code>address</code></td><td>The address of the studio creating the proposal</td></tr>
</tbody></table>
</div>
<h3 id="filmproposalupdated"><a class="header" href="#filmproposalupdated">FilmProposalUpdated</a></h3>
<p><em>Emitted when a film proposal is updated</em></p>
<pre><code class="language-solidity">event FilmProposalUpdated(uint256 indexed filmId, uint256 fundType, address studio);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>filmId</code></td><td><code>uint256</code></td><td>The ID of the updated film proposal</td></tr>
<tr><td><code>fundType</code></td><td><code>uint256</code></td><td>The updated type of funding for the proposal 0 = Distribution, 1 = Token, 2 = NFT, 3 = NFT &amp; Token)</td></tr>
<tr><td><code>studio</code></td><td><code>address</code></td><td>The address of the studio updating the proposal</td></tr>
</tbody></table>
</div>
<h3 id="filmfundperiodupdated"><a class="header" href="#filmfundperiodupdated">FilmFundPeriodUpdated</a></h3>
<p><em>Emitted when the film fund period is updated</em></p>
<pre><code class="language-solidity">event FilmFundPeriodUpdated(uint256 indexed filmId, address studio, uint256 fundPeriod);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>filmId</code></td><td><code>uint256</code></td><td>The ID of the film whose fund period is updated</td></tr>
<tr><td><code>studio</code></td><td><code>address</code></td><td>The address of the studio updating the fund period</td></tr>
<tr><td><code>fundPeriod</code></td><td><code>uint256</code></td><td>The updated fund period</td></tr>
</tbody></table>
</div>
<h3 id="allocatedtopool"><a class="header" href="#allocatedtopool">AllocatedToPool</a></h3>
<p><em>Emitted when funds are allocated to a pool</em></p>
<pre><code class="language-solidity">event AllocatedToPool(address[] users, uint256[] amounts, uint256 which);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>users</code></td><td><code>address[]</code></td><td>The list of users receiving allocations</td></tr>
<tr><td><code>amounts</code></td><td><code>uint256[]</code></td><td>The amounts allocated to each user</td></tr>
<tr><td><code>which</code></td><td><code>uint256</code></td><td>Indicates the type of pool (1 = studio, 2 = edge)</td></tr>
</tbody></table>
</div>
<h3 id="rewardallclaimed"><a class="header" href="#rewardallclaimed">RewardAllClaimed</a></h3>
<p><em>Emitted when a user claims all rewards for a month</em></p>
<pre><code class="language-solidity">event RewardAllClaimed(address indexed user, uint256 indexed monthId, uint256[] filmIds, uint256 claimAmount);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>user</code></td><td><code>address</code></td><td>The address of the user claiming rewards</td></tr>
<tr><td><code>monthId</code></td><td><code>uint256</code></td><td>The ID of the month for which rewards are claimed</td></tr>
<tr><td><code>filmIds</code></td><td><code>uint256[]</code></td><td>The list of film IDs involved in the claim</td></tr>
<tr><td><code>claimAmount</code></td><td><code>uint256</code></td><td>The total amount claimed</td></tr>
</tbody></table>
</div>
<h3 id="setfinalfilms-1"><a class="header" href="#setfinalfilms-1">SetFinalFilms</a></h3>
<p><em>Emitted when final films are set by the auditor</em></p>
<pre><code class="language-solidity">event SetFinalFilms(address indexed user, uint256[] filmIds, uint256[] payouts);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>user</code></td><td><code>address</code></td><td>The address of the auditor setting the final films</td></tr>
<tr><td><code>filmIds</code></td><td><code>uint256[]</code></td><td>The list of film IDs set as final</td></tr>
<tr><td><code>payouts</code></td><td><code>uint256[]</code></td><td>The payout amounts for each film</td></tr>
</tbody></table>
</div>
<h3 id="changefilmowner"><a class="header" href="#changefilmowner">ChangeFilmOwner</a></h3>
<p><em>Emitted when the ownership of a film changes</em></p>
<pre><code class="language-solidity">event ChangeFilmOwner(uint256 indexed filmId, address indexed oldOwner, address indexed newOwner);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>filmId</code></td><td><code>uint256</code></td><td>The ID of the film whose ownership is changing</td></tr>
<tr><td><code>oldOwner</code></td><td><code>address</code></td><td>The address of the previous owner</td></tr>
<tr><td><code>newOwner</code></td><td><code>address</code></td><td>The address of the new owner</td></tr>
</tbody></table>
</div>
<h3 id="finalfilmsetted"><a class="header" href="#finalfilmsetted">FinalFilmSetted</a></h3>
<pre><code class="language-solidity">event FinalFilmSetted(
    address[] users, uint256[] filmIds, uint256[] watchedPercents, uint256[] rentPrices, uint256 setTime
);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="vabblefund"><a class="header" href="#vabblefund">VabbleFund</a></h1>
<p><a href="https://github.com/Mill1995/VABDAO/blob/4914bdc306cbdb860037485ce4bcebbfdd390c9f/contracts/dao/VabbleFund.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="contracts/dao/VabbleFund.sol//contracts/interfaces/IVabbleFund.sol/interface.IVabbleFund.html">IVabbleFund</a>, ReentrancyGuard</p>
<p>VabbleFund contract handles the management of funds deposited for films in the Vabble ecosystem.</p>
<p><em>This contract facilitates the deposit, processing, and withdrawal of funds by investors for funding films.
Funds can be deposited in the form of tokens, and are managed based on specified film funding criteria.
Upon successful funding, rewards are distributed to the staking pool and remaining funds are transferred to the film
owner. Funding rewards for investors can be issued in the form of NFT's, tokens or both.</em></p>
<p><em>The contract interacts with other contracts including Ownable, StakingPool, UniHelper, Property, FactoryFilmNFT,
VabbleDAO, and various ERC20 tokens to achieve its functionalities.</em></p>
<p><em>It includes features for checking film funding status, managing investor lists, handling asset transfers,
and ensuring compliance with film-specific funding conditions such as minimum and maximum deposit amounts.</em></p>
<h2 id="state-variables-9"><a class="header" href="#state-variables-9">State Variables</a></h2>
<h3 id="ownable-8"><a class="header" href="#ownable-8">OWNABLE</a></h3>
<p><em>The address of the Ownable contract.</em></p>
<pre><code class="language-solidity">address private immutable OWNABLE;
</code></pre>
<h3 id="staking_pool-3"><a class="header" href="#staking_pool-3">STAKING_POOL</a></h3>
<p><em>The address of the StakingPool contract.</em></p>
<pre><code class="language-solidity">address private immutable STAKING_POOL;
</code></pre>
<h3 id="uni_helper-4"><a class="header" href="#uni_helper-4">UNI_HELPER</a></h3>
<p><em>The address of the UniHelper contract.</em></p>
<pre><code class="language-solidity">address private immutable UNI_HELPER;
</code></pre>
<h3 id="dao_property-3"><a class="header" href="#dao_property-3">DAO_PROPERTY</a></h3>
<p><em>The address of the Property contract.</em></p>
<pre><code class="language-solidity">address private immutable DAO_PROPERTY;
</code></pre>
<h3 id="film_nft"><a class="header" href="#film_nft">FILM_NFT</a></h3>
<p><em>The address of the FilmNftFactory contract.</em></p>
<pre><code class="language-solidity">address private immutable FILM_NFT;
</code></pre>
<h3 id="vabble_dao-4"><a class="header" href="#vabble_dao-4">VABBLE_DAO</a></h3>
<p>The address of the VabbleDAO contract.</p>
<pre><code class="language-solidity">address public VABBLE_DAO;
</code></pre>
<h3 id="fundprocessedfilmids"><a class="header" href="#fundprocessedfilmids">fundProcessedFilmIds</a></h3>
<p><em>List of film IDs that have processed funds.</em></p>
<pre><code class="language-solidity">uint256[] private fundProcessedFilmIds;
</code></pre>
<h3 id="filminvestorlist"><a class="header" href="#filminvestorlist">filmInvestorList</a></h3>
<p><em>Mapping from film ID to list of investor addresses.</em></p>
<pre><code class="language-solidity">mapping(uint256 =&gt; address[]) private filmInvestorList;
</code></pre>
<h3 id="assetperfilm"><a class="header" href="#assetperfilm">assetPerFilm</a></h3>
<p>Mapping from film ID to list of assets per film.</p>
<pre><code class="language-solidity">mapping(uint256 =&gt; Asset[]) public assetPerFilm;
</code></pre>
<h3 id="isfundprocessed"><a class="header" href="#isfundprocessed">isFundProcessed</a></h3>
<p>Mapping to check if fund is processed for a film.</p>
<pre><code class="language-solidity">mapping(uint256 =&gt; bool) public isFundProcessed;
</code></pre>
<h3 id="assetinfo"><a class="header" href="#assetinfo">assetInfo</a></h3>
<p>Mapping from film ID and customer address to list of assets.</p>
<pre><code class="language-solidity">mapping(uint256 =&gt; mapping(address =&gt; Asset[])) public assetInfo;
</code></pre>
<h3 id="allowusernftcount"><a class="header" href="#allowusernftcount">allowUserNftCount</a></h3>
<p><em>Mapping from film ID and user address to NFT count.</em></p>
<pre><code class="language-solidity">mapping(uint256 =&gt; mapping(address =&gt; uint256)) private allowUserNftCount;
</code></pre>
<h2 id="functions-9"><a class="header" href="#functions-9">Functions</a></h2>
<h3 id="onlydeployer-5"><a class="header" href="#onlydeployer-5">onlyDeployer</a></h3>
<p><em>Restricts access to the deployer of the Ownable contract.</em></p>
<pre><code class="language-solidity">modifier onlyDeployer();
</code></pre>
<h3 id="constructor-9"><a class="header" href="#constructor-9">constructor</a></h3>
<p>Initializes the contract with the given addresses.</p>
<pre><code class="language-solidity">constructor(address _ownable, address _uniHelper, address _staking, address _property, address _filmNftFactory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_ownable</code></td><td><code>address</code></td><td>The address of the Ownable contract.</td></tr>
<tr><td><code>_uniHelper</code></td><td><code>address</code></td><td>The address of the UniHelper contract.</td></tr>
<tr><td><code>_staking</code></td><td><code>address</code></td><td>The address of the StakingPool contract.</td></tr>
<tr><td><code>_property</code></td><td><code>address</code></td><td>The address of the DAO property contract.</td></tr>
<tr><td><code>_filmNftFactory</code></td><td><code>address</code></td><td>The address of the FilmNftFactory contract.</td></tr>
</tbody></table>
</div>
<h3 id="receive-4"><a class="header" href="#receive-4">receive</a></h3>
<pre><code class="language-solidity">receive() external payable;
</code></pre>
<h3 id="initialize-2"><a class="header" href="#initialize-2">initialize</a></h3>
<p>Initializes the VabbleDAO contract address.</p>
<pre><code class="language-solidity">function initialize(address _vabbleDAO) external onlyDeployer;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_vabbleDAO</code></td><td><code>address</code></td><td>The address of the Vabble DAO.</td></tr>
</tbody></table>
</div>
<h3 id="deposittofilm"><a class="header" href="#deposittofilm">depositToFilm</a></h3>
<p>Investors deposit tokens to fund a film.</p>
<pre><code class="language-solidity">function depositToFilm(uint256 _filmId, uint256 _amount, uint256 _flag, address _token) external payable nonReentrant;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_filmId</code></td><td><code>uint256</code></td><td>The ID of the film.</td></tr>
<tr><td><code>_amount</code></td><td><code>uint256</code></td><td>The amount to deposit must be between the range of <code>Property::minDepositAmount</code> and <code>Property::maxDepositAmount</code>.</td></tr>
<tr><td><code>_flag</code></td><td><code>uint256</code></td><td>Indicates the type of deposit (1 for token, 2 for NFT).</td></tr>
<tr><td><code>_token</code></td><td><code>address</code></td><td>The address of the token to deposit.</td></tr>
</tbody></table>
</div>
<h3 id="fundprocess"><a class="header" href="#fundprocess">fundProcess</a></h3>
<p>Processes the funds for a film, transferring rewards to the staking pool and the remaining funds to the
film owner.</p>
<p><em>This function can only be called by the owner of the film and ensures the film has met the funding criteria.</em></p>
<pre><code class="language-solidity">function fundProcess(uint256 _filmId) external nonReentrant;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_filmId</code></td><td><code>uint256</code></td><td>The unique identifier of the film to process funds for. Requirements: - Caller must be the owner of the film. - Film must not have already been processed. - Film must be in the approved funding status. - The funding period must have ended. - The film must have raised the full required amount. Functionality: - Calculates and transfers the <code>Property::fundFeePercent</code> of the funds to the reward pool as VAB tokens. - Transfers the remaining funds to the film owner. - Marks the film as processed and emits a <code>FundFilmProcessed</code> event.</td></tr>
</tbody></table>
</div>
<h3 id="withdrawfunding"><a class="header" href="#withdrawfunding">withdrawFunding</a></h3>
<p>Allows an investor to withdraw their funds from a film if the funding period has ended and the film did
not meet its funding goal.</p>
<p><em>This function can only be called by investors who have deposited funds into the film.</em></p>
<pre><code class="language-solidity">function withdrawFunding(uint256 _filmId) external nonReentrant;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_filmId</code></td><td><code>uint256</code></td><td>The unique identifier of the film from which funds are being withdrawn. Requirements: - Film must be in the approved funding status. - The funding period must have ended. - The film must not have raised the full required amount. Functionality: - Transfers deposited tokens back to the investor. - If the investor's total fund amount for the film becomes zero after withdrawal, they are removed from the investor list. - Emits a <code>FundWithdrawed</code> event upon successful withdrawal.</td></tr>
</tbody></table>
</div>
<h3 id="getfundprocessedfilmidlist"><a class="header" href="#getfundprocessedfilmidlist">getFundProcessedFilmIdList</a></h3>
<p>Retrieves a list of film IDs that have successfully processed funds.</p>
<pre><code class="language-solidity">function getFundProcessedFilmIdList() external view returns (uint256[] memory);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256[]</code></td><td>List of values representing the film IDs that have completed the fund processing.</td></tr>
</tbody></table>
</div>
<h3 id="getfilminvestorlist"><a class="header" href="#getfilminvestorlist">getFilmInvestorList</a></h3>
<p>Returns the list of investors for a film.</p>
<pre><code class="language-solidity">function getFilmInvestorList(uint256 _filmId) external view override returns (address[] memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_filmId</code></td><td><code>uint256</code></td><td>The ID of the film.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address[]</code></td><td>List of investor addresses.</td></tr>
</tbody></table>
</div>
<h3 id="getallowusernftcount"><a class="header" href="#getallowusernftcount">getAllowUserNftCount</a></h3>
<p>Returns the allowed NFT count for an investor in a film.</p>
<pre><code class="language-solidity">function getAllowUserNftCount(uint256 _filmId, address _user) external view override returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_filmId</code></td><td><code>uint256</code></td><td>The ID of the film.</td></tr>
<tr><td><code>_user</code></td><td><code>address</code></td><td>The address of the investor.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>The allowed NFT count.</td></tr>
</tbody></table>
</div>
<h3 id="israisedfullamount"><a class="header" href="#israisedfullamount">isRaisedFullAmount</a></h3>
<p>Checks if the film funding has met the raise amount.</p>
<pre><code class="language-solidity">function isRaisedFullAmount(uint256 _filmId) public view override returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_filmId</code></td><td><code>uint256</code></td><td>The ID of the film.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>True if the raise amount is met, false otherwise.</td></tr>
</tbody></table>
</div>
<h3 id="getuserfundamountperfilm"><a class="header" href="#getuserfundamountperfilm">getUserFundAmountPerFilm</a></h3>
<p>Returns the fund amount for an investor in a film.</p>
<pre><code class="language-solidity">function getUserFundAmountPerFilm(address _customer, uint256 _filmId) public view override returns (uint256 amount_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_customer</code></td><td><code>address</code></td><td>The address of the investor.</td></tr>
<tr><td><code>_filmId</code></td><td><code>uint256</code></td><td>The ID of the film.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>amount_</code></td><td><code>uint256</code></td><td>The fund amount in USDC.</td></tr>
</tbody></table>
</div>
<h3 id="gettotalfundamountperfilm"><a class="header" href="#gettotalfundamountperfilm">getTotalFundAmountPerFilm</a></h3>
<p>Returns the total fund amount for a film.</p>
<pre><code class="language-solidity">function getTotalFundAmountPerFilm(uint256 _filmId) public view override returns (uint256 amount_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_filmId</code></td><td><code>uint256</code></td><td>The ID of the film.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>amount_</code></td><td><code>uint256</code></td><td>The total fund amount in USDC.</td></tr>
</tbody></table>
</div>
<h3 id="__getexpectedtokenamount"><a class="header" href="#__getexpectedtokenamount">__getExpectedTokenAmount</a></h3>
<p>Returns the token amount equivalent to the given USDC amount.</p>
<pre><code class="language-solidity">function __getExpectedTokenAmount(address _token, uint256 _usdcAmount) public view returns (uint256 amount_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_token</code></td><td><code>address</code></td><td>The address of the token.</td></tr>
<tr><td><code>_usdcAmount</code></td><td><code>uint256</code></td><td>The amount in USDC.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>amount_</code></td><td><code>uint256</code></td><td>The equivalent token amount.</td></tr>
</tbody></table>
</div>
<h3 id="__getexpectedusdcamount"><a class="header" href="#__getexpectedusdcamount">__getExpectedUsdcAmount</a></h3>
<p>Returns the USDC amount equivalent to the given token amount.</p>
<pre><code class="language-solidity">function __getExpectedUsdcAmount(address _token, uint256 _tokenAmount) public view returns (uint256 amount_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_token</code></td><td><code>address</code></td><td>The address of the token.</td></tr>
<tr><td><code>_tokenAmount</code></td><td><code>uint256</code></td><td>The amount of the token.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>amount_</code></td><td><code>uint256</code></td><td>The equivalent USDC amount.</td></tr>
</tbody></table>
</div>
<h3 id="__deposittofilm"><a class="header" href="#__deposittofilm">__depositToFilm</a></h3>
<p><em>Deposits an amount to a film based on specified parameters.</em></p>
<p>*Function to deposit funds to a film based on specified conditions.</p>
<ul>
<li>Requires proper authorization based on the fund type and token/NFT availability.</li>
<li>Ensures the deposited amount meets minimum and maximum deposit criteria.*</li>
</ul>
<pre><code class="language-solidity">function __depositToFilm(
    uint256 _filmId,
    uint256 _amount,
    uint256 _flag,
    uint256 _fundType,
    uint256 _userFundAmount,
    address _token
)
    private
    returns (uint256 tokenAmount_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_filmId</code></td><td><code>uint256</code></td><td>The ID of the film to deposit funds into.</td></tr>
<tr><td><code>_amount</code></td><td><code>uint256</code></td><td>The amount to deposit.</td></tr>
<tr><td><code>_flag</code></td><td><code>uint256</code></td><td>A flag indicating the type of funding operation: - 1 for token-based funding. - 2 for NFT-based funding.</td></tr>
<tr><td><code>_fundType</code></td><td><code>uint256</code></td><td>The type of funding: - 1 for token funding. - 2 for NFT funding. - 3 for NFT &amp; token funding.</td></tr>
<tr><td><code>_userFundAmount</code></td><td><code>uint256</code></td><td>The current total funds deposited by the user for the film.</td></tr>
<tr><td><code>_token</code></td><td><code>address</code></td><td>The address of the token used for funding.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>tokenAmount_</code></td><td><code>uint256</code></td><td>The amount of tokens or NFTs deposited.</td></tr>
</tbody></table>
</div>
<h3 id="__assigntoken"><a class="header" href="#__assigntoken">__assignToken</a></h3>
<p><em>Assigns a token amount to the user's funding information for a specific film.</em></p>
<p><em>Function to update or add the token amount for the user's funding information.</em></p>
<pre><code class="language-solidity">function __assignToken(uint256 _filmId, address _token, uint256 _amount) private;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_filmId</code></td><td><code>uint256</code></td><td>The ID of the film.</td></tr>
<tr><td><code>_token</code></td><td><code>address</code></td><td>The address of the token.</td></tr>
<tr><td><code>_amount</code></td><td><code>uint256</code></td><td>The amount of tokens to assign.</td></tr>
</tbody></table>
</div>
<h3 id="__removefilminvestorlist"><a class="header" href="#__removefilminvestorlist">__removeFilmInvestorList</a></h3>
<p><em>Removes a user from the investor list for a specific film.</em></p>
<pre><code class="language-solidity">function __removeFilmInvestorList(uint256 _filmId, address _user) private;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_filmId</code></td><td><code>uint256</code></td><td>The ID of the film.</td></tr>
<tr><td><code>_user</code></td><td><code>address</code></td><td>The address of the user to remove.</td></tr>
</tbody></table>
</div>
<h3 id="__isoverminamount"><a class="header" href="#__isoverminamount">__isOverMinAmount</a></h3>
<p><em>Checks if the amount is over the minimum deposit amount allowed for a film.</em></p>
<pre><code class="language-solidity">function __isOverMinAmount(uint256 _amount) private view returns (bool passed_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_amount</code></td><td><code>uint256</code></td><td>The amount to check.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>passed_</code></td><td><code>bool</code></td><td>True if the amount meets or exceeds the minimum deposit amount, otherwise false.</td></tr>
</tbody></table>
</div>
<h3 id="__islessmaxamount"><a class="header" href="#__islessmaxamount">__isLessMaxAmount</a></h3>
<p><em>Checks if the amount is less than or equal to the maximum deposit amount allowed for a film.</em></p>
<pre><code class="language-solidity">function __isLessMaxAmount(uint256 _amount) private view returns (bool passed_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_amount</code></td><td><code>uint256</code></td><td>The amount to check.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>passed_</code></td><td><code>bool</code></td><td>True if the amount is within the maximum deposit amount, otherwise false.</td></tr>
</tbody></table>
</div>
<h2 id="events-8"><a class="header" href="#events-8">Events</a></h2>
<h3 id="depositedtofilm"><a class="header" href="#depositedtofilm">DepositedToFilm</a></h3>
<p>Emitted when tokens are deposited to a film.</p>
<pre><code class="language-solidity">event DepositedToFilm(address indexed customer, uint256 indexed filmId, address token, uint256 amount, uint256 flag);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>customer</code></td><td><code>address</code></td><td>The address of the investor.</td></tr>
<tr><td><code>filmId</code></td><td><code>uint256</code></td><td>The ID of the film.</td></tr>
<tr><td><code>token</code></td><td><code>address</code></td><td>The address of the token deposited.</td></tr>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>The amount of tokens deposited.</td></tr>
<tr><td><code>flag</code></td><td><code>uint256</code></td><td>Indicates the type of deposit (1 for token, 2 for NFT).</td></tr>
</tbody></table>
</div>
<h3 id="fundfilmprocessed"><a class="header" href="#fundfilmprocessed">FundFilmProcessed</a></h3>
<p>Emitted when the funding for a film is processed.</p>
<pre><code class="language-solidity">event FundFilmProcessed(uint256 indexed filmId, address indexed studio);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>filmId</code></td><td><code>uint256</code></td><td>The ID of the film.</td></tr>
<tr><td><code>studio</code></td><td><code>address</code></td><td>The address of the studio.</td></tr>
</tbody></table>
</div>
<h3 id="fundwithdrawed"><a class="header" href="#fundwithdrawed">FundWithdrawed</a></h3>
<p>Emitted when funds are withdrawn from a film when the funding failed.</p>
<pre><code class="language-solidity">event FundWithdrawed(uint256 indexed filmId, address indexed customer);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>filmId</code></td><td><code>uint256</code></td><td>The ID of the film.</td></tr>
<tr><td><code>customer</code></td><td><code>address</code></td><td>The address of the investor.</td></tr>
</tbody></table>
</div>
<h2 id="structs-6"><a class="header" href="#structs-6">Structs</a></h2>
<h3 id="asset"><a class="header" href="#asset">Asset</a></h3>
<p>Represents an asset with its token address and amount.</p>
<pre><code class="language-solidity">struct Asset {
    address token;
    uint256 amount;
}
</code></pre>
<p><strong>Properties</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>token</code></td><td><code>address</code></td><td>The address of the token.</td></tr>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>The amount of the token.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="vabblenft"><a class="header" href="#vabblenft">VabbleNFT</a></h1>
<p><a href="https://github.com/Mill1995/VABDAO/blob/4914bdc306cbdb860037485ce4bcebbfdd390c9f/contracts/dao/VabbleNFT.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
ERC2981, ERC721Enumerable, ReentrancyGuard</p>
<p>ERC721 NFT contract with metadata extension, royalty support, and minting controls.
This contract manages the minting, transferring, and metadata retrieval of Vabble NFTs (Non-Fungible Tokens).
It supports a base URI for token metadata and a collection URI for overall contract metadata.</p>
<h2 id="state-variables-10"><a class="header" href="#state-variables-10">State Variables</a></h2>
<h3 id="baseuri-3"><a class="header" href="#baseuri-3">baseUri</a></h3>
<p><em>Base URI for retrieving token metadata.</em></p>
<pre><code class="language-solidity">string public baseUri;
</code></pre>
<h3 id="collectionuri-3"><a class="header" href="#collectionuri-3">collectionUri</a></h3>
<p><em>Collection URI for contract-level metadata.</em></p>
<pre><code class="language-solidity">string public collectionUri;
</code></pre>
<h3 id="factory"><a class="header" href="#factory">FACTORY</a></h3>
<p><em>Address of the factory contract that manages NFT creation.</em></p>
<pre><code class="language-solidity">address public immutable FACTORY;
</code></pre>
<h3 id="nftcount"><a class="header" href="#nftcount">nftCount</a></h3>
<p><em>Counter for tracking the number of minted NFTs.</em></p>
<pre><code class="language-solidity">Counters.Counter private nftCount;
</code></pre>
<h2 id="functions-10"><a class="header" href="#functions-10">Functions</a></h2>
<h3 id="constructor-10"><a class="header" href="#constructor-10">constructor</a></h3>
<p>Constructor to initialize the VabbleNFT contract.</p>
<pre><code class="language-solidity">constructor(
    string memory _baseUri,
    string memory _collectionUri,
    string memory _name,
    string memory _symbol,
    address _factory
)
    ERC721(_name, _symbol);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_baseUri</code></td><td><code>string</code></td><td>Base URI for retrieving token metadata.</td></tr>
<tr><td><code>_collectionUri</code></td><td><code>string</code></td><td>Collection URI for contract-level metadata.</td></tr>
<tr><td><code>_name</code></td><td><code>string</code></td><td>Name of the NFT contract.</td></tr>
<tr><td><code>_symbol</code></td><td><code>string</code></td><td>Symbol of the NFT contract.</td></tr>
<tr><td><code>_factory</code></td><td><code>address</code></td><td>Address of the factory contract that deploys this NFT contract.</td></tr>
</tbody></table>
</div>
<h3 id="transfernft"><a class="header" href="#transfernft">transferNFT</a></h3>
<p>Transfers ownership of an NFT from the caller to a specified recipient.</p>
<pre><code class="language-solidity">function transferNFT(uint256 _tokenId, address _to) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_tokenId</code></td><td><code>uint256</code></td><td>ID of the NFT to transfer.</td></tr>
<tr><td><code>_to</code></td><td><code>address</code></td><td>Address of the recipient to transfer the NFT to.</td></tr>
</tbody></table>
</div>
<h3 id="usertokenidlist"><a class="header" href="#usertokenidlist">userTokenIdList</a></h3>
<p>Retrieves a list of token IDs owned by a specific address.</p>
<pre><code class="language-solidity">function userTokenIdList(address _owner) external view returns (uint256[] memory _tokensOfOwner);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_owner</code></td><td><code>address</code></td><td>Address of the owner to query tokens for.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_tokensOfOwner</code></td><td><code>uint256[]</code></td><td>Array of token IDs owned by the specified address.</td></tr>
</tbody></table>
</div>
<h3 id="mintto"><a class="header" href="#mintto">mintTo</a></h3>
<p>Mints a new NFT and assigns it to the specified recipient.</p>
<p><em>Only callable by the FACTORY contract to ensure controlled minting.</em></p>
<pre><code class="language-solidity">function mintTo(address _to) public nonReentrant returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_to</code></td><td><code>address</code></td><td>Address to assign the newly minted NFT to.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>newTokenId The ID of the newly minted NFT.</td></tr>
</tbody></table>
</div>
<h3 id="supportsinterface"><a class="header" href="#supportsinterface">supportsInterface</a></h3>
<p>Checks if a specific interface is supported by this contract.</p>
<pre><code class="language-solidity">function supportsInterface(bytes4 interfaceId) public view virtual override(ERC721Enumerable, ERC2981) returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>interfaceId</code></td><td><code>bytes4</code></td><td>The interface identifier to check.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>True if the interface is supported, false otherwise.</td></tr>
</tbody></table>
</div>
<h3 id="contracturi"><a class="header" href="#contracturi">contractURI</a></h3>
<p>Retrieves the collection-level metadata URI for this contract.</p>
<pre><code class="language-solidity">function contractURI() public view returns (string memory);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>string</code></td><td>collectionUri The URI string pointing to the contract metadata.</td></tr>
</tbody></table>
</div>
<h3 id="tokenuri"><a class="header" href="#tokenuri">tokenURI</a></h3>
<p>Retrieves the token-level metadata URI for a specific NFT.</p>
<pre><code class="language-solidity">function tokenURI(uint256 _tokenId) public view virtual override returns (string memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_tokenId</code></td><td><code>uint256</code></td><td>ID of the NFT to retrieve metadata for.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>string</code></td><td>URI string pointing to the token's metadata.</td></tr>
</tbody></table>
</div>
<h3 id="totalsupply"><a class="header" href="#totalsupply">totalSupply</a></h3>
<p>Retrieves the total number of minted NFTs.</p>
<pre><code class="language-solidity">function totalSupply() public view override returns (uint256);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>Total count of minted NFTs.</td></tr>
</tbody></table>
</div>
<h3 id="_beforetokentransfer"><a class="header" href="#_beforetokentransfer">_beforeTokenTransfer</a></h3>
<p><em>Hook function called before transferring tokens.</em></p>
<pre><code class="language-solidity">function _beforeTokenTransfer(
    address from,
    address to,
    uint256 firstTokenId,
    uint256 batchSize
)
    internal
    virtual
    override(ERC721Enumerable);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>from</code></td><td><code>address</code></td><td>Address transferring the tokens.</td></tr>
<tr><td><code>to</code></td><td><code>address</code></td><td>Address receiving the tokens.</td></tr>
<tr><td><code>firstTokenId</code></td><td><code>uint256</code></td><td>ID of the first token being transferred.</td></tr>
<tr><td><code>batchSize</code></td><td><code>uint256</code></td><td>Number of tokens being transferred in the batch.</td></tr>
</tbody></table>
</div>
<h3 id="__getnexttokenid"><a class="header" href="#__getnexttokenid">__getNextTokenId</a></h3>
<p><em>Internal function to generate the next token ID for minting.</em></p>
<pre><code class="language-solidity">function __getNextTokenId() private returns (uint256 newTokenId_);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>newTokenId_</code></td><td><code>uint256</code></td><td>The next available token ID.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="vote-4"><a class="header" href="#vote-4">Vote</a></h1>
<p><a href="https://github.com/Mill1995/VABDAO/blob/4914bdc306cbdb860037485ce4bcebbfdd390c9f/contracts/dao/Vote.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="contracts/dao/Vote.sol//contracts/interfaces/IVote.sol/interface.IVote.html">IVote</a>, ReentrancyGuard</p>
<p>*This contract facilitates voting processes related to governance and film approvals within the Vabble ecosystem.
It integrates with other contracts like <code>StakingPool</code>, <code>Property</code>, and <code>VabbleDAO</code> to manage voting rights, stake
amounts, and proposal approval logic.
The contract allows stakeholders (stakers) to vote on proposals regarding governance decisions and films.
The contract includes functionality for:</p>
<ul>
<li>Voting on governance proposals for auditor changes, reward address changes, adding film board members and various
property changes.</li>
<li>Voting on film proposals for funding types, such as listing or distribution.</li>
<li>Approving film proposals based on voting outcomes.</li>
<li>Tracking voting periods and stakeholder participation.
Governance proposals and film proposals undergo distinct voting periods, ensuring transparent decision-making and
stakeholder engagement. Stakers are incentivized through rewards managed by the <code>StakingPool</code> contract, which
distributes rewards based on voting activity and stake amounts.
This contract is part of the broader Vabble ecosystem governance framework, enabling efficient and fair governance
decision-making processes. It enforces governance rules defined in the <code>Property</code> contract and interacts with the
<code>VabbleDAO</code> for film-related decisions and status updates.*</li>
</ul>
<h2 id="state-variables-11"><a class="header" href="#state-variables-11">State Variables</a></h2>
<h3 id="ownable-9"><a class="header" href="#ownable-9">OWNABLE</a></h3>
<p><em>The address of the Ownable contract.</em></p>
<pre><code class="language-solidity">address private immutable OWNABLE;
</code></pre>
<h3 id="vabble_dao-5"><a class="header" href="#vabble_dao-5">VABBLE_DAO</a></h3>
<p><em>The address of the Vabble DAO contract.</em></p>
<pre><code class="language-solidity">address private VABBLE_DAO;
</code></pre>
<h3 id="staking_pool-4"><a class="header" href="#staking_pool-4">STAKING_POOL</a></h3>
<p><em>The address of the Staking Pool contract.</em></p>
<pre><code class="language-solidity">address private STAKING_POOL;
</code></pre>
<h3 id="dao_property-4"><a class="header" href="#dao_property-4">DAO_PROPERTY</a></h3>
<p><em>The address of the Property contract.</em></p>
<pre><code class="language-solidity">address private DAO_PROPERTY;
</code></pre>
<h3 id="uni_helper-5"><a class="header" href="#uni_helper-5">UNI_HELPER</a></h3>
<p><em>The address of the Uni Helper contract.</em></p>
<pre><code class="language-solidity">address private UNI_HELPER;
</code></pre>
<h3 id="filmvoting"><a class="header" href="#filmvoting">filmVoting</a></h3>
<p>Mapping of film IDs to their corresponding Voting struct.</p>
<pre><code class="language-solidity">mapping(uint256 =&gt; Voting) public filmVoting;
</code></pre>
<h3 id="filmboardvoting"><a class="header" href="#filmboardvoting">filmBoardVoting</a></h3>
<p>Mapping of film board indices to their corresponding Voting struct.</p>
<pre><code class="language-solidity">mapping(uint256 =&gt; Voting) public filmBoardVoting;
</code></pre>
<h3 id="rewardaddressvoting"><a class="header" href="#rewardaddressvoting">rewardAddressVoting</a></h3>
<p>Mapping of reward address indices to their corresponding Voting struct.</p>
<pre><code class="language-solidity">mapping(uint256 =&gt; Voting) public rewardAddressVoting;
</code></pre>
<h3 id="propertyvoting"><a class="header" href="#propertyvoting">propertyVoting</a></h3>
<p>Mapping of property flags and indices to their corresponding Voting struct.
(flag =&gt; (property index =&gt; Voting))</p>
<pre><code class="language-solidity">mapping(uint256 =&gt; mapping(uint256 =&gt; Voting)) public propertyVoting;
</code></pre>
<h3 id="agentvoting"><a class="header" href="#agentvoting">agentVoting</a></h3>
<p>Mapping of agent indices to their corresponding AgentVoting struct.</p>
<pre><code class="language-solidity">mapping(uint256 =&gt; AgentVoting) public agentVoting;
</code></pre>
<h3 id="isattendtofilmvote"><a class="header" href="#isattendtofilmvote">isAttendToFilmVote</a></h3>
<p>Mapping to track if a staker has participated in a film vote.
Maps staker to filmId to true/false.</p>
<pre><code class="language-solidity">mapping(address =&gt; mapping(uint256 =&gt; bool)) public isAttendToFilmVote;
</code></pre>
<h3 id="isattendtoboardvote"><a class="header" href="#isattendtoboardvote">isAttendToBoardVote</a></h3>
<p>Mapping to track if a staker has participated in a film board vote.
Maps staker to filmBoard index to true/false.</p>
<pre><code class="language-solidity">mapping(address =&gt; mapping(uint256 =&gt; bool)) public isAttendToBoardVote;
</code></pre>
<h3 id="isattendtorewardaddressvote"><a class="header" href="#isattendtorewardaddressvote">isAttendToRewardAddressVote</a></h3>
<p>Mapping to track if a staker has participated in a reward address vote.
Maps staker to rewardAddress index to true/false.</p>
<pre><code class="language-solidity">mapping(address =&gt; mapping(uint256 =&gt; bool)) public isAttendToRewardAddressVote;
</code></pre>
<h3 id="isattendtoagentvote"><a class="header" href="#isattendtoagentvote">isAttendToAgentVote</a></h3>
<p>Mapping to track if a staker has participated in an agent vote.
Maps staker to agent index to true/false.</p>
<pre><code class="language-solidity">mapping(address =&gt; mapping(uint256 =&gt; bool)) public isAttendToAgentVote;
</code></pre>
<h3 id="isattendtopropertyvote"><a class="header" href="#isattendtopropertyvote">isAttendToPropertyVote</a></h3>
<p>Mapping to track if a staker has participated in a property vote.
Maps flag to staker to property index to true/false.</p>
<pre><code class="language-solidity">mapping(uint256 =&gt; mapping(address =&gt; mapping(uint256 =&gt; bool))) public isAttendToPropertyVote;
</code></pre>
<h3 id="userfilmvotecount"><a class="header" href="#userfilmvotecount">userFilmVoteCount</a></h3>
<p>Mapping of users to the count of their film votes.</p>
<pre><code class="language-solidity">mapping(address =&gt; uint256) public userFilmVoteCount;
</code></pre>
<h3 id="usergovernvotecount"><a class="header" href="#usergovernvotecount">userGovernVoteCount</a></h3>
<p>Mapping of users to the count of their governance votes.</p>
<pre><code class="language-solidity">mapping(address =&gt; uint256) public userGovernVoteCount;
</code></pre>
<h3 id="govpassedvotecount"><a class="header" href="#govpassedvotecount">govPassedVoteCount</a></h3>
<p>Mapping of governance flags to the count of passed votes.
Maps flag to passed vote count. Flags: 1 - agent, 2 - dispute, 3 - board, 4 - pool, 5 - property.</p>
<pre><code class="language-solidity">mapping(uint256 =&gt; uint256) public govPassedVoteCount;
</code></pre>
<h3 id="lastvotetime"><a class="header" href="#lastvotetime">lastVoteTime</a></h3>
<p><em>Mapping of stakers to their last vote timestamp.
Maps staker address to block.timestamp used at <code>Property::removeFilmBoardMember()</code> to check if a film board
member didn't vote during a given time period (which is the <code>Property::maxAllowPeriod</code>).</em></p>
<pre><code class="language-solidity">mapping(address =&gt; uint256) private lastVoteTime;
</code></pre>
<h3 id="proposalfilmids"><a class="header" href="#proposalfilmids">proposalFilmIds</a></h3>
<p><em>Mapping of film IDs to proposal IDs.</em></p>
<pre><code class="language-solidity">mapping(uint256 =&gt; uint256) private proposalFilmIds;
</code></pre>
<h2 id="functions-11"><a class="header" href="#functions-11">Functions</a></h2>
<h3 id="onlydeployer-6"><a class="header" href="#onlydeployer-6">onlyDeployer</a></h3>
<p><em>Restricts access to the deployer of the Ownable contract.</em></p>
<pre><code class="language-solidity">modifier onlyDeployer();
</code></pre>
<h3 id="onlystaker-1"><a class="header" href="#onlystaker-1">onlyStaker</a></h3>
<p><em>Restricts access to stakers.</em></p>
<pre><code class="language-solidity">modifier onlyStaker();
</code></pre>
<h3 id="constructor-11"><a class="header" href="#constructor-11">constructor</a></h3>
<p>Constructor to initialize the ownable address.</p>
<pre><code class="language-solidity">constructor(address _ownable);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_ownable</code></td><td><code>address</code></td><td>Address of the ownable contract.</td></tr>
</tbody></table>
</div>
<h3 id="initialize-3"><a class="header" href="#initialize-3">initialize</a></h3>
<p>Initialize Vote contract.</p>
<p><em>Throws an error if already initialized or if any of the addresses are invalid.
Only the Deployer is allowed to call this.</em></p>
<pre><code class="language-solidity">function initialize(
    address _vabbleDAO,
    address _stakingPool,
    address _property,
    address _uniHelper
)
    external
    onlyDeployer;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_vabbleDAO</code></td><td><code>address</code></td><td>Address of the VabbleDAO contract.</td></tr>
<tr><td><code>_stakingPool</code></td><td><code>address</code></td><td>Address of the StakingPool contract.</td></tr>
<tr><td><code>_property</code></td><td><code>address</code></td><td>Address of the Property contract.</td></tr>
<tr><td><code>_uniHelper</code></td><td><code>address</code></td><td>Address of the UniHelper contract.</td></tr>
</tbody></table>
</div>
<h3 id="votetoproperty"><a class="header" href="#votetoproperty">voteToProperty</a></h3>
<p>Stakers can vote to a property proposal.</p>
<p><em>Throws an error if the caller is not a staker, has already voted, or the vote info is invalid.</em></p>
<pre><code class="language-solidity">function voteToProperty(uint256 _voteInfo, uint256 _index, uint256 _flag) external onlyStaker nonReentrant;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_voteInfo</code></td><td><code>uint256</code></td><td>Vote information (1 for Yes, 2 for No).</td></tr>
<tr><td><code>_index</code></td><td><code>uint256</code></td><td>Index of the proposal.</td></tr>
<tr><td><code>_flag</code></td><td><code>uint256</code></td><td>The flag representing the type of property. 0 - Film Vote Period 1 - Agent Vote Period 2 - Dispute Grace Period 3 - Property Vote Period 4 - Lock Period 5 - Reward Rate 6 - Film Reward Claim Period 7 - Max Allow Period 8 - Proposal Fee Amount 9 - Fund Fee Percent 10 - Minimum Deposit Amount 11 - Maximum Deposit Amount 12 - Maximum Mint Fee Percent 13 - Minimum Vote Count 14 - Minimum Staker Count Percent 15 - Available VAB Amount 16 - Board Vote Period 17 - Board Vote Weight 18 - Reward Vote Period 19 - Subscription Amount 20 - Board Reward Rate</td></tr>
</tbody></table>
</div>
<h3 id="updateproperty"><a class="header" href="#updateproperty">updateProperty</a></h3>
<p>Finalize property proposal based on vote results.</p>
<p><em>Throws an error if the vote period has not ended or the proposal has already been approved.
This will interact with the <code>Property</code> contract and update the property proposal accordingly.</em></p>
<pre><code class="language-solidity">function updateProperty(uint256 _index, uint256 _flag) external onlyStaker nonReentrant;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_index</code></td><td><code>uint256</code></td><td>Index of the proposal.</td></tr>
<tr><td><code>_flag</code></td><td><code>uint256</code></td><td>The flag representing the type of property. 0 - Film Vote Period 1 - Agent Vote Period 2 - Dispute Grace Period 3 - Property Vote Period 4 - Lock Period 5 - Reward Rate 6 - Film Reward Claim Period 7 - Max Allow Period 8 - Proposal Fee Amount 9 - Fund Fee Percent 10 - Minimum Deposit Amount 11 - Maximum Deposit Amount 12 - Maximum Mint Fee Percent 13 - Minimum Vote Count 14 - Minimum Staker Count Percent 15 - Available VAB Amount 16 - Board Vote Period 17 - Board Vote Weight 18 - Reward Vote Period 19 - Subscription Amount 20 - Board Reward Rate</td></tr>
</tbody></table>
</div>
<h3 id="votetofilmboard"><a class="header" href="#votetofilmboard">voteToFilmBoard</a></h3>
<p>Stakers vote to film board member proposal.</p>
<p><em>Throws an error if the caller is not a staker, has already voted, or the vote info is invalid.</em></p>
<pre><code class="language-solidity">function voteToFilmBoard(uint256 _index, uint256 _voteInfo) external onlyStaker nonReentrant;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_index</code></td><td><code>uint256</code></td><td>Index of the proposal.</td></tr>
<tr><td><code>_voteInfo</code></td><td><code>uint256</code></td><td>Vote information (1 for Yes, 2 for No).</td></tr>
</tbody></table>
</div>
<h3 id="addfilmboard"><a class="header" href="#addfilmboard">addFilmBoard</a></h3>
<p>Finalize film board member proposal based on vote result.</p>
<p><em>Throws an error if the vote period has not ended or the proposal has already been approved.
This will interact with the <code>Property</code> contract and update the governance proposal to add a film board member
accordingly.</em></p>
<pre><code class="language-solidity">function addFilmBoard(uint256 _index) external onlyStaker nonReentrant;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_index</code></td><td><code>uint256</code></td><td>Index of the proposal.</td></tr>
</tbody></table>
</div>
<h3 id="votetoagent"><a class="header" href="#votetoagent">voteToAgent</a></h3>
<p>Stakers vote to replace the current Auditor.</p>
<p><em>Throws an error if the caller is not a staker, has already voted, or the vote info is invalid.</em></p>
<pre><code class="language-solidity">function voteToAgent(uint256 _voteInfo, uint256 _index) external onlyStaker nonReentrant;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_voteInfo</code></td><td><code>uint256</code></td><td>Vote information (1 for Yes, 2 for No).</td></tr>
<tr><td><code>_index</code></td><td><code>uint256</code></td><td>Index of the proposal.</td></tr>
</tbody></table>
</div>
<h3 id="updateagentstats"><a class="header" href="#updateagentstats">updateAgentStats</a></h3>
<p>Update auditor proposal status based on vote result.</p>
<p><em>Throws an error if the vote period has not ended or the proposal has already been updated.
This will enable the auditor dispute period, when the proposal passed voting, otherwise the proposal will be
rejected
and there is no aditional dispute period needed.</em></p>
<pre><code class="language-solidity">function updateAgentStats(uint256 _index) external onlyStaker nonReentrant;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_index</code></td><td><code>uint256</code></td><td>Index of the proposal.</td></tr>
</tbody></table>
</div>
<h3 id="disputetoagent"><a class="header" href="#disputetoagent">disputeToAgent</a></h3>
<p>Dispute an auditor proposal.</p>
<p><em>Throws an error if the proposal status is not updated, or the dispute period has elapsed.
This flow will only be available when the vote period is over and the auditor proposal passed voting.
The user who wants to dispute has to either staked double the amount of the proposal creator or paid double of
the proposal fee amount.</em></p>
<pre><code class="language-solidity">function disputeToAgent(uint256 _index, bool _pay) external onlyStaker nonReentrant;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_index</code></td><td><code>uint256</code></td><td>Index of the proposal.</td></tr>
<tr><td><code>_pay</code></td><td><code>bool</code></td><td>True if disputing by paying double the proposal fee, false if disputing by staking double the creators stake.</td></tr>
</tbody></table>
</div>
<h3 id="replaceauditor-1"><a class="header" href="#replaceauditor-1">replaceAuditor</a></h3>
<p>Replace the current Auditor based on vote results.</p>
<p><em>Throws an error if the proposal status is not updated or the dispute grace period has not ended.
This can only be called if no one disputes the auditor change during the dispute phase.
This will interact with the <code>Ownable</code> &amp; <code>Property</code> contract to replace the auditor.</em></p>
<pre><code class="language-solidity">function replaceAuditor(uint256 _index) external onlyStaker nonReentrant;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_index</code></td><td><code>uint256</code></td><td>Index of the proposal.</td></tr>
</tbody></table>
</div>
<h3 id="votetorewardaddress"><a class="header" href="#votetorewardaddress">voteToRewardAddress</a></h3>
<p>Stakers vote on a proposal to set the address to receive the DAO pool funds.</p>
<p><em>Throws an error if the caller is not a staker, has already voted, or the vote info is invalid.</em></p>
<pre><code class="language-solidity">function voteToRewardAddress(uint256 _index, uint256 _voteInfo) external onlyStaker nonReentrant;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_index</code></td><td><code>uint256</code></td><td>Index of the proposal.</td></tr>
<tr><td><code>_voteInfo</code></td><td><code>uint256</code></td><td>Vote information (1 for Yes, 2 for No).</td></tr>
</tbody></table>
</div>
<h3 id="setdaorewardaddress"><a class="header" href="#setdaorewardaddress">setDAORewardAddress</a></h3>
<p>Finalize reward address proposal based on vote result.</p>
<p><em>Throws an error if the vote period has not ended or the proposal has already been approved.
This will interact with the <code>Property</code> contract and update the governance proposal to set the reward address
accordingly. This will also trigger the <code>migration</code> flow of the DAO.</em></p>
<pre><code class="language-solidity">function setDAORewardAddress(uint256 _index) external onlyStaker nonReentrant;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_index</code></td><td><code>uint256</code></td><td>Index of the proposal.</td></tr>
</tbody></table>
</div>
<h3 id="votetofilms"><a class="header" href="#votetofilms">voteToFilms</a></h3>
<p>Vote on multiple films in a single transaction.</p>
<p><em>Throws an error if the arrays are of different lengths or if any vote info is invalid.</em></p>
<pre><code class="language-solidity">function voteToFilms(uint256[] calldata _filmIds, uint256[] calldata _voteInfos) external onlyStaker nonReentrant;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_filmIds</code></td><td><code>uint256[]</code></td><td>Array of film IDs to vote on.</td></tr>
<tr><td><code>_voteInfos</code></td><td><code>uint256[]</code></td><td>Array of vote information (1 for Yes, 2 for No) corresponding to each film.</td></tr>
</tbody></table>
</div>
<h3 id="approvefilms"><a class="header" href="#approvefilms">approveFilms</a></h3>
<p>Approve multiple films that have passed their vote period.</p>
<p><em>Throws an error if the arrays are empty or exceed the maximum allowed length.</em></p>
<pre><code class="language-solidity">function approveFilms(uint256[] calldata _filmIds) external onlyStaker nonReentrant;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_filmIds</code></td><td><code>uint256[]</code></td><td>Array of film IDs to approve.</td></tr>
</tbody></table>
</div>
<h3 id="saveproposalwithfilm"><a class="header" href="#saveproposalwithfilm">saveProposalWithFilm</a></h3>
<p>Save the proposal ID associated with a film ID.</p>
<pre><code class="language-solidity">function saveProposalWithFilm(uint256 _filmId, uint256 _proposalID) external override;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_filmId</code></td><td><code>uint256</code></td><td>The ID of the film.</td></tr>
<tr><td><code>_proposalID</code></td><td><code>uint256</code></td><td>The ID of the proposal.</td></tr>
</tbody></table>
</div>
<h3 id="getlastvotetime"><a class="header" href="#getlastvotetime">getLastVoteTime</a></h3>
<p>Get the last vote time of a member.</p>
<p><em>This is used to track if a filmboard member can be removed because he didn't voted for a given time period.</em></p>
<pre><code class="language-solidity">function getLastVoteTime(address _member) external view override returns (uint256 time_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_member</code></td><td><code>address</code></td><td>The address of the member.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>time_</code></td><td><code>uint256</code></td><td>The last vote time of the member.</td></tr>
</tbody></table>
</div>
<h3 id="isdoublestaked"><a class="header" href="#isdoublestaked">isDoubleStaked</a></h3>
<p>Check if a user has staked double the amount of the auditor change proposer.</p>
<p><em>This is used to check if a user can dispute a auditor proposal.</em></p>
<pre><code class="language-solidity">function isDoubleStaked(uint256 _index, address _user) public view returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_index</code></td><td><code>uint256</code></td><td>The index of the proposal.</td></tr>
<tr><td><code>_user</code></td><td><code>address</code></td><td>The address of the user.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>True if the user has staked double the amount, false otherwise.</td></tr>
</tbody></table>
</div>
<h3 id="__votetofilm"><a class="header" href="#__votetofilm">__voteToFilm</a></h3>
<p><em>Function to handle voting on a film.</em></p>
<p>*This function handles the logic for voting on a film proposal.
It throws an error if:</p>
<ul>
<li>The caller is the owner of the film.</li>
<li>The caller has already voted on this film.</li>
<li>The provided vote information is not 1 or 2.
It also checks the status of the film and the voting period, and updates the voting records and the caller's vote
count.*</li>
</ul>
<pre><code class="language-solidity">function __voteToFilm(uint256 _filmId, uint256 _voteInfo) private;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_filmId</code></td><td><code>uint256</code></td><td>The ID of the film to vote on.</td></tr>
<tr><td><code>_voteInfo</code></td><td><code>uint256</code></td><td>Vote information where 1 indicates 'Yes' and 2 indicates 'No'.</td></tr>
</tbody></table>
</div>
<h3 id="__approvefilm"><a class="header" href="#__approvefilm">__approveFilm</a></h3>
<p><em>Function to approve a film based on voting results.</em></p>
<p>*This function finalizes the film approval process based on the voting results.
It throws an error if:</p>
<ul>
<li>The voting period has not ended.</li>
<li>The film has already been approved.
The function checks the voting outcomes and updates the film's approval status accordingly, also recording the
reason for the decision.*</li>
</ul>
<pre><code class="language-solidity">function __approveFilm(uint256 _filmId) private;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_filmId</code></td><td><code>uint256</code></td><td>The ID of the film to approve.</td></tr>
</tbody></table>
</div>
<h3 id="__paiddoublefee"><a class="header" href="#__paiddoublefee">__paidDoubleFee</a></h3>
<p><em>Function to check if the proposal fee has been paid double.</em></p>
<p><em>This function verifies if the user has paid double the required proposal fee in VAB tokens.
A staker that wants to dispute a auditor proposal needs to either pay double the fee or stake double of the
creator.
It checks the user's balance, transfers the fee amount to the staking pool, and updates the staking pool's reward
balance.
The function returns true if the payment is successful, otherwise false.</em></p>
<pre><code class="language-solidity">function __paidDoubleFee() private returns (bool paid_);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>paid_</code></td><td><code>bool</code></td><td>Returns true if the fee has been paid double, otherwise false.</td></tr>
</tbody></table>
</div>
<h3 id="__isvoteperiod"><a class="header" href="#__isvoteperiod">__isVotePeriod</a></h3>
<p><em>Function to check if the vote period is still ongoing.</em></p>
<p><em>This function calculates if the current time is within the vote period duration from the start time.
It throws an error if the start time is zero.</em></p>
<pre><code class="language-solidity">function __isVotePeriod(uint256 _period, uint256 _startTime) private view returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_period</code></td><td><code>uint256</code></td><td>The duration of the vote period in seconds.</td></tr>
<tr><td><code>_startTime</code></td><td><code>uint256</code></td><td>The start time of the vote period as a Unix timestamp.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>Returns true if the vote period is still ongoing, otherwise false.</td></tr>
</tbody></table>
</div>
<h2 id="events-9"><a class="header" href="#events-9">Events</a></h2>
<h3 id="votedtoproperty"><a class="header" href="#votedtoproperty">VotedToProperty</a></h3>
<p>Emitted when a vote is cast for a property.</p>
<pre><code class="language-solidity">event VotedToProperty(address indexed voter, uint256 flag, uint256 propertyVal, uint256 voteInfo, uint256 index);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>voter</code></td><td><code>address</code></td><td>The address of the voter.</td></tr>
<tr><td><code>flag</code></td><td><code>uint256</code></td><td>The flag indicating the property type.</td></tr>
<tr><td><code>propertyVal</code></td><td><code>uint256</code></td><td>The value of the property.</td></tr>
<tr><td><code>voteInfo</code></td><td><code>uint256</code></td><td>The vote information.</td></tr>
<tr><td><code>index</code></td><td><code>uint256</code></td><td>The index of the property proposal.</td></tr>
</tbody></table>
</div>
<h3 id="votedtoagent"><a class="header" href="#votedtoagent">VotedToAgent</a></h3>
<p>Emitted when a vote is cast for an agent.</p>
<pre><code class="language-solidity">event VotedToAgent(address indexed voter, address indexed agent, uint256 voteInfo, uint256 index);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>voter</code></td><td><code>address</code></td><td>The address of the voter.</td></tr>
<tr><td><code>agent</code></td><td><code>address</code></td><td>The address of the agent being voted on.</td></tr>
<tr><td><code>voteInfo</code></td><td><code>uint256</code></td><td>The vote information (1 for yes, 2 for no).</td></tr>
<tr><td><code>index</code></td><td><code>uint256</code></td><td>The index of the agent proposal.</td></tr>
</tbody></table>
</div>
<h3 id="votedtopooladdress"><a class="header" href="#votedtopooladdress">VotedToPoolAddress</a></h3>
<p>Emitted when a vote is cast for a reward address.</p>
<pre><code class="language-solidity">event VotedToPoolAddress(address indexed voter, address rewardAddress, uint256 voteInfo, uint256 index);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>voter</code></td><td><code>address</code></td><td>The address of the voter.</td></tr>
<tr><td><code>rewardAddress</code></td><td><code>address</code></td><td>The address of the reward.</td></tr>
<tr><td><code>voteInfo</code></td><td><code>uint256</code></td><td>The vote information.</td></tr>
<tr><td><code>index</code></td><td><code>uint256</code></td><td>The index of the reward address proposal.</td></tr>
</tbody></table>
</div>
<h3 id="votedtofilmboard"><a class="header" href="#votedtofilmboard">VotedToFilmBoard</a></h3>
<p>Emitted when a vote is cast for a film board member.</p>
<pre><code class="language-solidity">event VotedToFilmBoard(address indexed voter, address candidate, uint256 voteInfo, uint256 index);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>voter</code></td><td><code>address</code></td><td>The address of the voter.</td></tr>
<tr><td><code>candidate</code></td><td><code>address</code></td><td>The address of the candidate.</td></tr>
<tr><td><code>voteInfo</code></td><td><code>uint256</code></td><td>The vote information.</td></tr>
<tr><td><code>index</code></td><td><code>uint256</code></td><td>The index of the film board proposal.</td></tr>
</tbody></table>
</div>
<h3 id="votedtofilm"><a class="header" href="#votedtofilm">VotedToFilm</a></h3>
<p>Emitted when a vote is cast for a film.</p>
<pre><code class="language-solidity">event VotedToFilm(address indexed voter, uint256 indexed filmId, uint256 voteInfo);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>voter</code></td><td><code>address</code></td><td>The address of the voter.</td></tr>
<tr><td><code>filmId</code></td><td><code>uint256</code></td><td>The ID of the film being voted on.</td></tr>
<tr><td><code>voteInfo</code></td><td><code>uint256</code></td><td>The vote information (1 for yes, 2 for no).</td></tr>
</tbody></table>
</div>
<h3 id="propertyupdated"><a class="header" href="#propertyupdated">PropertyUpdated</a></h3>
<p>Emitted when a property is updated.</p>
<pre><code class="language-solidity">event PropertyUpdated(
    uint256 indexed whichProperty, uint256 propertyValue, address caller, uint256 reason, uint256 index
);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>whichProperty</code></td><td><code>uint256</code></td><td>The ID of the property.</td></tr>
<tr><td><code>propertyValue</code></td><td><code>uint256</code></td><td>The value of the property.</td></tr>
<tr><td><code>caller</code></td><td><code>address</code></td><td>The address of the caller who updated the property.</td></tr>
<tr><td><code>reason</code></td><td><code>uint256</code></td><td>The reason for the update.</td></tr>
<tr><td><code>index</code></td><td><code>uint256</code></td><td>The index of the property proposal.</td></tr>
</tbody></table>
</div>
<h3 id="updatedagentstats"><a class="header" href="#updatedagentstats">UpdatedAgentStats</a></h3>
<p>Emitted when agent stats are updated.</p>
<pre><code class="language-solidity">event UpdatedAgentStats(address indexed agent, address caller, uint256 reason, uint256 index);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>agent</code></td><td><code>address</code></td><td>The address of the agent.</td></tr>
<tr><td><code>caller</code></td><td><code>address</code></td><td>The address of the caller who updated the stats.</td></tr>
<tr><td><code>reason</code></td><td><code>uint256</code></td><td>The reason for the update.</td></tr>
<tr><td><code>index</code></td><td><code>uint256</code></td><td>The index of the agent proposal.</td></tr>
</tbody></table>
</div>
<h3 id="disputedtoagent"><a class="header" href="#disputedtoagent">DisputedToAgent</a></h3>
<p>Emitted when a dispute is raised against an agent.</p>
<pre><code class="language-solidity">event DisputedToAgent(address indexed caller, address indexed agent, uint256 index);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>caller</code></td><td><code>address</code></td><td>The address of the caller raising the dispute.</td></tr>
<tr><td><code>agent</code></td><td><code>address</code></td><td>The address of the agent being disputed.</td></tr>
<tr><td><code>index</code></td><td><code>uint256</code></td><td>The index of the agent proposal.</td></tr>
</tbody></table>
</div>
<h3 id="auditorreplaced"><a class="header" href="#auditorreplaced">AuditorReplaced</a></h3>
<p>Emitted when an auditor is replaced.</p>
<pre><code class="language-solidity">event AuditorReplaced(address indexed agent, address caller);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>agent</code></td><td><code>address</code></td><td>The address of the replaced agent.</td></tr>
<tr><td><code>caller</code></td><td><code>address</code></td><td>The address of the caller who replaced the auditor.</td></tr>
</tbody></table>
</div>
<h3 id="pooladdressadded"><a class="header" href="#pooladdressadded">PoolAddressAdded</a></h3>
<p>Emitted when a pool address is added.</p>
<pre><code class="language-solidity">event PoolAddressAdded(address indexed pool, address caller, uint256 reason, uint256 index);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>pool</code></td><td><code>address</code></td><td>The address of the pool.</td></tr>
<tr><td><code>caller</code></td><td><code>address</code></td><td>The address of the caller who added the pool address.</td></tr>
<tr><td><code>reason</code></td><td><code>uint256</code></td><td>The reason for adding the pool address.</td></tr>
<tr><td><code>index</code></td><td><code>uint256</code></td><td>The index of the pool address proposal.</td></tr>
</tbody></table>
</div>
<h3 id="filmboardadded"><a class="header" href="#filmboardadded">FilmBoardAdded</a></h3>
<p>Emitted when a film board member is added.</p>
<pre><code class="language-solidity">event FilmBoardAdded(address indexed boardMember, address caller, uint256 reason, uint256 index);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>boardMember</code></td><td><code>address</code></td><td>The address of the new board member.</td></tr>
<tr><td><code>caller</code></td><td><code>address</code></td><td>The address of the caller who added the board member.</td></tr>
<tr><td><code>reason</code></td><td><code>uint256</code></td><td>The reason for adding the board member.</td></tr>
<tr><td><code>index</code></td><td><code>uint256</code></td><td>The index of the film board proposal.</td></tr>
</tbody></table>
</div>
<h3 id="filmapproved"><a class="header" href="#filmapproved">FilmApproved</a></h3>
<p>Emitted when a film is approved.</p>
<pre><code class="language-solidity">event FilmApproved(uint256 indexed filmId, uint256 fundType, uint256 reason);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>filmId</code></td><td><code>uint256</code></td><td>The ID of the film.</td></tr>
<tr><td><code>fundType</code></td><td><code>uint256</code></td><td>The type of fund (0 for distribution, 1 for funding).</td></tr>
<tr><td><code>reason</code></td><td><code>uint256</code></td><td>The reason for approval.</td></tr>
</tbody></table>
</div>
<h2 id="structs-7"><a class="header" href="#structs-7">Structs</a></h2>
<h3 id="voting"><a class="header" href="#voting">Voting</a></h3>
<p><em>Struct representing the details of a voting process.</em></p>
<pre><code class="language-solidity">struct Voting {
    uint256 stakeAmount_1;
    uint256 stakeAmount_2;
    uint256 voteCount_1;
    uint256 voteCount_2;
}
</code></pre>
<p><strong>Properties</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>stakeAmount_1</code></td><td><code>uint256</code></td><td>The total amount staked by voters who voted "yes".</td></tr>
<tr><td><code>stakeAmount_2</code></td><td><code>uint256</code></td><td>The total amount staked by voters who voted "no".</td></tr>
<tr><td><code>voteCount_1</code></td><td><code>uint256</code></td><td>The total number of votes cast as "yes".</td></tr>
<tr><td><code>voteCount_2</code></td><td><code>uint256</code></td><td>The total number of votes cast as "no".</td></tr>
</tbody></table>
</div>
<h3 id="agentvoting-1"><a class="header" href="#agentvoting-1">AgentVoting</a></h3>
<p><em>Struct representing the details of an agent-specific voting process.</em></p>
<pre><code class="language-solidity">struct AgentVoting {
    uint256 stakeAmount_1;
    uint256 stakeAmount_2;
    uint256 voteCount_1;
    uint256 voteCount_2;
}
</code></pre>
<p><strong>Properties</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>stakeAmount_1</code></td><td><code>uint256</code></td><td>The total amount staked by voters who voted "yes".</td></tr>
<tr><td><code>stakeAmount_2</code></td><td><code>uint256</code></td><td>The total amount staked by voters who voted "no".</td></tr>
<tr><td><code>voteCount_1</code></td><td><code>uint256</code></td><td>The total number of votes cast as "yes".</td></tr>
<tr><td><code>voteCount_2</code></td><td><code>uint256</code></td><td>The total number of votes cast as "no".</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="contents-1"><a class="header" href="#contents-1">Contents</a></h1>
<ul>
<li><a href="contracts/interfaces/IFactoryFilmNFT.sol/interface.IFactoryFilmNFT.html">IFactoryFilmNFT</a></li>
<li><a href="contracts/interfaces/IOwnablee.sol/interface.IOwnablee.html">IOwnablee</a></li>
<li><a href="contracts/interfaces/IProperty.sol/interface.IProperty.html">IProperty</a></li>
<li><a href="contracts/interfaces/IStakingPool.sol/interface.IStakingPool.html">IStakingPool</a></li>
<li><a href="contracts/interfaces/IUniHelper.sol/interface.IUniHelper.html">IUniHelper</a></li>
<li><a href="contracts/interfaces/IUniswapV2Factory.sol/interface.IUniswapV2Factory.html">IUniswapV2Factory</a></li>
<li><a href="contracts/interfaces/IUniswapV2Router.sol/interface.IUniswapV2Router.html">IUniswapV2Router</a></li>
<li><a href="contracts/interfaces/IVabbleDAO.sol/interface.IVabbleDAO.html">IVabbleDAO</a></li>
<li><a href="contracts/interfaces/IVabbleFund.sol/interface.IVabbleFund.html">IVabbleFund</a></li>
<li><a href="contracts/interfaces/IVote.sol/interface.IVote.html">IVote</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ifactoryfilmnft"><a class="header" href="#ifactoryfilmnft">IFactoryFilmNFT</a></h1>
<p><a href="https://github.com/Mill1995/VABDAO/blob/4914bdc306cbdb860037485ce4bcebbfdd390c9f/contracts/interfaces/IFactoryFilmNFT.sol">Git Source</a></p>
<h2 id="functions-12"><a class="header" href="#functions-12">Functions</a></h2>
<h3 id="getmintinfo-2"><a class="header" href="#getmintinfo-2">getMintInfo</a></h3>
<pre><code class="language-solidity">function getMintInfo(uint256 _filmId)
    external
    view
    returns (uint256 tier_, uint256 maxMintAmount_, uint256 mintPrice_, address nft_, address studio_);
</code></pre>
<h3 id="gettotalsupply-3"><a class="header" href="#gettotalsupply-3">getTotalSupply</a></h3>
<pre><code class="language-solidity">function getTotalSupply(uint256 _filmId) external view returns (uint256);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="iownablee"><a class="header" href="#iownablee">IOwnablee</a></h1>
<p><a href="https://github.com/Mill1995/VABDAO/blob/4914bdc306cbdb860037485ce4bcebbfdd390c9f/contracts/interfaces/IOwnablee.sol">Git Source</a></p>
<h2 id="functions-13"><a class="header" href="#functions-13">Functions</a></h2>
<h3 id="auditor-1"><a class="header" href="#auditor-1">auditor</a></h3>
<pre><code class="language-solidity">function auditor() external view returns (address);
</code></pre>
<h3 id="deployer-1"><a class="header" href="#deployer-1">deployer</a></h3>
<pre><code class="language-solidity">function deployer() external view returns (address);
</code></pre>
<h3 id="replaceauditor-2"><a class="header" href="#replaceauditor-2">replaceAuditor</a></h3>
<pre><code class="language-solidity">function replaceAuditor(address _newAuditor) external;
</code></pre>
<h3 id="transferauditor-1"><a class="header" href="#transferauditor-1">transferAuditor</a></h3>
<pre><code class="language-solidity">function transferAuditor(address _newAuditor) external;
</code></pre>
<h3 id="isdepositasset-1"><a class="header" href="#isdepositasset-1">isDepositAsset</a></h3>
<pre><code class="language-solidity">function isDepositAsset(address _asset) external view returns (bool);
</code></pre>
<h3 id="getdepositassetlist-1"><a class="header" href="#getdepositassetlist-1">getDepositAssetList</a></h3>
<pre><code class="language-solidity">function getDepositAssetList() external view returns (address[] memory);
</code></pre>
<h3 id="vab_wallet-1"><a class="header" href="#vab_wallet-1">VAB_WALLET</a></h3>
<pre><code class="language-solidity">function VAB_WALLET() external view returns (address);
</code></pre>
<h3 id="usdc_token-1"><a class="header" href="#usdc_token-1">USDC_TOKEN</a></h3>
<pre><code class="language-solidity">function USDC_TOKEN() external view returns (address);
</code></pre>
<h3 id="payout_token-1"><a class="header" href="#payout_token-1">PAYOUT_TOKEN</a></h3>
<pre><code class="language-solidity">function PAYOUT_TOKEN() external view returns (address);
</code></pre>
<h3 id="addtostudiopool-1"><a class="header" href="#addtostudiopool-1">addToStudioPool</a></h3>
<pre><code class="language-solidity">function addToStudioPool(uint256 _amount) external;
</code></pre>
<h3 id="withdrawvabfromedgepool-1"><a class="header" href="#withdrawvabfromedgepool-1">withdrawVABFromEdgePool</a></h3>
<pre><code class="language-solidity">function withdrawVABFromEdgePool(address _to) external returns (uint256);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="iproperty"><a class="header" href="#iproperty">IProperty</a></h1>
<p><a href="https://github.com/Mill1995/VABDAO/blob/4914bdc306cbdb860037485ce4bcebbfdd390c9f/contracts/interfaces/IProperty.sol">Git Source</a></p>
<h2 id="functions-14"><a class="header" href="#functions-14">Functions</a></h2>
<h3 id="filmvoteperiod-1"><a class="header" href="#filmvoteperiod-1">filmVotePeriod</a></h3>
<pre><code class="language-solidity">function filmVotePeriod() external view returns (uint256);
</code></pre>
<h3 id="agentvoteperiod-1"><a class="header" href="#agentvoteperiod-1">agentVotePeriod</a></h3>
<pre><code class="language-solidity">function agentVotePeriod() external view returns (uint256);
</code></pre>
<h3 id="disputegraceperiod-1"><a class="header" href="#disputegraceperiod-1">disputeGracePeriod</a></h3>
<pre><code class="language-solidity">function disputeGracePeriod() external view returns (uint256);
</code></pre>
<h3 id="propertyvoteperiod-1"><a class="header" href="#propertyvoteperiod-1">propertyVotePeriod</a></h3>
<pre><code class="language-solidity">function propertyVotePeriod() external view returns (uint256);
</code></pre>
<h3 id="lockperiod-1"><a class="header" href="#lockperiod-1">lockPeriod</a></h3>
<pre><code class="language-solidity">function lockPeriod() external view returns (uint256);
</code></pre>
<h3 id="rewardrate-1"><a class="header" href="#rewardrate-1">rewardRate</a></h3>
<pre><code class="language-solidity">function rewardRate() external view returns (uint256);
</code></pre>
<h3 id="filmrewardclaimperiod-1"><a class="header" href="#filmrewardclaimperiod-1">filmRewardClaimPeriod</a></h3>
<pre><code class="language-solidity">function filmRewardClaimPeriod() external view returns (uint256);
</code></pre>
<h3 id="maxallowperiod-1"><a class="header" href="#maxallowperiod-1">maxAllowPeriod</a></h3>
<pre><code class="language-solidity">function maxAllowPeriod() external view returns (uint256);
</code></pre>
<h3 id="proposalfeeamount-1"><a class="header" href="#proposalfeeamount-1">proposalFeeAmount</a></h3>
<pre><code class="language-solidity">function proposalFeeAmount() external view returns (uint256);
</code></pre>
<h3 id="fundfeepercent-1"><a class="header" href="#fundfeepercent-1">fundFeePercent</a></h3>
<pre><code class="language-solidity">function fundFeePercent() external view returns (uint256);
</code></pre>
<h3 id="mindepositamount-1"><a class="header" href="#mindepositamount-1">minDepositAmount</a></h3>
<pre><code class="language-solidity">function minDepositAmount() external view returns (uint256);
</code></pre>
<h3 id="maxdepositamount-1"><a class="header" href="#maxdepositamount-1">maxDepositAmount</a></h3>
<pre><code class="language-solidity">function maxDepositAmount() external view returns (uint256);
</code></pre>
<h3 id="maxmintfeepercent-1"><a class="header" href="#maxmintfeepercent-1">maxMintFeePercent</a></h3>
<pre><code class="language-solidity">function maxMintFeePercent() external view returns (uint256);
</code></pre>
<h3 id="minvotecount-1"><a class="header" href="#minvotecount-1">minVoteCount</a></h3>
<pre><code class="language-solidity">function minVoteCount() external view returns (uint256);
</code></pre>
<h3 id="minstakercountpercent-1"><a class="header" href="#minstakercountpercent-1">minStakerCountPercent</a></h3>
<pre><code class="language-solidity">function minStakerCountPercent() external view returns (uint256);
</code></pre>
<h3 id="availablevabamount-1"><a class="header" href="#availablevabamount-1">availableVABAmount</a></h3>
<pre><code class="language-solidity">function availableVABAmount() external view returns (uint256);
</code></pre>
<h3 id="boardvoteperiod-1"><a class="header" href="#boardvoteperiod-1">boardVotePeriod</a></h3>
<pre><code class="language-solidity">function boardVotePeriod() external view returns (uint256);
</code></pre>
<h3 id="boardvoteweight-1"><a class="header" href="#boardvoteweight-1">boardVoteWeight</a></h3>
<pre><code class="language-solidity">function boardVoteWeight() external view returns (uint256);
</code></pre>
<h3 id="rewardvoteperiod-1"><a class="header" href="#rewardvoteperiod-1">rewardVotePeriod</a></h3>
<pre><code class="language-solidity">function rewardVotePeriod() external view returns (uint256);
</code></pre>
<h3 id="subscriptionamount-1"><a class="header" href="#subscriptionamount-1">subscriptionAmount</a></h3>
<pre><code class="language-solidity">function subscriptionAmount() external view returns (uint256);
</code></pre>
<h3 id="boardrewardrate-1"><a class="header" href="#boardrewardrate-1">boardRewardRate</a></h3>
<pre><code class="language-solidity">function boardRewardRate() external view returns (uint256);
</code></pre>
<h3 id="dao_fund_reward-1"><a class="header" href="#dao_fund_reward-1">DAO_FUND_REWARD</a></h3>
<pre><code class="language-solidity">function DAO_FUND_REWARD() external view returns (address);
</code></pre>
<h3 id="updatelastvotetime"><a class="header" href="#updatelastvotetime">updateLastVoteTime</a></h3>
<pre><code class="language-solidity">function updateLastVoteTime(address _member) external;
</code></pre>
<h3 id="getpropertyproposalinfo-1"><a class="header" href="#getpropertyproposalinfo-1">getPropertyProposalInfo</a></h3>
<pre><code class="language-solidity">function getPropertyProposalInfo(
    uint256 _index,
    uint256 _flag
)
    external
    view
    returns (uint256, uint256, uint256, uint256, address, Helper.Status);
</code></pre>
<h3 id="getgovproposalinfo-1"><a class="header" href="#getgovproposalinfo-1">getGovProposalInfo</a></h3>
<pre><code class="language-solidity">function getGovProposalInfo(
    uint256 _index,
    uint256 _flag
)
    external
    view
    returns (uint256, uint256, uint256, address, address, Helper.Status);
</code></pre>
<h3 id="updatepropertyproposal-1"><a class="header" href="#updatepropertyproposal-1">updatePropertyProposal</a></h3>
<pre><code class="language-solidity">function updatePropertyProposal(uint256 _index, uint256 _flag, uint256 _approveStatus) external;
</code></pre>
<h3 id="updategovproposal-1"><a class="header" href="#updategovproposal-1">updateGovProposal</a></h3>
<pre><code class="language-solidity">function updateGovProposal(uint256 _index, uint256 _flag, uint256 _approveStatus) external;
</code></pre>
<h3 id="checkgovwhitelist-1"><a class="header" href="#checkgovwhitelist-1">checkGovWhitelist</a></h3>
<pre><code class="language-solidity">function checkGovWhitelist(uint256 _flag, address _address) external view returns (uint256);
</code></pre>
<h3 id="checkpropertywhitelist-1"><a class="header" href="#checkpropertywhitelist-1">checkPropertyWhitelist</a></h3>
<pre><code class="language-solidity">function checkPropertyWhitelist(uint256 _flag, uint256 _property) external view returns (uint256);
</code></pre>
<h3 id="getagentproposerstakeamount-1"><a class="header" href="#getagentproposerstakeamount-1">getAgentProposerStakeAmount</a></h3>
<pre><code class="language-solidity">function getAgentProposerStakeAmount(uint256 _index) external view returns (uint256);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="istakingpool"><a class="header" href="#istakingpool">IStakingPool</a></h1>
<p><a href="https://github.com/Mill1995/VABDAO/blob/4914bdc306cbdb860037485ce4bcebbfdd390c9f/contracts/interfaces/IStakingPool.sol">Git Source</a></p>
<h2 id="functions-15"><a class="header" href="#functions-15">Functions</a></h2>
<h3 id="getstakeamount-1"><a class="header" href="#getstakeamount-1">getStakeAmount</a></h3>
<pre><code class="language-solidity">function getStakeAmount(address _user) external view returns (uint256 amount_);
</code></pre>
<h3 id="getwithdrawabletime-1"><a class="header" href="#getwithdrawabletime-1">getWithdrawableTime</a></h3>
<pre><code class="language-solidity">function getWithdrawableTime(address _user) external view returns (uint256 time_);
</code></pre>
<h3 id="addvoteddata-1"><a class="header" href="#addvoteddata-1">addVotedData</a></h3>
<pre><code class="language-solidity">function addVotedData(address _user, uint256 _time, uint256 _proposalID) external;
</code></pre>
<h3 id="addrewardtopool-1"><a class="header" href="#addrewardtopool-1">addRewardToPool</a></h3>
<pre><code class="language-solidity">function addRewardToPool(uint256 _amount) external;
</code></pre>
<h3 id="getlimitcount-1"><a class="header" href="#getlimitcount-1">getLimitCount</a></h3>
<pre><code class="language-solidity">function getLimitCount() external view returns (uint256 count_);
</code></pre>
<h3 id="lastfundproposalcreatetime-1"><a class="header" href="#lastfundproposalcreatetime-1">lastfundProposalCreateTime</a></h3>
<pre><code class="language-solidity">function lastfundProposalCreateTime() external view returns (uint256);
</code></pre>
<h3 id="updatelastfundproposalcreatetime-1"><a class="header" href="#updatelastfundproposalcreatetime-1">updateLastfundProposalCreateTime</a></h3>
<pre><code class="language-solidity">function updateLastfundProposalCreateTime(uint256 _time) external;
</code></pre>
<h3 id="addproposaldata-1"><a class="header" href="#addproposaldata-1">addProposalData</a></h3>
<pre><code class="language-solidity">function addProposalData(address _creator, uint256 _cTime, uint256 _period) external returns (uint256);
</code></pre>
<h3 id="getrentvabamount-1"><a class="header" href="#getrentvabamount-1">getRentVABAmount</a></h3>
<pre><code class="language-solidity">function getRentVABAmount(address _user) external view returns (uint256 amount_);
</code></pre>
<h3 id="sendvab-1"><a class="header" href="#sendvab-1">sendVAB</a></h3>
<pre><code class="language-solidity">function sendVAB(address[] calldata _users, address _to, uint256[] calldata _amounts) external returns (uint256);
</code></pre>
<h3 id="calcmigrationvab-1"><a class="header" href="#calcmigrationvab-1">calcMigrationVAB</a></h3>
<pre><code class="language-solidity">function calcMigrationVAB() external;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="iunihelper"><a class="header" href="#iunihelper">IUniHelper</a></h1>
<p><a href="https://github.com/Mill1995/VABDAO/blob/4914bdc306cbdb860037485ce4bcebbfdd390c9f/contracts/interfaces/IUniHelper.sol">Git Source</a></p>
<p>Interface for Helper</p>
<h2 id="functions-16"><a class="header" href="#functions-16">Functions</a></h2>
<h3 id="expectedamount-1"><a class="header" href="#expectedamount-1">expectedAmount</a></h3>
<pre><code class="language-solidity">function expectedAmount(
    uint256 _depositAmount,
    address _depositAsset,
    address _incomingAsset
)
    external
    view
    returns (uint256 amount_);
</code></pre>
<h3 id="swapasset-1"><a class="header" href="#swapasset-1">swapAsset</a></h3>
<pre><code class="language-solidity">function swapAsset(bytes calldata _swapArgs) external returns (uint256 amount_);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="iuniswapv2factory"><a class="header" href="#iuniswapv2factory">IUniswapV2Factory</a></h1>
<p><a href="https://github.com/Mill1995/VABDAO/blob/4914bdc306cbdb860037485ce4bcebbfdd390c9f/contracts/interfaces/IUniswapV2Factory.sol">Git Source</a></p>
<h2 id="functions-17"><a class="header" href="#functions-17">Functions</a></h2>
<h3 id="feeto"><a class="header" href="#feeto">feeTo</a></h3>
<pre><code class="language-solidity">function feeTo() external view returns (address);
</code></pre>
<h3 id="feetosetter"><a class="header" href="#feetosetter">feeToSetter</a></h3>
<pre><code class="language-solidity">function feeToSetter() external view returns (address);
</code></pre>
<h3 id="getpair"><a class="header" href="#getpair">getPair</a></h3>
<pre><code class="language-solidity">function getPair(address tokenA, address tokenB) external view returns (address pair);
</code></pre>
<h3 id="allpairs"><a class="header" href="#allpairs">allPairs</a></h3>
<pre><code class="language-solidity">function allPairs(uint256) external view returns (address pair);
</code></pre>
<h3 id="allpairslength"><a class="header" href="#allpairslength">allPairsLength</a></h3>
<pre><code class="language-solidity">function allPairsLength() external view returns (uint256);
</code></pre>
<h3 id="createpair"><a class="header" href="#createpair">createPair</a></h3>
<pre><code class="language-solidity">function createPair(address tokenA, address tokenB) external returns (address pair);
</code></pre>
<h3 id="setfeeto"><a class="header" href="#setfeeto">setFeeTo</a></h3>
<pre><code class="language-solidity">function setFeeTo(address) external;
</code></pre>
<h3 id="setfeetosetter"><a class="header" href="#setfeetosetter">setFeeToSetter</a></h3>
<pre><code class="language-solidity">function setFeeToSetter(address) external;
</code></pre>
<h2 id="events-10"><a class="header" href="#events-10">Events</a></h2>
<h3 id="paircreated"><a class="header" href="#paircreated">PairCreated</a></h3>
<pre><code class="language-solidity">event PairCreated(address indexed token0, address indexed token1, address pair, uint256);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="iuniswapv2router"><a class="header" href="#iuniswapv2router">IUniswapV2Router</a></h1>
<p><a href="https://github.com/Mill1995/VABDAO/blob/4914bdc306cbdb860037485ce4bcebbfdd390c9f/contracts/interfaces/IUniswapV2Router.sol">Git Source</a></p>
<h2 id="functions-18"><a class="header" href="#functions-18">Functions</a></h2>
<h3 id="factory-1"><a class="header" href="#factory-1">factory</a></h3>
<pre><code class="language-solidity">function factory() external pure returns (address);
</code></pre>
<h3 id="weth"><a class="header" href="#weth">WETH</a></h3>
<pre><code class="language-solidity">function WETH() external pure returns (address);
</code></pre>
<h3 id="addliquidity"><a class="header" href="#addliquidity">addLiquidity</a></h3>
<pre><code class="language-solidity">function addLiquidity(
    address tokenA,
    address tokenB,
    uint256 amountADesired,
    uint256 amountBDesired,
    uint256 amountAMin,
    uint256 amountBMin,
    address to,
    uint256 deadline
)
    external
    returns (uint256 amountA, uint256 amountB, uint256 liquidity);
</code></pre>
<h3 id="addliquidityeth"><a class="header" href="#addliquidityeth">addLiquidityETH</a></h3>
<pre><code class="language-solidity">function addLiquidityETH(
    address token,
    uint256 amountTokenDesired,
    uint256 amountTokenMin,
    uint256 amountETHMin,
    address to,
    uint256 deadline
)
    external
    payable
    returns (uint256 amountToken, uint256 amountETH, uint256 liquidity);
</code></pre>
<h3 id="removeliquidity"><a class="header" href="#removeliquidity">removeLiquidity</a></h3>
<pre><code class="language-solidity">function removeLiquidity(
    address,
    address,
    uint256,
    uint256,
    uint256,
    address,
    uint256
)
    external
    returns (uint256, uint256);
</code></pre>
<h3 id="swapexacttokensfortokens"><a class="header" href="#swapexacttokensfortokens">swapExactTokensForTokens</a></h3>
<pre><code class="language-solidity">function swapExactTokensForTokens(
    uint256 amountIn,
    uint256 amountOutMin,
    address[] calldata path,
    address to,
    uint256 deadline
)
    external
    returns (uint256[] memory amounts);
</code></pre>
<h3 id="swapexactethfortokens"><a class="header" href="#swapexactethfortokens">swapExactETHForTokens</a></h3>
<pre><code class="language-solidity">function swapExactETHForTokens(
    uint256 amountOutMin,
    address[] calldata path,
    address to,
    uint256 deadline
)
    external
    payable
    returns (uint256[] memory amounts);
</code></pre>
<h3 id="swaptokensforexacteth"><a class="header" href="#swaptokensforexacteth">swapTokensForExactETH</a></h3>
<pre><code class="language-solidity">function swapTokensForExactETH(
    uint256 amountOut,
    uint256 amountInMax,
    address[] calldata path,
    address to,
    uint256 deadline
)
    external
    returns (uint256[] memory amounts);
</code></pre>
<h3 id="swapexacttokensforeth"><a class="header" href="#swapexacttokensforeth">swapExactTokensForETH</a></h3>
<pre><code class="language-solidity">function swapExactTokensForETH(
    uint256 amountIn,
    uint256 amountOutMin,
    address[] calldata path,
    address to,
    uint256 deadline
)
    external
    returns (uint256[] memory amounts);
</code></pre>
<h3 id="swapethforexacttokens"><a class="header" href="#swapethforexacttokens">swapETHForExactTokens</a></h3>
<pre><code class="language-solidity">function swapETHForExactTokens(
    uint256 amountOut,
    address[] calldata path,
    address to,
    uint256 deadline
)
    external
    payable
    returns (uint256[] memory amounts);
</code></pre>
<h3 id="getamountout"><a class="header" href="#getamountout">getAmountOut</a></h3>
<pre><code class="language-solidity">function getAmountOut(
    uint256 amountIn,
    uint256 reserveIn,
    uint256 reserveOut
)
    external
    pure
    returns (uint256 amountOut);
</code></pre>
<h3 id="getamountin"><a class="header" href="#getamountin">getAmountIn</a></h3>
<pre><code class="language-solidity">function getAmountIn(
    uint256 amountOut,
    uint256 reserveIn,
    uint256 reserveOut
)
    external
    pure
    returns (uint256 amountIn);
</code></pre>
<h3 id="getamountsout"><a class="header" href="#getamountsout">getAmountsOut</a></h3>
<pre><code class="language-solidity">function getAmountsOut(uint256 amountIn, address[] calldata path) external view returns (uint256[] memory amounts);
</code></pre>
<h3 id="getamountsin"><a class="header" href="#getamountsin">getAmountsIn</a></h3>
<pre><code class="language-solidity">function getAmountsIn(uint256 amountOut, address[] calldata path) external view returns (uint256[] memory amounts);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ivabbledao"><a class="header" href="#ivabbledao">IVabbleDAO</a></h1>
<p><a href="https://github.com/Mill1995/VABDAO/blob/4914bdc306cbdb860037485ce4bcebbfdd390c9f/contracts/interfaces/IVabbleDAO.sol">Git Source</a></p>
<h2 id="functions-19"><a class="header" href="#functions-19">Functions</a></h2>
<h3 id="getfilmfund-1"><a class="header" href="#getfilmfund-1">getFilmFund</a></h3>
<pre><code class="language-solidity">function getFilmFund(uint256 _filmId)
    external
    view
    returns (uint256 raiseAmount_, uint256 fundPeriod_, uint256 fundType_, uint256 rewardPercent_);
</code></pre>
<h3 id="getfilmstatus-1"><a class="header" href="#getfilmstatus-1">getFilmStatus</a></h3>
<pre><code class="language-solidity">function getFilmStatus(uint256 _filmId) external view returns (Helper.Status status_);
</code></pre>
<h3 id="getfilmowner-1"><a class="header" href="#getfilmowner-1">getFilmOwner</a></h3>
<pre><code class="language-solidity">function getFilmOwner(uint256 _filmId) external view returns (address owner_);
</code></pre>
<h3 id="getfilmproposaltime-1"><a class="header" href="#getfilmproposaltime-1">getFilmProposalTime</a></h3>
<pre><code class="language-solidity">function getFilmProposalTime(uint256 _filmId) external view returns (uint256 cTime_, uint256 aTime_);
</code></pre>
<h3 id="approvefilmbyvote-1"><a class="header" href="#approvefilmbyvote-1">approveFilmByVote</a></h3>
<pre><code class="language-solidity">function approveFilmByVote(uint256 _filmId, uint256 _flag) external;
</code></pre>
<h3 id="isenabledclaimer-1"><a class="header" href="#isenabledclaimer-1">isEnabledClaimer</a></h3>
<pre><code class="language-solidity">function isEnabledClaimer(uint256 _filmId) external view returns (bool enable_);
</code></pre>
<h3 id="getfilmshare-1"><a class="header" href="#getfilmshare-1">getFilmShare</a></h3>
<pre><code class="language-solidity">function getFilmShare(uint256 _filmId)
    external
    view
    returns (uint256[] memory sharePercents_, address[] memory studioPayees_);
</code></pre>
<h3 id="getuserfilmlistformigrate"><a class="header" href="#getuserfilmlistformigrate">getUserFilmListForMigrate</a></h3>
<pre><code class="language-solidity">function getUserFilmListForMigrate(address _user) external view returns (Film[] memory filmList_);
</code></pre>
<h3 id="withdrawvabfromstudiopool-1"><a class="header" href="#withdrawvabfromstudiopool-1">withdrawVABFromStudioPool</a></h3>
<pre><code class="language-solidity">function withdrawVABFromStudioPool(address _to) external returns (uint256);
</code></pre>
<h2 id="structs-8"><a class="header" href="#structs-8">Structs</a></h2>
<h3 id="film"><a class="header" href="#film">Film</a></h3>
<pre><code class="language-solidity">struct Film {
    string title;
    string description;
    uint256[] sharePercents;
    address[] studioPayees;
    uint256 raiseAmount;
    uint256 fundPeriod;
    uint256 fundType;
    uint256 rewardPercent;
    uint256 noVote;
    uint256 enableClaimer;
    uint256 pCreateTime;
    uint256 pApproveTime;
    address studio;
    Helper.Status status;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ivabblefund"><a class="header" href="#ivabblefund">IVabbleFund</a></h1>
<p><a href="https://github.com/Mill1995/VABDAO/blob/4914bdc306cbdb860037485ce4bcebbfdd390c9f/contracts/interfaces/IVabbleFund.sol">Git Source</a></p>
<h2 id="functions-20"><a class="header" href="#functions-20">Functions</a></h2>
<h3 id="gettotalfundamountperfilm-1"><a class="header" href="#gettotalfundamountperfilm-1">getTotalFundAmountPerFilm</a></h3>
<pre><code class="language-solidity">function getTotalFundAmountPerFilm(uint256 _filmId) external view returns (uint256 amount_);
</code></pre>
<h3 id="getuserfundamountperfilm-1"><a class="header" href="#getuserfundamountperfilm-1">getUserFundAmountPerFilm</a></h3>
<pre><code class="language-solidity">function getUserFundAmountPerFilm(address _customer, uint256 _filmId) external view returns (uint256 amount_);
</code></pre>
<h3 id="israisedfullamount-1"><a class="header" href="#israisedfullamount-1">isRaisedFullAmount</a></h3>
<pre><code class="language-solidity">function isRaisedFullAmount(uint256 _filmId) external view returns (bool);
</code></pre>
<h3 id="getfilminvestorlist-1"><a class="header" href="#getfilminvestorlist-1">getFilmInvestorList</a></h3>
<pre><code class="language-solidity">function getFilmInvestorList(uint256 _filmId) external view returns (address[] memory);
</code></pre>
<h3 id="getallowusernftcount-1"><a class="header" href="#getallowusernftcount-1">getAllowUserNftCount</a></h3>
<pre><code class="language-solidity">function getAllowUserNftCount(uint256 _filmId, address _user) external view returns (uint256);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ivote"><a class="header" href="#ivote">IVote</a></h1>
<p><a href="https://github.com/Mill1995/VABDAO/blob/4914bdc306cbdb860037485ce4bcebbfdd390c9f/contracts/interfaces/IVote.sol">Git Source</a></p>
<h2 id="functions-21"><a class="header" href="#functions-21">Functions</a></h2>
<h3 id="getlastvotetime-1"><a class="header" href="#getlastvotetime-1">getLastVoteTime</a></h3>
<pre><code class="language-solidity">function getLastVoteTime(address _member) external view returns (uint256 time_);
</code></pre>
<h3 id="saveproposalwithfilm-1"><a class="header" href="#saveproposalwithfilm-1">saveProposalWithFilm</a></h3>
<pre><code class="language-solidity">function saveProposalWithFilm(uint256 _filmId, uint256 _proposalID) external;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-2"><a class="header" href="#contents-2">Contents</a></h1>
<ul>
<li><a href="contracts/libraries/Arrays.sol/library.Arrays.html">Arrays</a></li>
<li><a href="contracts/libraries/Helper.sol/library.Helper.html">Helper</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="arrays"><a class="header" href="#arrays">Arrays</a></h1>
<p><a href="https://github.com/Mill1995/VABDAO/blob/4914bdc306cbdb860037485ce4bcebbfdd390c9f/contracts/libraries/Arrays.sol">Git Source</a></p>
<p><em>Collection of functions related to array types.</em></p>
<h2 id="functions-22"><a class="header" href="#functions-22">Functions</a></h2>
<h3 id="sort"><a class="header" href="#sort">sort</a></h3>
<p><em>Sort an array of bytes32 (in memory) following the provided comparator function.
This function does the sorting "in place", meaning that it overrides the input. The object is returned for
convenience, but that returned value can be discarded safely if the caller has a memory pointer to the array.
NOTE: this function's cost is <code>O(n · log(n))</code> in average and <code>O(n²)</code> in the worst case, with n the length of the
array. Using it in view functions that are executed through <code>eth_call</code> is safe, but one should be very careful
when executing this as part of a transaction. If the array being sorted is too large, the sort operation may
consume more gas than is available in a block, leading to potential DoS.</em></p>
<pre><code class="language-solidity">function sort(
    bytes32[] memory array,
    function(bytes32, bytes32) pure returns (bool) comp
)
    internal
    pure
    returns (bytes32[] memory);
</code></pre>
<h3 id="sort-1"><a class="header" href="#sort-1">sort</a></h3>
<p><em>Variant of <a href="contracts/libraries/Arrays.sol//contracts/libraries/Arrays.sol/library.Arrays.html#sort">sort</a> that sorts an array of bytes32 in increasing order.</em></p>
<pre><code class="language-solidity">function sort(bytes32[] memory array) internal pure returns (bytes32[] memory);
</code></pre>
<h3 id="sort-2"><a class="header" href="#sort-2">sort</a></h3>
<p><em>Variant of <a href="contracts/libraries/Arrays.sol//contracts/libraries/Arrays.sol/library.Arrays.html#sort">sort</a> that sorts an array of address following a provided comparator function.</em></p>
<pre><code class="language-solidity">function sort(
    address[] memory array,
    function(address, address) pure returns (bool) comp
)
    internal
    pure
    returns (address[] memory);
</code></pre>
<h3 id="sort-3"><a class="header" href="#sort-3">sort</a></h3>
<p><em>Variant of <a href="contracts/libraries/Arrays.sol//contracts/libraries/Arrays.sol/library.Arrays.html#sort">sort</a> that sorts an array of address in increasing order.</em></p>
<pre><code class="language-solidity">function sort(address[] memory array) internal pure returns (address[] memory);
</code></pre>
<h3 id="sort-4"><a class="header" href="#sort-4">sort</a></h3>
<p><em>Variant of <a href="contracts/libraries/Arrays.sol//contracts/libraries/Arrays.sol/library.Arrays.html#sort">sort</a> that sorts an array of uint256 following a provided comparator function.</em></p>
<pre><code class="language-solidity">function sort(
    uint256[] memory array,
    function(uint256, uint256) pure returns (bool) comp
)
    internal
    pure
    returns (uint256[] memory);
</code></pre>
<h3 id="sort-5"><a class="header" href="#sort-5">sort</a></h3>
<p><em>Variant of <a href="contracts/libraries/Arrays.sol//contracts/libraries/Arrays.sol/library.Arrays.html#sort">sort</a> that sorts an array of uint256 in increasing order.</em></p>
<pre><code class="language-solidity">function sort(uint256[] memory array) internal pure returns (uint256[] memory);
</code></pre>
<h3 id="_quicksort"><a class="header" href="#_quicksort">_quickSort</a></h3>
<p><em>Performs a quick sort of a segment of memory. The segment sorted starts at <code>begin</code> (inclusive), and stops
at end (exclusive). Sorting follows the <code>comp</code> comparator.
Invariant: <code>begin &lt;= end</code>. This is the case when initially called by <a href="contracts/libraries/Arrays.sol//contracts/libraries/Arrays.sol/library.Arrays.html#sort">sort</a> and is preserved in subcalls.
IMPORTANT: Memory locations between <code>begin</code> and <code>end</code> are not validated/zeroed. This function should
be used only if the limits are within a memory array.</em></p>
<pre><code class="language-solidity">function _quickSort(uint256 begin, uint256 end, function(bytes32, bytes32) pure returns (bool) comp) private pure;
</code></pre>
<h3 id="_begin"><a class="header" href="#_begin">_begin</a></h3>
<p><em>Pointer to the memory location of the first element of <code>array</code>.</em></p>
<pre><code class="language-solidity">function _begin(bytes32[] memory array) private pure returns (uint256 ptr);
</code></pre>
<h3 id="_end"><a class="header" href="#_end">_end</a></h3>
<p><em>Pointer to the memory location of the first memory word (32bytes) after <code>array</code>. This is the memory word
that comes just after the last element of the array.</em></p>
<pre><code class="language-solidity">function _end(bytes32[] memory array) private pure returns (uint256 ptr);
</code></pre>
<h3 id="_mload"><a class="header" href="#_mload">_mload</a></h3>
<p><em>Load memory word (as a bytes32) at location <code>ptr</code>.</em></p>
<pre><code class="language-solidity">function _mload(uint256 ptr) private pure returns (bytes32 value);
</code></pre>
<h3 id="_swap"><a class="header" href="#_swap">_swap</a></h3>
<p><em>Swaps the elements memory location <code>ptr1</code> and <code>ptr2</code>.</em></p>
<pre><code class="language-solidity">function _swap(uint256 ptr1, uint256 ptr2) private pure;
</code></pre>
<h3 id="_defaultcomp"><a class="header" href="#_defaultcomp">_defaultComp</a></h3>
<p><em>Comparator for sorting arrays in increasing order.</em></p>
<pre><code class="language-solidity">function _defaultComp(bytes32 a, bytes32 b) private pure returns (bool);
</code></pre>
<h3 id="_casttobytes32array"><a class="header" href="#_casttobytes32array">_castToBytes32Array</a></h3>
<p><em>Helper: low level cast address memory array to uint256 memory array</em></p>
<pre><code class="language-solidity">function _castToBytes32Array(address[] memory input) private pure returns (bytes32[] memory output);
</code></pre>
<h3 id="_casttobytes32array-1"><a class="header" href="#_casttobytes32array-1">_castToBytes32Array</a></h3>
<p><em>Helper: low level cast uint256 memory array to uint256 memory array</em></p>
<pre><code class="language-solidity">function _castToBytes32Array(uint256[] memory input) private pure returns (bytes32[] memory output);
</code></pre>
<h3 id="_casttobytes32comp"><a class="header" href="#_casttobytes32comp">_castToBytes32Comp</a></h3>
<p><em>Helper: low level cast address comp function to bytes32 comp function</em></p>
<pre><code class="language-solidity">function _castToBytes32Comp(function(address, address) pure returns (bool) input)
    private
    pure
    returns (function(bytes32, bytes32) pure returns (bool) output);
</code></pre>
<h3 id="_casttobytes32comp-1"><a class="header" href="#_casttobytes32comp-1">_castToBytes32Comp</a></h3>
<p><em>Helper: low level cast uint256 comp function to bytes32 comp function</em></p>
<pre><code class="language-solidity">function _castToBytes32Comp(function(uint256, uint256) pure returns (bool) input)
    private
    pure
    returns (function(bytes32, bytes32) pure returns (bool) output);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="helper"><a class="header" href="#helper">Helper</a></h1>
<p><a href="https://github.com/Mill1995/VABDAO/blob/4914bdc306cbdb860037485ce4bcebbfdd390c9f/contracts/libraries/Helper.sol">Git Source</a></p>
<h2 id="functions-23"><a class="header" href="#functions-23">Functions</a></h2>
<h3 id="safeapprove"><a class="header" href="#safeapprove">safeApprove</a></h3>
<pre><code class="language-solidity">function safeApprove(address token, address to, uint256 value) internal;
</code></pre>
<h3 id="safetransfer"><a class="header" href="#safetransfer">safeTransfer</a></h3>
<pre><code class="language-solidity">function safeTransfer(address token, address to, uint256 value) internal;
</code></pre>
<h3 id="safetransferfrom"><a class="header" href="#safetransferfrom">safeTransferFrom</a></h3>
<pre><code class="language-solidity">function safeTransferFrom(address token, address from, address to, uint256 value) internal;
</code></pre>
<h3 id="safetransfereth"><a class="header" href="#safetransfereth">safeTransferETH</a></h3>
<pre><code class="language-solidity">function safeTransferETH(address to, uint256 value) internal;
</code></pre>
<h3 id="safetransferasset"><a class="header" href="#safetransferasset">safeTransferAsset</a></h3>
<pre><code class="language-solidity">function safeTransferAsset(address token, address to, uint256 value) internal;
</code></pre>
<h3 id="iscontract"><a class="header" href="#iscontract">isContract</a></h3>
<pre><code class="language-solidity">function isContract(address _address) internal view returns (bool);
</code></pre>
<h3 id="istestnet"><a class="header" href="#istestnet">isTestNet</a></h3>
<pre><code class="language-solidity">function isTestNet() internal view returns (bool);
</code></pre>
<h2 id="enums"><a class="header" href="#enums">Enums</a></h2>
<h3 id="status"><a class="header" href="#status">Status</a></h3>
<pre><code class="language-solidity">enum Status {
    LISTED,
    UPDATED,
    APPROVED_LISTING,
    APPROVED_FUNDING,
    REJECTED,
    REPLACED
}
</code></pre>
<h3 id="tokentype"><a class="header" href="#tokentype">TokenType</a></h3>
<pre><code class="language-solidity">enum TokenType {
    ERC20,
    ERC721,
    ERC1155
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-3"><a class="header" href="#contents-3">Contents</a></h1>
<ul>
<li><a href="contracts/mocks/MockERC1155.sol/contract.MockERC1155.html">MockERC1155</a></li>
<li><a href="contracts/mocks/MockERC20.sol/contract.MockERC20.html">MockERC20</a></li>
<li><a href="contracts/mocks/MockERC721.sol/contract.MockERC721.html">MockERC721</a></li>
<li><a href="contracts/mocks/MockUSDC.sol/contract.MockUSDC.html">MockUSDC</a></li>
<li><a href="contracts/mocks/MockUSDT.sol/contract.MockUSDT.html">MockUSDT</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="mockerc1155"><a class="header" href="#mockerc1155">MockERC1155</a></h1>
<p><a href="https://github.com/Mill1995/VABDAO/blob/4914bdc306cbdb860037485ce4bcebbfdd390c9f/contracts/mocks/MockERC1155.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
ERC1155</p>
<h2 id="state-variables-12"><a class="header" href="#state-variables-12">State Variables</a></h2>
<h3 id="uri"><a class="header" href="#uri"><em>uri</em></a></h3>
<pre><code class="language-solidity">string private _uri_ = "https://opensea-creatures-api.herokuapp.com/api/creature/{id}.json";
</code></pre>
<h2 id="functions-24"><a class="header" href="#functions-24">Functions</a></h2>
<h3 id="constructor-12"><a class="header" href="#constructor-12">constructor</a></h3>
<pre><code class="language-solidity">constructor() ERC1155(_uri_);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="mockerc20"><a class="header" href="#mockerc20">MockERC20</a></h1>
<p><a href="https://github.com/Mill1995/VABDAO/blob/4914bdc306cbdb860037485ce4bcebbfdd390c9f/contracts/mocks/MockERC20.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
Ownable, ERC20</p>
<h2 id="state-variables-13"><a class="header" href="#state-variables-13">State Variables</a></h2>
<h3 id="supply"><a class="header" href="#supply">SUPPLY</a></h3>
<pre><code class="language-solidity">uint256 private SUPPLY = 1_456_250_000 * 10 ** 18;
</code></pre>
<h3 id="faucetlimit"><a class="header" href="#faucetlimit">faucetLimit</a></h3>
<pre><code class="language-solidity">uint256 private constant faucetLimit = 5e8 * 10 ** 18;
</code></pre>
<h2 id="functions-25"><a class="header" href="#functions-25">Functions</a></h2>
<h3 id="constructor-13"><a class="header" href="#constructor-13">constructor</a></h3>
<pre><code class="language-solidity">constructor(string memory _name_, string memory _symbol_) ERC20(_name_, _symbol_);
</code></pre>
<h3 id="faucet"><a class="header" href="#faucet">faucet</a></h3>
<pre><code class="language-solidity">function faucet(uint256 _amount) external;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="mockerc721"><a class="header" href="#mockerc721">MockERC721</a></h1>
<p><a href="https://github.com/Mill1995/VABDAO/blob/4914bdc306cbdb860037485ce4bcebbfdd390c9f/contracts/mocks/MockERC721.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
ERC721Enumerable, Ownable</p>
<h2 id="state-variables-14"><a class="header" href="#state-variables-14">State Variables</a></h2>
<h3 id="_currenttokenid"><a class="header" href="#_currenttokenid">_currentTokenId</a></h3>
<pre><code class="language-solidity">uint256 private _currentTokenId;
</code></pre>
<h2 id="functions-26"><a class="header" href="#functions-26">Functions</a></h2>
<h3 id="constructor-14"><a class="header" href="#constructor-14">constructor</a></h3>
<pre><code class="language-solidity">constructor(string memory _name, string memory _symbol) ERC721(_name, _symbol);
</code></pre>
<h3 id="mintto-1"><a class="header" href="#mintto-1">mintTo</a></h3>
<p><em>Mints a token to an address with a tokenURI.</em></p>
<pre><code class="language-solidity">function mintTo(address _to) public onlyOwner;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_to</code></td><td><code>address</code></td><td>address of the future owner of the token</td></tr>
</tbody></table>
</div>
<h3 id="batchmintto"><a class="header" href="#batchmintto">batchMintTo</a></h3>
<pre><code class="language-solidity">function batchMintTo(address _to, uint256 _amount) external onlyOwner;
</code></pre>
<h3 id="__getnexttokenid-1"><a class="header" href="#__getnexttokenid-1">__getNextTokenId</a></h3>
<p><em>calculates the next token ID based on value of _currentTokenId</em></p>
<pre><code class="language-solidity">function __getNextTokenId() private view returns (uint256);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>uint256 for the next token ID</td></tr>
</tbody></table>
</div>
<h3 id="__incrementtokenid"><a class="header" href="#__incrementtokenid">__incrementTokenId</a></h3>
<p><em>increments the value of _currentTokenId</em></p>
<pre><code class="language-solidity">function __incrementTokenId() private;
</code></pre>
<h3 id="basetokenuri"><a class="header" href="#basetokenuri">baseTokenURI</a></h3>
<pre><code class="language-solidity">function baseTokenURI() public pure returns (string memory);
</code></pre>
<h3 id="tokenuri-1"><a class="header" href="#tokenuri-1">tokenURI</a></h3>
<pre><code class="language-solidity">function tokenURI(uint256 _tokenId) public pure override returns (string memory);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="mockusdc"><a class="header" href="#mockusdc">MockUSDC</a></h1>
<p><a href="https://github.com/Mill1995/VABDAO/blob/4914bdc306cbdb860037485ce4bcebbfdd390c9f/contracts/mocks/MockUSDC.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
Ownable, ERC20</p>
<h2 id="state-variables-15"><a class="header" href="#state-variables-15">State Variables</a></h2>
<h3 id="supply-1"><a class="header" href="#supply-1">SUPPLY</a></h3>
<pre><code class="language-solidity">uint256 SUPPLY = 10_000_000 * 10 ** 6;
</code></pre>
<h3 id="faucetlimit-1"><a class="header" href="#faucetlimit-1">faucetLimit</a></h3>
<pre><code class="language-solidity">uint256 public constant faucetLimit = 5000 * 10 ** 6;
</code></pre>
<h2 id="functions-27"><a class="header" href="#functions-27">Functions</a></h2>
<h3 id="constructor-15"><a class="header" href="#constructor-15">constructor</a></h3>
<pre><code class="language-solidity">constructor(string memory _name_, string memory _symbol_) ERC20(_name_, _symbol_);
</code></pre>
<h3 id="decimals"><a class="header" href="#decimals">decimals</a></h3>
<pre><code class="language-solidity">function decimals() public pure override returns (uint8);
</code></pre>
<h3 id="faucet-1"><a class="header" href="#faucet-1">faucet</a></h3>
<pre><code class="language-solidity">function faucet(uint256 _amount) external;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="mockusdt"><a class="header" href="#mockusdt">MockUSDT</a></h1>
<p><a href="https://github.com/Mill1995/VABDAO/blob/4914bdc306cbdb860037485ce4bcebbfdd390c9f/contracts/mocks/MockUSDT.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
Ownable, ERC20</p>
<h2 id="state-variables-16"><a class="header" href="#state-variables-16">State Variables</a></h2>
<h3 id="supply-2"><a class="header" href="#supply-2">SUPPLY</a></h3>
<pre><code class="language-solidity">uint256 SUPPLY = 10_000_000 * 10 ** 6;
</code></pre>
<h3 id="faucetlimit-2"><a class="header" href="#faucetlimit-2">faucetLimit</a></h3>
<pre><code class="language-solidity">uint256 public constant faucetLimit = 5000 * 10 ** 6;
</code></pre>
<h2 id="functions-28"><a class="header" href="#functions-28">Functions</a></h2>
<h3 id="constructor-16"><a class="header" href="#constructor-16">constructor</a></h3>
<pre><code class="language-solidity">constructor(string memory _name_, string memory _symbol_) ERC20(_name_, _symbol_);
</code></pre>
<h3 id="decimals-1"><a class="header" href="#decimals-1">decimals</a></h3>
<pre><code class="language-solidity">function decimals() public pure override returns (uint8);
</code></pre>
<h3 id="faucet-2"><a class="header" href="#faucet-2">faucet</a></h3>
<pre><code class="language-solidity">function faucet(uint256 _amount) external;
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->
        <script src="solidity.min.js"></script>

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
